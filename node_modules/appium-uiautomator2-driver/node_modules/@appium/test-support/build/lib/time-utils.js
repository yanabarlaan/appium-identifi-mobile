"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fakeTime = fakeTime;

require("source-map-support/register");

function fakeTime(sandbox) {
  let clock = sandbox.useFakeTimers();
  return new TimeLord(clock);
}

class TimeLord {
  constructor(clock) {
    this.clock = clock;
  }

  speedup(interval, times) {
    let tick = n => {
      if (n === 0) return;
      process.nextTick(() => {
        this.clock.tick(interval);
        n--;
        tick(n);
      });
    };

    tick(times);
  }

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmYWtlVGltZSIsInNhbmRib3giLCJjbG9jayIsInVzZUZha2VUaW1lcnMiLCJUaW1lTG9yZCIsImNvbnN0cnVjdG9yIiwic3BlZWR1cCIsImludGVydmFsIiwidGltZXMiLCJ0aWNrIiwibiIsInByb2Nlc3MiLCJuZXh0VGljayJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi90aW1lLXV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZha2VUaW1lIChzYW5kYm94KSB7XG4gIGxldCBjbG9jayA9IHNhbmRib3gudXNlRmFrZVRpbWVycygpO1xuICByZXR1cm4gbmV3IFRpbWVMb3JkKGNsb2NrKTtcbn1cblxuY2xhc3MgVGltZUxvcmQge1xuICBjb25zdHJ1Y3RvciAoY2xvY2spIHtcbiAgICB0aGlzLmNsb2NrID0gY2xvY2s7XG4gIH1cblxuICBzcGVlZHVwIChpbnRlcnZhbCwgdGltZXMpIHtcbiAgICBsZXQgdGljayA9IChuKSA9PiB7XG4gICAgICBpZiAobiA9PT0gMCkgcmV0dXJuOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9jay50aWNrKGludGVydmFsKTtcbiAgICAgICAgbi0tO1xuICAgICAgICB0aWNrKG4pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aWNrKHRpbWVzKTtcbiAgfVxufVxuZXhwb3J0IHsgZmFrZVRpbWUgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsU0FBU0EsUUFBVCxDQUFtQkMsT0FBbkIsRUFBNEI7RUFDMUIsSUFBSUMsS0FBSyxHQUFHRCxPQUFPLENBQUNFLGFBQVIsRUFBWjtFQUNBLE9BQU8sSUFBSUMsUUFBSixDQUFhRixLQUFiLENBQVA7QUFDRDs7QUFFRCxNQUFNRSxRQUFOLENBQWU7RUFDYkMsV0FBVyxDQUFFSCxLQUFGLEVBQVM7SUFDbEIsS0FBS0EsS0FBTCxHQUFhQSxLQUFiO0VBQ0Q7O0VBRURJLE9BQU8sQ0FBRUMsUUFBRixFQUFZQyxLQUFaLEVBQW1CO0lBQ3hCLElBQUlDLElBQUksR0FBSUMsQ0FBRCxJQUFPO01BQ2hCLElBQUlBLENBQUMsS0FBSyxDQUFWLEVBQWE7TUFDYkMsT0FBTyxDQUFDQyxRQUFSLENBQWlCLE1BQU07UUFDckIsS0FBS1YsS0FBTCxDQUFXTyxJQUFYLENBQWdCRixRQUFoQjtRQUNBRyxDQUFDO1FBQ0RELElBQUksQ0FBQ0MsQ0FBRCxDQUFKO01BQ0QsQ0FKRDtJQUtELENBUEQ7O0lBUUFELElBQUksQ0FBQ0QsS0FBRCxDQUFKO0VBQ0Q7O0FBZlkifQ==