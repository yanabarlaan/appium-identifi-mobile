"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MANIFEST_RELATIVE_PATH = exports.MANIFEST_BASENAME = exports.DEFAULT_APPIUM_HOME = void 0;
exports.hasAppiumDependency = hasAppiumDependency;
exports.resolveManifestPath = exports.resolveAppiumHome = exports.readPackageInDir = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _os = require("os");

var _path = _interopRequireDefault(require("path"));

var _pkgDir = _interopRequireDefault(require("pkg-dir"));

var _readPkg = _interopRequireDefault(require("read-pkg"));

var _npm = require("./npm");

const DEFAULT_APPIUM_HOME = _path.default.resolve((0, _os.homedir)(), '.appium');

exports.DEFAULT_APPIUM_HOME = DEFAULT_APPIUM_HOME;
const MANIFEST_BASENAME = 'extensions.yaml';
exports.MANIFEST_BASENAME = MANIFEST_BASENAME;

const MANIFEST_RELATIVE_PATH = _path.default.join('node_modules', '.cache', 'appium', MANIFEST_BASENAME);

exports.MANIFEST_RELATIVE_PATH = MANIFEST_RELATIVE_PATH;

async function hasAppiumDependency(cwd) {
  let listResult;
  let resolved;
  let version;

  try {
    var _listResult$dependenc, _listResult, _listResult$dependenc2, _listResult$dependenc3, _listResult$dependenc4, _listResult2, _listResult2$dependen, _listResult2$dependen2;

    listResult = await _npm.npm.list(cwd, 'appium');
    resolved = (_listResult$dependenc = (_listResult = listResult) === null || _listResult === void 0 ? void 0 : (_listResult$dependenc2 = _listResult.dependencies) === null || _listResult$dependenc2 === void 0 ? void 0 : (_listResult$dependenc3 = _listResult$dependenc2.appium) === null || _listResult$dependenc3 === void 0 ? void 0 : _listResult$dependenc3.resolved) !== null && _listResult$dependenc !== void 0 ? _listResult$dependenc : '';
    version = (_listResult$dependenc4 = (_listResult2 = listResult) === null || _listResult2 === void 0 ? void 0 : (_listResult2$dependen = _listResult2.dependencies) === null || _listResult2$dependen === void 0 ? void 0 : (_listResult2$dependen2 = _listResult2$dependen.appium) === null || _listResult2$dependen2 === void 0 ? void 0 : _listResult2$dependen2.version) !== null && _listResult$dependenc4 !== void 0 ? _listResult$dependenc4 : '';
  } catch {
    try {
      var _ref, _pkg$dependencies$app, _pkg$dependencies, _pkg$devDependencies, _pkg$optionalDependen;

      const pkg = await readPackageInDir(cwd);
      version = resolved = (_ref = (_pkg$dependencies$app = pkg === null || pkg === void 0 ? void 0 : (_pkg$dependencies = pkg.dependencies) === null || _pkg$dependencies === void 0 ? void 0 : _pkg$dependencies.appium) !== null && _pkg$dependencies$app !== void 0 ? _pkg$dependencies$app : pkg === null || pkg === void 0 ? void 0 : (_pkg$devDependencies = pkg.devDependencies) === null || _pkg$devDependencies === void 0 ? void 0 : _pkg$devDependencies.appium) !== null && _ref !== void 0 ? _ref : pkg === null || pkg === void 0 ? void 0 : (_pkg$optionalDependen = pkg.optionalDependencies) === null || _pkg$optionalDependen === void 0 ? void 0 : _pkg$optionalDependen.appium;
    } catch {}
  }

  return Boolean(version && (!resolved || resolved && !resolved.startsWith('file:')) && !version.startsWith('1') && !version.startsWith('0'));
}

const readPackageInDir = _lodash.default.memoize(async function _readPackageInDir(cwd) {
  return await (0, _readPkg.default)({
    cwd,
    normalize: true
  });
});

exports.readPackageInDir = readPackageInDir;

const resolveAppiumHome = _lodash.default.memoize(async function _resolveAppiumHome(cwd = process.cwd()) {
  if (process.env.APPIUM_HOME) {
    return process.env.APPIUM_HOME;
  }

  if (!_path.default.isAbsolute(cwd)) {
    throw new TypeError('`cwd` parameter must be an absolute path');
  }

  let currentPkgDir;

  try {
    currentPkgDir = await (0, _pkgDir.default)(cwd);

    if (!currentPkgDir) {
      return DEFAULT_APPIUM_HOME;
    }
  } catch {
    return DEFAULT_APPIUM_HOME;
  }

  return (await hasAppiumDependency(currentPkgDir)) ? currentPkgDir : DEFAULT_APPIUM_HOME;
});

exports.resolveAppiumHome = resolveAppiumHome;

const resolveManifestPath = _lodash.default.memoize(async function _resolveManifestPath(appiumHome) {
  var _appiumHome;

  appiumHome = (_appiumHome = appiumHome) !== null && _appiumHome !== void 0 ? _appiumHome : await resolveAppiumHome();
  return _path.default.join(appiumHome, MANIFEST_RELATIVE_PATH);
});

exports.resolveManifestPath = resolveManifestPath;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJERUZBVUxUX0FQUElVTV9IT01FIiwicGF0aCIsInJlc29sdmUiLCJNQU5JRkVTVF9CQVNFTkFNRSIsIk1BTklGRVNUX1JFTEFUSVZFX1BBVEgiLCJqb2luIiwiaGFzQXBwaXVtRGVwZW5kZW5jeSIsImN3ZCIsImxpc3RSZXN1bHQiLCJyZXNvbHZlZCIsInZlcnNpb24iLCJucG0iLCJsaXN0IiwiZGVwZW5kZW5jaWVzIiwiYXBwaXVtIiwicGtnIiwicmVhZFBhY2thZ2VJbkRpciIsImRldkRlcGVuZGVuY2llcyIsIm9wdGlvbmFsRGVwZW5kZW5jaWVzIiwiQm9vbGVhbiIsInN0YXJ0c1dpdGgiLCJfIiwibWVtb2l6ZSIsIl9yZWFkUGFja2FnZUluRGlyIiwibm9ybWFsaXplIiwicmVzb2x2ZUFwcGl1bUhvbWUiLCJfcmVzb2x2ZUFwcGl1bUhvbWUiLCJwcm9jZXNzIiwiZW52IiwiQVBQSVVNX0hPTUUiLCJpc0Fic29sdXRlIiwiVHlwZUVycm9yIiwiY3VycmVudFBrZ0RpciIsInJlc29sdmVNYW5pZmVzdFBhdGgiLCJfcmVzb2x2ZU1hbmlmZXN0UGF0aCIsImFwcGl1bUhvbWUiXSwic291cmNlcyI6WyIuLi8uLi9saWIvZW52LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1jaGVja1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdvcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBwa2dEaXIgZnJvbSAncGtnLWRpcic7XG5pbXBvcnQgcmVhZFBrZyBmcm9tICdyZWFkLXBrZyc7XG5pbXBvcnQgeyBucG0gfSBmcm9tICcuL25wbSc7XG5cbi8qKlxuICogUGF0aCB0byB0aGUgZGVmYXVsdCBgQVBQSVVNX0hPTUVgIGRpciAoYH4vLmFwcGl1bWApLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVBQSVVNX0hPTUUgPSBwYXRoLnJlc29sdmUoaG9tZWRpcigpLCAnLmFwcGl1bScpO1xuXG4vKipcbiAqIEJhc2VuYW1lIG9mIGV4dGVuc2lvbiBtYW5pZmVzdCBmaWxlLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IE1BTklGRVNUX0JBU0VOQU1FID0gJ2V4dGVuc2lvbnMueWFtbCc7XG5cbi8qKlxuICogUmVsYXRpdmUgcGF0aCB0byBleHRlbnNpb24gbWFuaWZlc3QgZmlsZSBmcm9tIGBBUFBJVU1fSE9NRWAuXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgTUFOSUZFU1RfUkVMQVRJVkVfUEFUSCA9IHBhdGguam9pbihcbiAgJ25vZGVfbW9kdWxlcycsXG4gICcuY2FjaGUnLFxuICAnYXBwaXVtJyxcbiAgTUFOSUZFU1RfQkFTRU5BTUUsXG4pO1xuXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIGFwcGl1bSBpcyBpbnN0YWxsZWQgYXMgYSBkZXBlbmRlbmN5IG9mIGEgbG9jYWwgcGFja2FnZSBhdCBgY3dkYC5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIHNwZWNpYWwgY2FzZXMgYXJlIGNvbnNpZGVyZWQ6XG4gKlxuICogLSBJZiBgcmVzb2x2ZWRgIHN0YXJ0cyB3aXRoIGBmaWxlOmAsIHRoZW4gYGN3ZGAgbGlrZWx5IHBvaW50cyB0byBgYXBwaXVtLW1vbm9yZXBvYCwgYW5kIChmb3Igbm93KSB3ZSBleHBlY3QgYEFQUElVTV9IT01FYCB0byBiZSB0aGUgZGVmYXVsdC5cbiAqIC0gSWYgdGhlIGB2ZXJzaW9uYCBiZWdpbnMgd2l0aCBgMGAgb3IgYDFgLCB3ZSdyZSBsb29raW5nIGF0IGFuIG9sZCB2ZXJzaW9uIG9mIGBhcHBpdW1gIChub3QgdGhpcyBvbmUhKVxuICpcbiAqIE5vdGUgdGhhdCB3ZSBhcmUgX25vdF8gcGVyZm9ybWluZyB0aGUgY2hlY2sgXCJpcyB0aGUgY3VycmVudGx5IHJ1bm5pbmcgQXBwaXVtIHRoZSBzYW1lIG9uZSBhcyBmb3VuZCBpbiB0aGUgbGlzdCBvZiBkZXBlbmRlbmNpZXNcIiwgYmVjYXVzZSBJJ20gbm90IHN1cmUgaXQgYWN0dWFsbHkgbWF0dGVycyAoYXNzdW1pbmcgdGhlIHZlcnNpb25zIGFyZSBjb21wYXRpYmxlKS5cbiAqIFJlZ2FyZGxlc3Mgd2UgbWF5IHdhbnQgdG8gbWFrZSB0aGlzIG1vcmUgcm9idXN0IGluIHRoZSBmdXR1cmUsIGFzIHdlIGhpdCBlZGdlIGNhc2VzLlxuICpcbiAqIF9BbHNvXyBub3RlIHRoYXQgaWYgYGFwcGl1bWAgYXBwZWFycyBhcyBhIGRlcGVuZGVuY3kgaW4gYHBhY2thZ2UuanNvbmAgX2J1dCBpdCBpcyBub3QgeWV0IGluc3RhbGxlZF8gdGhpcyBmdW5jdGlvbiB3aWxsIHJlc29sdmUgYGZhbHNlYC4gIFRoaXMgbWF5IG5vdCBiZSBleGFjdGx5IHdoYXQgd2Ugd2FudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3dkXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc0FwcGl1bURlcGVuZGVuY3kgKGN3ZCkge1xuICAvKipcbiAgICogQHRvZG8gdHlwZSB0aGlzXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqL1xuICBsZXQgbGlzdFJlc3VsdDtcbiAgLyoqIEB0eXBlIHtzdHJpbmd8dW5kZWZpbmVkfSAqL1xuICBsZXQgcmVzb2x2ZWQ7XG4gIC8qKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH0gKi9cbiAgbGV0IHZlcnNpb247XG4gIHRyeSB7XG4gICAgbGlzdFJlc3VsdCA9IGF3YWl0IG5wbS5saXN0KGN3ZCwgJ2FwcGl1bScpO1xuICAgIC8vIGlmIFwicmVzb2x2ZWRcIiBpcyBlbXB0eSwgdGhlbiBgYXBwaXVtYCBpcyBpbiBkZXBlbmRlbmNpZXMsIGJ1dCBgbnBtIGluc3RhbGxgIGhhcyBub3QgYmVlbiBydW4uXG4gICAgLy8gaW4gb3RoZXIgd29yZHMsIHRoaXMgZnVuY3Rpb24gY2FuIHJlc29sdmUgYHRydWVgIGV2ZW4gaWYgYHJlc29sdmVkYCBpcyBlbXB0eS4uLlxuICAgIHJlc29sdmVkID0gbGlzdFJlc3VsdD8uZGVwZW5kZW5jaWVzPy5hcHBpdW0/LnJlc29sdmVkID8/ICcnO1xuICAgIC8vIC4uLmhvd2V2ZXIsIGl0IGNhbm5vdCBkbyBzbyB1bmxlc3MgYHZlcnNpb25gIGlzIG5vbmVtcHR5LlxuICAgIHZlcnNpb24gPSBsaXN0UmVzdWx0Py5kZXBlbmRlbmNpZXM/LmFwcGl1bT8udmVyc2lvbiA/PyAnJztcbiAgfSBjYXRjaCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBrZyA9IGF3YWl0IHJlYWRQYWNrYWdlSW5EaXIoY3dkKTtcbiAgICAgIC8vIHdlJ3JlIG9ubHkgZ29pbmcgdG8gbG9vayBhdCB0aGVzZSB0aHJlZSBmaWVsZHMgZm9yIG5vdywgYnV0IHdlIGNhbiBjaGFuZ2UgaXQgbGF0ZXIgaWYgbmVlZCBiZS5cbiAgICAgIHZlcnNpb24gPSByZXNvbHZlZCA9XG4gICAgICAgIHBrZz8uZGVwZW5kZW5jaWVzPy5hcHBpdW0gPz9cbiAgICAgICAgcGtnPy5kZXZEZXBlbmRlbmNpZXM/LmFwcGl1bSA/P1xuICAgICAgICBwa2c/Lm9wdGlvbmFsRGVwZW5kZW5jaWVzPy5hcHBpdW07XG4gICAgfSBjYXRjaCB7fVxuICB9XG4gIHJldHVybiBCb29sZWFuKFxuICAgIHZlcnNpb24gJiZcbiAgICAgICghcmVzb2x2ZWQgfHwgKHJlc29sdmVkICYmICFyZXNvbHZlZC5zdGFydHNXaXRoKCdmaWxlOicpKSkgJiZcbiAgICAgIC8vIGRvaW5nIGFueSBmdXJ0aGVyIGNoZWNraW5nIGhlcmUgbWF5IGJlIGEgZm9vbCdzIGVycmFuZCwgYmVjYXVzZSB5b3UgY2FuIHBpbiB0aGUgdmVyc2lvblxuICAgICAgLy8gdG8gYSBfbG90XyBvZiBkaWZmZXJlbnQgdGhpbmdzICh0YWdzLCBVUkxzLCBldGMpLlxuICAgICAgIXZlcnNpb24uc3RhcnRzV2l0aCgnMScpICYmXG4gICAgICAhdmVyc2lvbi5zdGFydHNXaXRoKCcwJyksXG4gICk7XG59XG5cbi8qKlxuICogUmVhZCBhIGBwYWNrYWdlLmpzb25gIGluIGRpciBgY3dkYC4gIElmIG5vbmUgZm91bmQsIHJldHVybiBgdW5kZWZpbmVkYC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWRQYWNrYWdlSW5EaXIgPSBfLm1lbW9pemUoXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3dkIC0gRGlyZWN0b3J5IG9zdGVuc2libHkgaGF2aW5nIGEgYHBhY2thZ2UuanNvbmBcbiAgICogQHJldHVybnMge1Byb21pc2U8aW1wb3J0KCdyZWFkLXBrZycpLk5vcm1hbGl6ZWRQYWNrYWdlSnNvbnx1bmRlZmluZWQ+fVxuICAgKi9cbiAgYXN5bmMgZnVuY3Rpb24gX3JlYWRQYWNrYWdlSW5EaXIgKGN3ZCkge1xuICAgIHJldHVybiBhd2FpdCByZWFkUGtnKHtjd2QsIG5vcm1hbGl6ZTogdHJ1ZX0pO1xuICB9LFxuKTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGxvY2F0aW9uIG9mIEFwcGl1bSdzIFwiaG9tZVwiIGRpclxuICpcbiAqIC0gSWYgYEFQUElVTV9IT01FYCBpcyBzZXQgaW4gdGhlIGVudmlyb25tZW50LCB1c2UgdGhhdFxuICogLSBJZiB3ZSBoYXZlIGFuIGBleHRlbnNpb25zLnlhbWxgIGluIHtAbGlua2NvZGUgREVGQVVMVF9BUFBJVU1fSE9NRX0sIHRoZW4gdXNlIHRoYXQuXG4gKiAtIElmIHdlIGZpbmQgYSBgcGFja2FnZS5qc29uYCBpbiBvciBhYm92ZSBgY3dkYCBhbmQge0BsaW5rY29kZSBzaG91bGRVc2VDd2RGb3JBcHBpdW1Ib21lfSByZXR1cm5zIGB0cnVlYCwgdGhlbiB1c2UgdGhlIGRpcmVjdG9yeSBjb250YWluaW5nIHRoZSBgcGFja2FnZS5qc29uYC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlc29sdmVBcHBpdW1Ib21lID0gXy5tZW1vaXplKFxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjd2RdIC0gQ3VycmVudCB3b3JraW5nIGRpcmVjdG9yeS4gIF9NdXN0XyBiZSBhYnNvbHV0ZSwgaWYgc3BlY2lmaWVkLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgYXN5bmMgZnVuY3Rpb24gX3Jlc29sdmVBcHBpdW1Ib21lIChjd2QgPSBwcm9jZXNzLmN3ZCgpKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52LkFQUElVTV9IT01FKSB7XG4gICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuQVBQSVVNX0hPTUU7XG4gICAgfVxuXG4gICAgaWYgKCFwYXRoLmlzQWJzb2x1dGUoY3dkKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYGN3ZGAgcGFyYW1ldGVyIG11c3QgYmUgYW4gYWJzb2x1dGUgcGF0aCcpO1xuICAgIH1cblxuICAgIC8qKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH0gKi9cbiAgICBsZXQgY3VycmVudFBrZ0RpcjtcblxuICAgIHRyeSB7XG4gICAgICBjdXJyZW50UGtnRGlyID0gYXdhaXQgcGtnRGlyKGN3ZCk7XG5cbiAgICAgIC8vIGlmIHdlIGNhbid0IGZpbmQgYSBgcGFja2FnZS5qc29uYCwgdXNlIHRoZSBkZWZhdWx0XG4gICAgICBpZiAoIWN1cnJlbnRQa2dEaXIpIHtcbiAgICAgICAgcmV0dXJuIERFRkFVTFRfQVBQSVVNX0hPTUU7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyB1bmNsZWFyIGlmIHRoaXMgY2FuIGFjdHVhbGx5IGhhcHBlblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHJldHVybiBERUZBVUxUX0FQUElVTV9IT01FO1xuICAgIH1cblxuICAgIHJldHVybiAoYXdhaXQgaGFzQXBwaXVtRGVwZW5kZW5jeShjdXJyZW50UGtnRGlyKSlcbiAgICAgID8gY3VycmVudFBrZ0RpclxuICAgICAgOiBERUZBVUxUX0FQUElVTV9IT01FO1xuICB9LFxuKTtcblxuLyoqXG4gKiBGaWd1cmUgb3V0IG1hbmlmZXN0IHBhdGggYmFzZWQgb24gYGFwcGl1bUhvbWVgLlxuICpcbiAqIFRoZSBhc3N1bXB0aW9uIGlzIHRoYXQsIGlmIGBhcHBpdW1Ib21lYCBoYXMgYmVlbiBwcm92aWRlZCwgaXQgd2FzIHJlc29sdmVkIHZpYSB7QGxpbmsgcmVzb2x2ZUFwcGl1bUhvbWUgYHJlc29sdmVBcHBpdW1Ib21lKClgfSEgIElmIHVuc3VyZSxcbiAqIGRvbid0IHBhc3MgYSBwYXJhbWV0ZXIgYW5kIGxldCBgcmVzb2x2ZUFwcGl1bUhvbWUoKWAgaGFuZGxlIGl0LlxuICovXG5leHBvcnQgY29uc3QgcmVzb2x2ZU1hbmlmZXN0UGF0aCA9IF8ubWVtb2l6ZShcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbYXBwaXVtSG9tZV0gLSBBcHBpdW0gaG9tZSBkaXJlY3RvcnlcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIGFzeW5jIGZ1bmN0aW9uIF9yZXNvbHZlTWFuaWZlc3RQYXRoIChhcHBpdW1Ib21lKSB7XG4gICAgLy8gY2FuIHlvdSBcImF3YWl0XCIgaW4gYSBkZWZhdWx0IHBhcmFtZXRlcj8gaXMgdGhhdCBhIGdvb2QgaWRlYT9cbiAgICBhcHBpdW1Ib21lID0gYXBwaXVtSG9tZSA/PyAoYXdhaXQgcmVzb2x2ZUFwcGl1bUhvbWUoKSk7XG4gICAgcmV0dXJuIHBhdGguam9pbihhcHBpdW1Ib21lLCBNQU5JRkVTVF9SRUxBVElWRV9QQVRIKTtcbiAgfSxcbik7XG5cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydCgncmVhZC1wa2cnKS5Ob3JtYWxpemVkUGFja2FnZUpzb259IE5vcm1hbGl6ZWRQYWNrYWdlSnNvblxuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFNTyxNQUFNQSxtQkFBbUIsR0FBR0MsY0FBS0MsT0FBTCxDQUFhLGtCQUFiLEVBQXdCLFNBQXhCLENBQTVCOzs7QUFNQSxNQUFNQyxpQkFBaUIsR0FBRyxpQkFBMUI7OztBQU1BLE1BQU1DLHNCQUFzQixHQUFHSCxjQUFLSSxJQUFMLENB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