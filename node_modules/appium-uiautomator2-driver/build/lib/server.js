"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.startServer = startServer;

require("source-map-support/register");

var _logger = _interopRequireDefault(require("./logger"));

var _baseDriver = require("@appium/base-driver");

var _driver = _interopRequireDefault(require("./driver"));

async function startServer(port = 4884, host = 'localhost') {
  let d = new _driver.default({
    port,
    host
  });
  let routeConfiguringFunction = (0, _baseDriver.routeConfiguringFunction)(d);
  let server = (0, _baseDriver.server)({
    routeConfiguringFunction,
    port,
    hostname: host
  });

  _logger.default.info(`Android Uiautomator2 server listening on http://${host}:${port}`);

  d.server = server;
  return await server;
}

var _default = startServer;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3NlcnZlci5qcyIsIm5hbWVzIjpbInN0YXJ0U2VydmVyIiwicG9ydCIsImhvc3QiLCJkIiwiQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlciIsInJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbiIsIm1ha2VSb3V0ZXIiLCJzZXJ2ZXIiLCJiYXNlU2VydmVyIiwiaG9zdG5hbWUiLCJsb2ciLCJpbmZvIl0sInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsibGliL3NlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IHNlcnZlciBhcyBiYXNlU2VydmVyLCByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24gYXMgbWFrZVJvdXRlciB9IGZyb20gJ0BhcHBpdW0vYmFzZS1kcml2ZXInO1xuaW1wb3J0IEFuZHJvaWRVaWF1dG9tYXRvcjJEcml2ZXIgZnJvbSAnLi9kcml2ZXInO1xuXG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyIChwb3J0ID0gNDg4NCwgaG9zdCA9ICdsb2NhbGhvc3QnKSB7XG4gIGxldCBkID0gbmV3IEFuZHJvaWRVaWF1dG9tYXRvcjJEcml2ZXIoe3BvcnQsIGhvc3R9KTtcbiAgbGV0IHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbiA9IG1ha2VSb3V0ZXIoZCk7XG4gIGxldCBzZXJ2ZXIgPSBiYXNlU2VydmVyKHtyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24sIHBvcnQsIGhvc3RuYW1lOiBob3N0fSk7XG4gIGxvZy5pbmZvKGBBbmRyb2lkIFVpYXV0b21hdG9yMiBzZXJ2ZXIgbGlzdGVuaW5nIG9uIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH1gKTtcbiAgZC5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gIHJldHVybiBhd2FpdCBzZXJ2ZXI7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG5leHBvcnQgZGVmYXVsdCBzdGFydFNlcnZlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBR0EsZUFBZUEsV0FBZixDQUE0QkMsSUFBSSxHQUFHLElBQW5DLEVBQXlDQyxJQUFJLEdBQUcsV0FBaEQsRUFBNkQ7RUFDM0QsSUFBSUMsQ0FBQyxHQUFHLElBQUlDLGVBQUosQ0FBOEI7SUFBQ0gsSUFBRDtJQUFPQztFQUFQLENBQTlCLENBQVI7RUFDQSxJQUFJRyx3QkFBd0IsR0FBRyxJQUFBQyxvQ0FBQSxFQUFXSCxDQUFYLENBQS9CO0VBQ0EsSUFBSUksTUFBTSxHQUFHLElBQUFDLGtCQUFBLEVBQVc7SUFBQ0gsd0JBQUQ7SUFBMkJKLElBQTNCO0lBQWlDUSxRQUFRLEVBQUVQO0VBQTNDLENBQVgsQ0FBYjs7RUFDQVEsZUFBQSxDQUFJQyxJQUFKLENBQVUsbURBQWtEVCxJQUFLLElBQUdELElBQUssRUFBekU7O0VBQ0FFLENBQUMsQ0FBQ0ksTUFBRixHQUFXQSxNQUFYO0VBQ0EsT0FBTyxNQUFNQSxNQUFiO0FBQ0Q7O2VBR2NQLFcifQ==
