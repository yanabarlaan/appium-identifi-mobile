"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mkdocsBuild = mkdocsBuild;
exports.mkdocsServe = mkdocsServe;
exports.verifyMkdocs = verifyMkdocs;

require("source-map-support/register");

var _teen_process = require("teen_process");

const MKDOCS_VER_STR = 'version 1.';

async function verifyMkdocs() {
  try {
    const {
      stdout
    } = await (0, _teen_process.exec)('mkdocs', ['-V']);

    if (!stdout.includes(MKDOCS_VER_STR)) {
      throw new Error('version mismatch');
    }
  } catch (err) {
    throw new Error(`Could not verify mkdocs 1.x is available. Make sure it's installed ` + `and on your path. Specific error: ${err}`);
  }
}

async function mkdocsBuild(configPath, outputDir, theme = 'mkdocs') {
  await verifyMkdocs();
  await (0, _teen_process.exec)('mkdocs', ['build', '-f', configPath, '-t', theme, '-d', outputDir]);
}

async function mkdocsServe(configPath) {
  await verifyMkdocs();
  const proc = new _teen_process.SubProcess('mkdocs', ['serve', '-f', configPath]);
  await proc.start();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNS0RPQ1NfVkVSX1NUUiIsInZlcmlmeU1rZG9jcyIsInN0ZG91dCIsImluY2x1ZGVzIiwiRXJyb3IiLCJlcnIiLCJta2RvY3NCdWlsZCIsImNvbmZpZ1BhdGgiLCJvdXRwdXREaXIiLCJ0aGVtZSIsIm1rZG9jc1NlcnZlIiwicHJvYyIsIlN1YlByb2Nlc3MiLCJzdGFydCJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9ta2RvY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYywgU3ViUHJvY2VzcyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5cbmNvbnN0IE1LRE9DU19WRVJfU1RSID0gJ3ZlcnNpb24gMS4nO1xuXG4vKipcbiAqIFJ1biBhIHZlcnNpb24gY2hlY2sgb24gdGhlIHN5c3RlbS1pbnN0YWxsZWQgbWtkb2NzIHRvIG1ha2Ugc3VyZSBpdCBpcyBzZXQgdXBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeU1rZG9jcyAoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qge3N0ZG91dH0gPSBhd2FpdCBleGVjKCdta2RvY3MnLCBbJy1WJ10pO1xuICAgIGlmICghc3Rkb3V0LmluY2x1ZGVzKE1LRE9DU19WRVJfU1RSKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd2ZXJzaW9uIG1pc21hdGNoJyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCB2ZXJpZnkgbWtkb2NzIDEueCBpcyBhdmFpbGFibGUuIE1ha2Ugc3VyZSBpdCdzIGluc3RhbGxlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgYGFuZCBvbiB5b3VyIHBhdGguIFNwZWNpZmljIGVycm9yOiAke2Vycn1gKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biAnbWtkb2NzIGJ1aWxkJyBvbiBhIHByb2plY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnUGF0aCBwYXRoIHRvIG1rZG9jcyBjb25maWcgeW1sXG4gKiBAcGFyYW0ge3N0cmluZ30gb3V0cHV0RGlyIGRpcmVjdG9yeSBta2RvY3Mgc2hvdWxkIGJ1aWxkIGludG9cbiAqIEBwYXJhbSB7P3N0cmluZ30gdGhlbWUgdGhlbWUgbmFtZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWtkb2NzQnVpbGQgKGNvbmZpZ1BhdGgsIG91dHB1dERpciwgdGhlbWUgPSAnbWtkb2NzJykge1xuICBhd2FpdCB2ZXJpZnlNa2RvY3MoKTtcbiAgYXdhaXQgZXhlYygnbWtkb2NzJywgWydidWlsZCcsICctZicsIGNvbmZpZ1BhdGgsICctdCcsIHRoZW1lLCAnLWQnLCBvdXRwdXREaXJdKTtcbn1cblxuLyoqXG4gKiBSdW4gJ21rZG9jcyBzZXJ2ZScgb24gYSBwcm9qZWN0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZ1BhdGggcGF0aCB0byBta2RvY3MgY29uZmlnIHltbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWtkb2NzU2VydmUgKGNvbmZpZ1BhdGgpIHtcbiAgYXdhaXQgdmVyaWZ5TWtkb2NzKCk7XG4gIGNvbnN0IHByb2MgPSBuZXcgU3ViUHJvY2VzcygnbWtkb2NzJywgWydzZXJ2ZScsICctZicsIGNvbmZpZ1BhdGhdKTtcbiAgYXdhaXQgcHJvYy5zdGFydCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUVBLE1BQU1BLGNBQWMsR0FBRyxZQUF2Qjs7QUFLTyxlQUFlQyxZQUFmLEdBQStCO0VBQ3BDLElBQUk7SUFDRixNQUFNO01BQUNDO0lBQUQsSUFBVyxNQUFNLHdCQUFLLFFBQUwsRUFBZSxDQUFDLElBQUQsQ0FBZixDQUF2Qjs7SUFDQSxJQUFJLENBQUNBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkgsY0FBaEIsQ0FBTCxFQUFzQztNQUNwQyxNQUFNLElBQUlJLEtBQUosQ0FBVSxrQkFBVixDQUFOO0lBQ0Q7RUFDRixDQUxELENBS0UsT0FBT0MsR0FBUCxFQUFZO0lBQ1osTUFBTSxJQUFJRCxLQUFKLENBQVcscUVBQUQsR0FDQyxxQ0FBb0NDLEdBQUksRUFEbkQsQ0FBTjtFQUVEO0FBQ0Y7O0FBU00sZUFBZUMsV0FBZixDQUE0QkMsVUFBNUIsRUFBd0NDLFNBQXhDLEVBQW1EQyxLQUFLLEdBQUcsUUFBM0QsRUFBcUU7RUFDMUUsTUFBTVIsWUFBWSxFQUFsQjtFQUNBLE1BQU0sd0JBQUssUUFBTCxFQUFlLENBQUMsT0FBRCxFQUFVLElBQVYsRUFBZ0JNLFVBQWhCLEVBQTRCLElBQTVCLEVBQWtDRSxLQUFsQyxFQUF5QyxJQUF6QyxFQUErQ0QsU0FBL0MsQ0FBZixDQUFOO0FBQ0Q7O0FBT00sZUFBZUUsV0FBZixDQUE0QkgsVUFBNUIsRUFBd0M7RUFDN0MsTUFBTU4sWUFBWSxFQUFsQjtFQUNBLE1BQU1VLElBQUksR0FBRyxJQUFJQyx3QkFBSixDQUFlLFFBQWYsRUFBeUIsQ0FBQyxPQUFELEVBQVUsSUFBVixFQUFnQkwsVUFBaEIsQ0FBekIsQ0FBYjtFQUNBLE1BQU1JLElBQUksQ0FBQ0UsS0FBTCxFQUFOO0FBQ0QifQ==