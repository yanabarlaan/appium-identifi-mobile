"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.SecureValuesPreprocessor = exports.SECURE_VALUES_PREPROCESSOR = void 0;

require("source-map-support/register");

var _fs = _interopRequireDefault(require("./fs"));

var _lodash = _interopRequireDefault(require("lodash"));

const DEFAULT_REPLACER = '**SECURE**';

class SecureValuesPreprocessor {
  constructor() {
    this._rules = [];
  }

  get rules() {
    return this._rules;
  }

  parseRule(rule) {
    let pattern;
    let replacer = DEFAULT_REPLACER;
    let flags = ['g'];

    if (_lodash.default.isString(rule)) {
      if (rule.length === 0) {
        throw new Error(`${JSON.stringify(rule)} -> The value must not be empty`);
      }

      pattern = `\\b${_lodash.default.escapeRegExp(rule)}\\b`;
    } else if (_lodash.default.isPlainObject(rule)) {
      if (_lodash.default.has(rule, 'pattern')) {
        if (!_lodash.default.isString(rule.pattern) || rule.pattern.length === 0) {
          throw new Error(`${JSON.stringify(rule)} -> The value of 'pattern' must be a valid non-empty string`);
        }

        pattern = rule.pattern;
      } else if (_lodash.default.has(rule, 'text')) {
        if (!_lodash.default.isString(rule.text) || rule.text.length === 0) {
          throw new Error(`${JSON.stringify(rule)} -> The value of 'text' must be a valid non-empty string`);
        }

        pattern = `\\b${_lodash.default.escapeRegExp(rule.text)}\\b`;
      }

      if (!pattern) {
        throw new Error(`${JSON.stringify(rule)} -> Must either have a field named 'pattern' or 'text'`);
      }

      if (_lodash.default.has(rule, 'flags')) {
        for (const flag of ['i', 'g', 'm', 's', 'u', 'y']) {
          if (_lodash.default.includes(rule.flags, flag)) {
            flags.push(flag);
          }
        }

        flags = _lodash.default.uniq(flags);
      }

      if (_lodash.default.isString(rule.replacer)) {
        replacer = rule.replacer;
      }
    } else {
      throw new Error(`${JSON.stringify(rule)} -> Must either be a string or an object`);
    }

    return {
      pattern: new RegExp(pattern, flags.join('')),
      replacer
    };
  }

  async loadRules(source) {
    let rules;

    if (_lodash.default.isArray(source)) {
      rules = source;
    } else {
      if (!(await _fs.default.exists(source))) {
        throw new Error(`'${source}' does not exist or is not accessible`);
      }

      try {
        rules = JSON.parse(await _fs.default.readFile(source, 'utf8'));
      } catch (e) {
        throw new Error(`'${source}' must be a valid JSON file. Original error: ${e.message}`);
      }

      if (!_lodash.default.isArray(rules)) {
        throw new Error(`'${source}' must contain a valid JSON array`);
      }
    }

    const issues = [];
    this._rules = [];

    for (const rule of rules) {
      try {
        this._rules.push(this.parseRule(rule));
      } catch (e) {
        issues.push(e.message);
      }
    }

    return issues;
  }

  preprocess(str) {
    if (this._rules.length === 0 || !_lodash.default.isString(str)) {
      return str;
    }

    let result = str;

    for (const rule of this._rules) {
      result = result.replace(rule.pattern, rule.replacer);
    }

    return result;
  }

}

exports.SecureValuesPreprocessor = SecureValuesPreprocessor;
const SECURE_VALUES_PREPROCESSOR = new SecureValuesPreprocessor();
exports.SECURE_VALUES_PREPROCESSOR = SECURE_VALUES_PREPROCESSOR;
var _default = SECURE_VALUES_PREPROCESSOR;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJERUZBVUxUX1JFUExBQ0VSIiwiU2VjdXJlVmFsdWVzUHJlcHJvY2Vzc29yIiwiY29uc3RydWN0b3IiLCJfcnVsZXMiLCJydWxlcyIsInBhcnNlUnVsZSIsInJ1bGUiLCJwYXR0ZXJuIiwicmVwbGFjZXIiLCJmbGFncyIsIl8iLCJpc1N0cmluZyIsImxlbmd0aCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImVzY2FwZVJlZ0V4cCIsImlzUGxhaW5PYmplY3QiLCJoYXMiLCJ0ZXh0IiwiZmxhZyIsImluY2x1ZGVzIiwicHVzaCIsInVuaXEiLCJSZWdFeHAiLCJqb2luIiwibG9hZFJ1bGVzIiwic291cmNlIiwiaXNBcnJheSIsImZzIiwiZXhpc3RzIiwicGFyc2UiLCJyZWFkRmlsZSIsImUiLCJtZXNzYWdlIiwiaXNzdWVzIiwicHJlcHJvY2VzcyIsInN0ciIsInJlc3VsdCIsInJlcGxhY2UiLCJTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUiJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9sb2ctaW50ZXJuYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJy4vZnMnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgREVGQVVMVF9SRVBMQUNFUiA9ICcqKlNFQ1VSRSoqJztcblxuXG5jbGFzcyBTZWN1cmVWYWx1ZXNQcmVwcm9jZXNzb3Ige1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5fcnVsZXMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7QXJyYXk8U2VjdXJlVmFsdWVQcmVwcm9jZXNzaW5nUnVsZT59IFRoZSBsaXN0IG9mIHN1Y2Nlc3NmdWxseVxuICAgKiBwYXJzZWQgcHJlcHJvY2Vzc2luZyBydWxlc1xuICAgKi9cbiAgZ2V0IHJ1bGVzICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcnVsZXM7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHNpbmdsZSBydWxlIGZyb20gdGhlIGdpdmVuIEpTT04gZmlsZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSdWxlfSBydWxlIFRoZSBydWxlIG1pZ2h0IGVpdGhlciBiZSByZXByZXNlbnRlZCBhcyBhIHNpbmdsZSBzdHJpbmdcbiAgICogb3IgYSBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHBhcnNpbmcgdGhlIHJ1bGVcbiAgICogQHJldHVybnMge1NlY3VyZVZhbHVlUHJlcHJvY2Vzc2luZ1J1bGV9IFRoZSBwYXJzZWQgcnVsZVxuICAgKi9cbiAgcGFyc2VSdWxlIChydWxlKSB7XG4gICAgbGV0IHBhdHRlcm47XG4gICAgbGV0IHJlcGxhY2VyID0gREVGQVVMVF9SRVBMQUNFUjtcbiAgICBsZXQgZmxhZ3MgPSBbJ2cnXTtcbiAgICBpZiAoXy5pc1N0cmluZyhydWxlKSkge1xuICAgICAgaWYgKHJ1bGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtKU09OLnN0cmluZ2lmeShydWxlKX0gLT4gVGhlIHZhbHVlIG11c3Qgbm90IGJlIGVtcHR5YCk7XG4gICAgICB9XG4gICAgICBwYXR0ZXJuID0gYFxcXFxiJHtfLmVzY2FwZVJlZ0V4cChydWxlKX1cXFxcYmA7XG4gICAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QocnVsZSkpIHtcbiAgICAgIGlmIChfLmhhcyhydWxlLCAncGF0dGVybicpKSB7XG4gICAgICAgIGlmICghXy5pc1N0cmluZyhydWxlLnBhdHRlcm4pIHx8IHJ1bGUucGF0dGVybi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IFRoZSB2YWx1ZSBvZiAncGF0dGVybicgbXVzdCBiZSBhIHZhbGlkIG5vbi1lbXB0eSBzdHJpbmdgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuID0gcnVsZS5wYXR0ZXJuO1xuICAgICAgfSBlbHNlIGlmIChfLmhhcyhydWxlLCAndGV4dCcpKSB7XG4gICAgICAgIGlmICghXy5pc1N0cmluZyhydWxlLnRleHQpIHx8IHJ1bGUudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IFRoZSB2YWx1ZSBvZiAndGV4dCcgbXVzdCBiZSBhIHZhbGlkIG5vbi1lbXB0eSBzdHJpbmdgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuID0gYFxcXFxiJHtfLmVzY2FwZVJlZ0V4cChydWxlLnRleHQpfVxcXFxiYDtcbiAgICAgIH1cbiAgICAgIGlmICghcGF0dGVybikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IE11c3QgZWl0aGVyIGhhdmUgYSBmaWVsZCBuYW1lZCAncGF0dGVybicgb3IgJ3RleHQnYCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmhhcyhydWxlLCAnZmxhZ3MnKSkge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnMjQWR2YW5jZWRfc2VhcmNoaW5nX3dpdGhfZmxhZ3NfMlxuICAgICAgICBmb3IgKGNvbnN0IGZsYWcgb2YgWydpJywgJ2cnLCAnbScsICdzJywgJ3UnLCAneSddKSB7XG4gICAgICAgICAgaWYgKF8uaW5jbHVkZXMocnVsZS5mbGFncywgZmxhZykpIHtcbiAgICAgICAgICAgIGZsYWdzLnB1c2goZmxhZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZsYWdzID0gXy51bmlxKGZsYWdzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF8uaXNTdHJpbmcocnVsZS5yZXBsYWNlcikpIHtcbiAgICAgICAgcmVwbGFjZXIgPSBydWxlLnJlcGxhY2VyO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IE11c3QgZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuIG9iamVjdGApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXR0ZXJuOiBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzLmpvaW4oJycpKSxcbiAgICAgIHJlcGxhY2VyLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgcnVsZXMgZnJvbSB0aGUgZ2l2ZW4gSlNPTiBmaWxlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfFJ1bGVbXX0gc291cmNlIFRoZSBmdWxsIHBhdGggdG8gdGhlIEpTT04gZmlsZSBjb250YWluaW5nIHNlY3VyZVxuICAgKiB2YWx1ZXMgcmVwbGFjZW1lbnQgcnVsZXMgb3IgdGhlIHJ1bGVzIHRoZW1zZWx2ZXMgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXlcbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBmb3JtYXQgb2YgdGhlIHNvdXJjZSBmaWxlIGlzIGludmFsaWQgb3JcbiAgICogaXQgZG9lcyBub3QgZXhpc3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nW10+fSBUaGUgbGlzdCBvZiBpc3N1ZXMgZm91bmQgd2hpbGUgcGFyc2luZyBlYWNoIHJ1bGUuXG4gICAqIEFuIGVtcHR5IGxpc3QgaXMgcmV0dXJuZWQgaWYgbm8gcnVsZSBwYXJzaW5nIGlzc3VlcyB3ZXJlIGZvdW5kXG4gICAqL1xuICBhc3luYyBsb2FkUnVsZXMgKHNvdXJjZSkge1xuICAgIGxldCBydWxlcztcbiAgICBpZiAoXy5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgIHJ1bGVzID0gc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWF3YWl0IGZzLmV4aXN0cyhzb3VyY2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJyR7c291cmNlfScgZG9lcyBub3QgZXhpc3Qgb3IgaXMgbm90IGFjY2Vzc2libGVgKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHJ1bGVzID0gSlNPTi5wYXJzZShhd2FpdCBmcy5yZWFkRmlsZShzb3VyY2UsICd1dGY4JykpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3NvdXJjZX0nIG11c3QgYmUgYSB2YWxpZCBKU09OIGZpbGUuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIGlmICghXy5pc0FycmF5KHJ1bGVzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3NvdXJjZX0nIG11c3QgY29udGFpbiBhIHZhbGlkIEpTT04gYXJyYXlgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICB0aGlzLl9ydWxlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgcnVsZSBvZiBydWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fcnVsZXMucHVzaCh0aGlzLnBhcnNlUnVsZShydWxlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKGUubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpc3N1ZXM7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgc2VjdXJlIHZhbHVlcyByZXBsYWNlbWVudCBpbnNpZGUgdGhlIGdpdmVuIHN0cmluZ1xuICAgKiBhY2NvcmRpbmcgdG8gdGhlIHByZXZpb3VzbHkgbG9hZGVkIHJ1bGVzLiBObyByZXBsYWNlbWVudCBpcyBtYWRlXG4gICAqIGlmIHRoZXJlIGFyZSBubyBydWxlcyBvciB0aGUgZ2l2ZW4gdmFsdWUgaXMgbm90IGEgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBtYWtlIHJlcGxhY2VtZW50cyBpblxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc3RyaW5nIHdpdGggcmVwbGFjZW1lbnRzIG1hZGVcbiAgICovXG4gIHByZXByb2Nlc3MgKHN0cikge1xuICAgIGlmICh0aGlzLl9ydWxlcy5sZW5ndGggPT09IDAgfHwgIV8uaXNTdHJpbmcoc3RyKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0ID0gc3RyO1xuICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLl9ydWxlcykge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UocnVsZS5wYXR0ZXJuLCBydWxlLnJlcGxhY2VyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5jb25zdCBTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUiA9IG5ldyBTZWN1cmVWYWx1ZXNQcmVwcm9jZXNzb3IoKTtcblxuZXhwb3J0IHsgU0VDVVJFX1ZBTFVFU19QUkVQUk9DRVNTT1IsIFNlY3VyZVZhbHVlc1ByZXByb2Nlc3NvciB9O1xuZXhwb3J0IGRlZmF1bHQgU0VDVVJFX1ZBTFVFU19QUkVQUk9DRVNTT1I7XG5cbi8qKlxuICogQHR5cGVkZWYgUnVsZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBhdHRlcm4gQSB2YWxpZCBSZWdFeHAgcGF0dGVybiB0byBiZSByZXBsYWNlZFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHQgQSB0ZXh0IG1hdGNoIHRvIHJlcGxhY2UuIEVpdGhlciB0aGlzIHByb3BlcnR5IG9yIHRoZVxuICogYWJvdmUgb25lIG11c3QgYmUgcHJvdmlkZWQuIGBwYXR0ZXJuYCBoYXMgcHJpb3JpdHkgb3ZlciBgdGV4dGAgaWYgYm90aCBhcmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2ZsYWdzXSBSZWd1bGFyIGV4cHJlc3Npb24gZmxhZ3MgZm9yIHRoZSBnaXZlbiBwYXR0ZXJuLlxuICogU3VwcG9ydGVkIGZsYWcgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgc3RhbmRhcmQgSmF2YVNjcmlwdCBSZWdFeHAgY29uc3RydWN0b3I6XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnMjQWR2YW5jZWRfc2VhcmNoaW5nX3dpdGhfZmxhZ3NfMlxuICogVGhlICdnJyAoZ2xvYmFsIG1hdGNoaW5nKSBpcyBhbHdheXMgZW5hYmxlZCB0aG91Z2guXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3JlcGxhY2VyXSBUaGUgcmVwbGFjZXIgdmFsdWUgdG8gdXNlLiBCeSBkZWZhdWx0XG4gKiBlcXVhbHMgdG8gYERFRkFVTFRfU0VDVVJFX1JFUExBQ0VSYFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgU2VjdXJlVmFsdWVQcmVwcm9jZXNzaW5nUnVsZVxuICogQHByb3BlcnR5IHtSZWdFeHB9IHBhdHRlcm4gVGhlIHBhcnNlZCBwYXR0ZXJuIHdoaWNoIGlzIGdvaW5nIHRvIGJlIHVzZWQgZm9yIHJlcGxhY2VtZW50XG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3JlcGxhY2VyXSBUaGUgcmVwbGFjZXIgdmFsdWUgdG8gdXNlLiBCeSBkZWZhdWx0XG4gKiBlcXVhbHMgdG8gYERFRkFVTFRfU0VDVVJFX1JFUExBQ0VSYFxuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUEsTUFBTUEsZ0JBQWdCLEdBQUcsWUFBekI7O0FBR0EsTUFBTUMsd0JBQU4sQ0FBK0I7RUFDN0JDLFdBQVcsR0FBSTtJQUNiLEtBQUtDLE1BQUwsR0FBYyxFQUFkO0VBQ0Q7O0VBTVEsSUFBTEMsS0FBSyxHQUFJO0lBQ1gsT0FBTyxLQUFLRCxNQUFaO0VBQ0Q7O0VBVURFLFNBQVMsQ0FBRUMsSUFBRixFQUFRO0lBQ2YsSUFBSUMsT0FBSjtJQUNBLElBQUlDLFFBQVEsR0FBR1IsZ0JBQWY7SUFDQSxJQUFJUyxLQUFLLEdBQUcsQ0FBQyxHQUFELENBQVo7O0lBQ0EsSUFBSUMsZ0JBQUVDLFFBQUYsQ0FBV0wsSUFBWCxDQUFKLEVBQXNCO01BQ3BCLElBQUlBLElB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