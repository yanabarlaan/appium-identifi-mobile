"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _lib = require("../../../../lib");

describe('logging custom events', function () {
  it('should allow logging of events', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    await d.logCustomEvent('myorg', 'myevent');

    _lodash.default.keys(d._eventHistory).should.eql(['commands', 'myorg:myevent']);
  });
  it('should get all events including custom ones', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d.logEvent('appiumEvent');
    await d.logCustomEvent('myorg', 'myevent');
    const events = await d.getLogEvents();

    _lodash.default.keys(events).should.eql(['commands', 'appiumEvent', 'myorg:myevent']);
  });
});
describe('#getLogEvents', function () {
  it('should allow to get all events', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    (await d.getLogEvents()).should.eql({
      commands: [],
      testCommand: ['1', '2', '3']
    });
  });
  it('should filter with testCommand', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    (await d.getLogEvents('testCommand')).should.eql({
      testCommand: ['1', '2', '3']
    });
  });
  it('should not filter with wrong but can be a part of the event name', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    (await d.getLogEvents('testCommandDummy')).should.eql({});
  });
  it('should filter with multiple event keys', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    d._eventHistory.testCommand2 = ['4', '5'];
    (await d.getLogEvents(['testCommand', 'testCommand2'])).should.eql({
      testCommand: ['1', '2', '3'],
      testCommand2: ['4', '5']
    });
  });
  it('should filter with custom events', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory['custom:appiumEvent'] = ['1', '2', '3'];
    (await d.getLogEvents(['custom:appiumEvent'])).should.eql({
      'custom:appiumEvent': ['1', '2', '3']
    });
  });
  it('should not filter with no existed event name', async function () {
    const d = new _lib.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    (await d.getLogEvents(['noEventName'])).should.eql({});
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiZCIsIkJhc2VEcml2ZXIiLCJfZXZlbnRIaXN0b3J5Iiwic2hvdWxkIiwiZXFsIiwiY29tbWFuZHMiLCJsb2dDdXN0b21FdmVudCIsIl8iLCJrZXlzIiwibG9nRXZlbnQiLCJldmVudHMiLCJnZXRMb2dFdmVudHMiLCJ0ZXN0Q29tbWFuZCIsInRlc3RDb21tYW5kMiJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Rlc3QvdW5pdC9iYXNlZHJpdmVyL2NvbW1hbmRzL2V2ZW50LnNwZWMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEJhc2VEcml2ZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9saWInO1xuXG5cblxuZGVzY3JpYmUoJ2xvZ2dpbmcgY3VzdG9tIGV2ZW50cycsIGZ1bmN0aW9uICgpIHtcbiAgaXQoJ3Nob3VsZCBhbGxvdyBsb2dnaW5nIG9mIGV2ZW50cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLl9ldmVudEhpc3Rvcnkuc2hvdWxkLmVxbCh7Y29tbWFuZHM6IFtdfSk7XG4gICAgYXdhaXQgZC5sb2dDdXN0b21FdmVudCgnbXlvcmcnLCAnbXlldmVudCcpO1xuICAgIF8ua2V5cyhkLl9ldmVudEhpc3RvcnkpLnNob3VsZC5lcWwoWydjb21tYW5kcycsICdteW9yZzpteWV2ZW50J10pO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBnZXQgYWxsIGV2ZW50cyBpbmNsdWRpbmcgY3VzdG9tIG9uZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnNob3VsZC5lcWwoe2NvbW1hbmRzOiBbXX0pO1xuICAgIGQubG9nRXZlbnQoJ2FwcGl1bUV2ZW50Jyk7XG4gICAgYXdhaXQgZC5sb2dDdXN0b21FdmVudCgnbXlvcmcnLCAnbXlldmVudCcpO1xuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGQuZ2V0TG9nRXZlbnRzKCk7XG4gICAgXy5rZXlzKGV2ZW50cykuc2hvdWxkLmVxbChbJ2NvbW1hbmRzJywgJ2FwcGl1bUV2ZW50JywgJ215b3JnOm15ZXZlbnQnXSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCcjZ2V0TG9nRXZlbnRzJywgZnVuY3Rpb24gKCkge1xuICBpdCgnc2hvdWxkIGFsbG93IHRvIGdldCBhbGwgZXZlbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgKGF3YWl0IGQuZ2V0TG9nRXZlbnRzKCkpLnNob3VsZC5lcWwoe1xuICAgICAgY29tbWFuZHM6IFtdLCB0ZXN0Q29tbWFuZDogWycxJywgJzInLCAnMyddXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZmlsdGVyIHdpdGggdGVzdENvbW1hbmQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnNob3VsZC5lcWwoe2NvbW1hbmRzOiBbXX0pO1xuICAgIGQuX2V2ZW50SGlzdG9yeS50ZXN0Q29tbWFuZCA9IFsnMScsICcyJywgJzMnXTtcbiAgICAoYXdhaXQgZC5nZXRMb2dFdmVudHMoJ3Rlc3RDb21tYW5kJykpLnNob3VsZC5lcWwoe1xuICAgICAgdGVzdENvbW1hbmQ6IFsnMScsICcyJywgJzMnXVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG5vdCBmaWx0ZXIgd2l0aCB3cm9uZyBidXQgY2FuIGJlIGEgcGFydCBvZiB0aGUgZXZlbnQgbmFtZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLl9ldmVudEhpc3Rvcnkuc2hvdWxkLmVxbCh7Y29tbWFuZHM6IFtdfSk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnRlc3RDb21tYW5kID0gWycxJywgJzInLCAnMyddO1xuICAgIChhd2FpdCBkLmdldExvZ0V2ZW50cygndGVzdENvbW1hbmREdW1teScpKS5zaG91bGQuZXFsKHt9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmaWx0ZXIgd2l0aCBtdWx0aXBsZSBldmVudCBrZXlzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgZC5fZXZlbnRIaXN0b3J5LnRlc3RDb21tYW5kMiA9IFsnNCcsICc1J107XG4gICAgKGF3YWl0IGQuZ2V0TG9nRXZlbnRzKFsndGVzdENvbW1hbmQnLCAndGVzdENvbW1hbmQyJ10pKS5zaG91bGQuZXFsKHtcbiAgICAgIHRlc3RDb21tYW5kOiBbJzEnLCAnMicsICczJ10sIHRlc3RDb21tYW5kMjogWyc0JywgJzUnXVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZpbHRlciB3aXRoIGN1c3RvbSBldmVudHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnNob3VsZC5lcWwoe2NvbW1hbmRzOiBbXX0pO1xuICAgIGQuX2V2ZW50SGlzdG9yeVsnY3VzdG9tOmFwcGl1bUV2ZW50J10gPSBbJzEnLCAnMicsICczJ107XG4gICAgKGF3YWl0IGQuZ2V0TG9nRXZlbnRzKFsnY3VzdG9tOmFwcGl1bUV2ZW50J10pKS5zaG91bGQuZXFsKHtcbiAgICAgICdjdXN0b206YXBwaXVtRXZlbnQnOiBbJzEnLCAnMicsICczJ11cbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgZmlsdGVyIHdpdGggbm8gZXhpc3RlZCBldmVudCBuYW1lJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgKGF3YWl0IGQuZ2V0TG9nRXZlbnRzKFsnbm9FdmVudE5hbWUnXSkpLnNob3VsZC5lcWwoe30pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7QUFDQTs7QUFJQUEsUUFBUSxDQUFDLHVCQUFELEVBQTBCLFlBQVk7RUFDNUNDLEVBQUUsQ0FBQyxnQ0FBRCxFQUFtQyxrQkFBa0I7SUFDckQsTUFBTUMsQ0FBQyxHQUFHLElBQUlDLGVBQUosRUFBVjs7SUFDQUQsQ0FBQyxDQUFDRSxhQUFGLENBQWdCQyxNQUFoQixDQUF1QkMsR0FBdkIsQ0FBMkI7TUFBQ0MsUUFBUSxFQUFFO0lBQVgsQ0FBM0I7O0lBQ0EsTUFBTUwsQ0FBQyxDQUFDTSxjQUFGLENBQWlCLE9BQWpCLEVBQTBCLFNBQTFCLENBQU47O0lBQ0FDLGdCQUFFQyxJQUFGLENBQU9SLENBQUMsQ0FBQ0UsYUFBVCxFQUF3QkMsTUFBeEIsQ0FBK0JDLEdBQS9CLENBQW1DLENBQUMsVUFBRCxFQUFhLGVBQWIsQ0FBbkM7RUFDRCxDQUxDLENBQUY7RUFNQUwsRUFBRSxDQUFDLDZDQUFELEVBQWdELGtCQUFrQjtJQUNsRSxNQUFNQyxDQUFDLEdBQUcsSUFBSUMsZUFBSixFQUFWOztJQUNBRCxDQUFDLENBQUNFLGFBQUYsQ0FBZ0JDLE1BQWhCLENBQXVCQyxHQUF2QixDQUEyQjtNQUFDQyxRQUFRLEVBQUU7SUFBWCxDQUEzQjs7SUFDQUwsQ0FBQyxDQUFDUyxRQUFGLENBQVcsYUFB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