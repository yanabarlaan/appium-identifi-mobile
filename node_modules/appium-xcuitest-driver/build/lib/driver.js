"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.XCUITestDriver = void 0;

require("source-map-support/register");

var _baseDriver = require("@appium/base-driver");

var _support = require("@appium/support");

var _lodash = _interopRequireDefault(require("lodash"));

var _url = _interopRequireDefault(require("url"));

var _appiumWebdriveragent = require("appium-webdriveragent");

var _lruCache = _interopRequireDefault(require("lru-cache"));

var _simulatorManagement = require("./simulator-management");

var _appiumIosSimulator = require("appium-ios-simulator");

var _certUtils = require("./cert-utils");

var _asyncbox = require("asyncbox");

var _appUtils = require("./app-utils");

var _desiredCaps = require("./desired-caps");

var _index = _interopRequireDefault(require("./commands/index"));

var _utils = require("./utils");

var _realDeviceManagement = require("./real-device-management");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _asyncLock = _interopRequireDefault(require("async-lock"));

var _path = _interopRequireDefault(require("path"));

var _appiumIdb = _interopRequireDefault(require("appium-idb"));

var _deviceConnectionsFactory = _interopRequireDefault(require("./device-connections-factory"));

var _pyIosDeviceClient = _interopRequireDefault(require("./py-ios-device-client"));

const SHUTDOWN_OTHER_FEAT_NAME = 'shutdown_other_sims';
const CUSTOMIZE_RESULT_BUNDPE_PATH = 'customize_result_bundle_path';
const defaultServerCaps = {
  webStorageEnabled: false,
  locationContextEnabled: false,
  browserName: '',
  platform: 'MAC',
  javascriptEnabled: true,
  databaseEnabled: false,
  takesScreenshot: true,
  networkConnectionEnabled: false
};
const SAFARI_BUNDLE_ID = 'com.apple.mobilesafari';
const WDA_SIM_STARTUP_RETRIES = 2;
const WDA_REAL_DEV_STARTUP_RETRIES = 1;
const WDA_REAL_DEV_TUTORIAL_URL = 'https://github.com/appium/appium-xcuitest-driver/blob/master/docs/real-device-config.md';
const WDA_STARTUP_RETRY_INTERVAL = 10000;
const DEFAULT_SETTINGS = {
  nativeWebTap: false,
  nativeWebTapStrict: false,
  useJSONSource: false,
  shouldUseCompactResponses: true,
  elementResponseAttributes: 'type,label',
  mjpegServerScreenshotQuality: 25,
  mjpegServerFramerate: 10,
  screenshotQuality: 1,
  mjpegScalingFactor: 100,
  reduceMotion: null
};
const SHARED_RESOURCES_GUARD = new _asyncLock.default();
const WEB_ELEMENTS_CACHE_SIZE = 500;
const NO_PROXY_NATIVE_LIST = [['DELETE', /window/], ['GET', /^\/session\/[^\/]+$/], ['GET', /alert_text/], ['GET', /alert\/[^\/]+/], ['GET', /appium/], ['GET', /attribute/], ['GET', /context/], ['GET', /location/], ['GET', /log/], ['GET', /screenshot/], ['GET', /size/], ['GET', /source/], ['GET', /timeouts$/], ['GET', /url/], ['GET', /window/], ['POST', /accept_alert/], ['POST', /actions$/], ['POST', /alert_text/], ['POST', /alert\/[^\/]+/], ['POST', /appium/], ['POST', /appium\/device\/is_locked/], ['POST', /appium\/device\/lock/], ['POST', /appium\/device\/unlock/], ['POST', /back/], ['POST', /clear/], ['POST', /context/], ['POST', /dismiss_alert/], ['POST', /element\/active/], ['POST', /element$/], ['POST', /elements$/], ['POST', /execute/], ['POST', /keys/], ['POST', /log/], ['POST', /moveto/], ['POST', /receive_async_response/], ['POST', /session\/[^\/]+\/location/], ['POST', /shake/], ['POST', /timeouts/], ['POST', /touch/], ['POST', /url/], ['POST', /value/], ['POST', /window/], ['DELETE', /cookie/], ['GET', /cookie/], ['POST', /cookie/]];
const NO_PROXY_WEB_LIST = [['GET', /attribute/], ['GET', /element/], ['GET', /text/], ['GET', /title/], ['POST', /clear/], ['POST', /click/], ['POST', /element/], ['POST', /forward/], ['POST', /frame/], ['POST', /keys/], ['POST', /refresh/]].concat(NO_PROXY_NATIVE_LIST);
const MEMOIZED_FUNCTIONS = ['getStatusBarHeight', 'getDevicePixelRatio', 'getScreenInfo'];

class XCUITestDriver extends _baseDriver.BaseDriver {
  constructor(opts = {}, shouldValidateCaps = true) {
    super(opts, shouldValidateCaps);
    this.desiredCapConstraints = _desiredCaps.desiredCapConstraints;
    this.locatorStrategies = ['xpath', 'id', 'name', 'class name', '-ios predicate string', '-ios class chain', 'accessibility id', 'css selector'];
    this.webLocatorStrategies = ['link text', 'css selector', 'tag name', 'link text', 'partial link text'];
    this.resetIos();
    this.settings = new _baseDriver.DeviceSettings(DEFAULT_SETTINGS, this.onSettingsUpdate.bind(this));
    this.logs = {};

    for (const fn of MEMOIZED_FUNCTIONS) {
      this[fn] = _lodash.default.memoize(this[fn]);
    }
  }

  async onSettingsUpdate(key, value) {
    if (key !== 'nativeWebTap' && key !== 'nativeWebTapStrict') {
      return await this.proxyCommand('/appium/settings', 'POST', {
        settings: {
          [key]: value
        }
      });
    }

    this.opts[key] = !!value;
  }

  resetIos() {
    this.opts = this.opts || {};
    this.wda = null;
    this.opts.device = null;
    this.jwpProxyActive = false;
    this.proxyReqRes = null;
    this.jwpProxyAvoid = [];
    this.safari = false;
    this.cachedWdaStatus = null;
    this.curWebFrames = [];
    this._currentUrl = null;
    this.curContext = null;
    this.xcodeVersion = {};
    this.contexts = [];
    this.implicitWaitMs = 0;
    this.asynclibWaitMs = 0;
    this.pageLoadMs = 6000;
    this.landscapeWebCoordsOffset = 0;
    this.remote = null;
    this.webElementsCache = new _lruCache.default({
      max: WEB_ELEMENTS_CACHE_SIZE
    });
  }

  get driverData() {
    return {};
  }

  async getStatus() {
    if (typeof this.driverInfo === 'undefined') {
      this.driverInfo = await (0, _utils.getDriverInfo)();
    }

    let status = {
      build: {
        version: this.driverInfo.version
      }
    };

    if (this.cachedWdaStatus) {
      status.wda = this.cachedWdaStatus;
    }

    return status;
  }

  mergeCliArgsToOpts() {
    let didMerge = false;

    for (const [key, value] of Object.entries((_this$cliArgs = this.cliArgs) !== null && _this$cliArgs !== void 0 ? _this$cliArgs : {})) {
      var _this$cliArgs;

      if (_lodash.default.has(this.opts, key)) {
        this.log.info(`CLI arg '${key}' with value '${value}' overwrites value '${this.opts[key]}' sent in via caps)`);
        didMerge = true;
      }

      this.opts[key] = value;
    }

    return didMerge;
  }

  async createSession(...args) {
    this.lifecycleData = {};

    try {
      let [sessionId, caps] = await super.createSession(...args);
      this.opts.sessionId = sessionId;

      if (this.mergeCliArgsToOpts()) {
        this.validateDesiredCaps({ ...caps,
          ...this.cliArgs
        });
      }

      await this.start();
      caps = Object.assign({}, defaultServerCaps, caps);
      caps.udid = this.opts.udid;

      if (_lodash.default.has(this.opts, 'nativeWebTap')) {
        await this.updateSettings({
          nativeWebTap: this.opts.nativeWebTap
        });
      }

      if (_lodash.default.has(this.opts, 'nativeWebTapStrict')) {
        await this.updateSettings({
          nativeWebTapStrict: this.opts.nativeWebTapStrict
        });
      }

      if (_lodash.default.has(this.opts, 'useJSONSource')) {
        await this.updateSettings({
          useJSONSource: this.opts.useJSONSource
        });
      }

      let wdaSettings = {
        elementResponseAttributes: DEFAULT_SETTINGS.elementResponseAttributes,
        shouldUseCompactResponses: DEFAULT_SETTINGS.shouldUseCompactResponses
      };

      if (_lodash.default.has(this.opts, 'elementResponseAttributes')) {
        wdaSettings.elementResponseAttributes = this.opts.elementResponseAttributes;
      }

      if (_lodash.default.has(this.opts, 'shouldUseCompactResponses')) {
        wdaSettings.shouldUseCompactResponses = this.opts.shouldUseCompactResponses;
      }

      if (_lodash.default.has(this.opts, 'mjpegServerScreenshotQuality')) {
        wdaSettings.mjpegServerScreenshotQuality = this.opts.mjpegServerScreenshotQuality;
      }

      if (_lodash.default.has(this.opts, 'mjpegServerFramerate')) {
        wdaSettings.mjpegServerFramerate = this.opts.mjpegServerFramerate;
      }

      if (_lodash.default.has(this.opts, 'screenshotQuality')) {
        this.log.info(`Setting the quality of phone screenshot: '${this.opts.screenshotQuality}'`);
        wdaSettings.screenshotQuality = this.opts.screenshotQuality;
      }

      await this.updateSettings(wdaSettings);

      if (this.opts.mjpegScreenshotUrl) {
        this.log.info(`Starting MJPEG stream reading URL: '${this.opts.mjpegScreenshotUrl}'`);
        this.mjpegStream = new _support.mjpeg.MJpegStream(this.opts.mjpegScreenshotUrl);
        await this.mjpegStream.start();
      }

      return [sessionId, caps];
    } catch (e) {
      this.log.error(JSON.stringify(e));
      await this.deleteSession();
      throw e;
    }
  }

  getDefaultUrl() {
    return this.isRealDevice() ? `http://127.0.0.1:${this.opts.wdaLocalPort || 8100}/health` : `http://${this.opts.address.includes(':') ? `[${this.opts.address}]` : this.opts.address}:${this.opts.port}/welcome`;
  }

  doesSafariSupportUrlArgument() {
    return _support.util.compareVersions(this.opts.platformVersion, '<', '12.2');
  }

  async start() {
    this.opts.noReset = !!this.opts.noReset;
    this.opts.fullReset = !!this.opts.fullReset;
    await (0, _utils.printUser)();
    this.opts.iosSdkVersion = null;
    const {
      device,
      udid,
      realDevice
    } = await this.determineDevice();
    this.log.info(`Determining device to run tests on: udid: '${udid}', real device: ${realDevice}`);
    this.opts.device = device;
    this.opts.udid = udid;
    this.opts.realDevice = realDevice;

    if (this.opts.simulatorDevicesSetPath) {
      if (realDevice) {
        this.log.info(`The 'simulatorDevicesSetPath' capability is only supported for Simulator devices`);
      } else {
        this.log.info(`Setting simulator devices set path to '${this.opts.simulatorDevicesSetPath}'`);
        this.opts.device.devicesSetPath = this.opts.simulatorDevicesSetPath;
      }
    }

    if (!this.opts.platformVersion && this.opts.device) {
      this.opts.platformVersion = await this.opts.device.getPlatformVersion();
      this.log.info(`No platformVersion specified. Using device version: '${this.opts.platformVersion}'`);
    }

    const normalizedVersion = (0, _utils.normalizePlatformVersion)(this.opts.platformVersion);

    if (this.opts.platformVersion !== normalizedVersion) {
      this.log.info(`Normalized platformVersion capability value '${this.opts.platformVersion}' to '${normalizedVersion}'`);
      this.opts.platformVersion = normalizedVersion;
    }

    if (_support.util.compareVersions(this.opts.platformVersion, '<', '9.3')) {
      throw new Error(`Platform version must be 9.3 or above. '${this.opts.platformVersion}' is not supported.`);
    }

    if (_lodash.default.isEmpty(this.xcodeVersion) && (!this.opts.webDriverAgentUrl || !this.opts.realDevice)) {
      this.xcodeVersion = await (0, _utils.getAndCheckXcodeVersion)();
    }

    this.logEvent('xcodeDetailsRetrieved');

    if (_lodash.default.toLower(this.opts.browserName) === 'safari') {
      this.log.info('Safari test requested');
      this.safari = true;
      this.opts.app = undefined;
      this.opts.processArguments = this.opts.processArguments || {};
      this.opts.bundleId = SAFARI_BUNDLE_ID;
      this._currentUrl = this.opts.safariInitialUrl || this.getDefaultUrl();

      if (this.doesSafariSupportUrlArgument()) {
        this.opts.processArguments.args = ['-u', this._currentUrl];
      }
    } else if (this.opts.app || this.opts.bundleId) {
      await this.configureApp();
    }

    this.logEvent('appConfigured');

    if (this.opts.app) {
      await (0, _utils.checkAppPresent)(this.opts.app);

      if (!this.opts.bundleId) {
        this.opts.bundleId = await (0, _appUtils.extractBundleId)(this.opts.app);
      }
    }

    await this.runReset();
    this.wda = new _appiumWebdriveragent.WebDriverAgent(this.xcodeVersion, this.opts, this.log);
    this.wda.retrieveDerivedDataPath().catch(e => this.log.debug(e));

    const memoizedLogInfo = _lodash.default.memoize(() => {
      this.log.info("'skipLogCapture' is set. Skipping starting logs such as crash, system, safari console and safari network.");
    });

    const startLogCapture = async () => {
      if (this.opts.skipLogCapture) {
        memoizedLogInfo();
        return false;
      }

      const result = await this.startLogCapture();

      if (result) {
        this.logEvent('logCaptureStarted');
      }

      return result;
    };

    const isLogCaptureStarted = await startLogCapture();
    this.log.info(`Setting up ${this.isRealDevice() ? 'real device' : 'simulator'}`);

    if (this.isSimulator()) {
      if (this.opts.shutdownOtherSimulators) {
        this.ensureFeatureEnabled(SHUTDOWN_OTHER_FEAT_NAME);
        await (0, _simulatorManagement.shutdownOtherSimulators)(this.opts.device);
      }

      if (this.isSafari() && this.opts.safariGlobalPreferences) {
        if (await this.opts.device.updateSafariGlobalSettings(this.opts.safariGlobalPreferences)) {
          this.log.debug(`Safari global preferences updated`);
        }
      }

      this.localConfig = await (0, _simulatorManagement.setLocaleAndPreferences)(this.opts.device, this.opts, this.isSafari(), async sim => {
        await (0, _simulatorManagement.shutdownSimulator)(sim);
        await (0, _simulatorManagement.setLocaleAndPreferences)(sim, this.opts, this.isSafari());
      });

      if (this.opts.customSSLCert && !(await (0, _certUtils.doesSupportKeychainApi)(this.opts.device))) {
        const certHead = _lodash.default.truncate(this.opts.customSSLCert, {
          length: 20
        });

        this.log.info(`Installing the custom SSL certificate '${certHead}'`);

        if (await (0, _certUtils.hasCertificateLegacy)(this.opts.device, this.opts.customSSLCert)) {
          this.log.info(`SSL certificate '${certHead}' already installed`);
        } else {
          this.log.info(`Making sure Simulator is shut down, ' +
            'so that SSL certificate installation takes effect`);
          await (0, _simulatorManagement.shutdownSimulator)(this.opts.device);
          await (0, _certUtils.installCertificateLegacy)(this.opts.device, this.opts.customSSLCert);
        }

        this.logEvent('customCertInstalled');
      }

      await this.startSim();

      if (this.opts.customSSLCert && (await (0, _certUtils.doesSupportKeychainApi)(this.opts.device))) {
        await (0, _certUtils.installCertificate)(this.opts.device, this.opts.customSSLCert);
        this.logEvent('customCertInstalled');
      }

      if (this.opts.launchWithIDB && this.isSimulator()) {
        try {
          const idb = new _appiumIdb.default({
            udid
          });
          await idb.connect();
          this.opts.device.idb = idb;
        } catch (e) {
          this.log.info(`idb will not be used for Simulator interaction. Original error: ${e.message}`);
        }
      }

      this.logEvent('simStarted');

      if (!isLogCaptureStarted) {
        await startLogCapture();
      }
    } else if (this.opts.customSSLCert) {
      await new _pyIosDeviceClient.default(udid).installProfile({
        payload: this.opts.customSSLCert
      });
    }

    if (this.opts.app) {
      await this.installAUT();
      this.logEvent('appInstalled');
    }

    if (!this.opts.app && this.opts.bundleId && !this.isSafari()) {
      if (!(await this.opts.device.isAppInstalled(this.opts.bundleId))) {
        this.log.errorAndThrow(`App with bundle identifier '${this.opts.bundleId}' unknown`);
      }
    }

    if (this.opts.permissions) {
      if (this.isSimulator()) {
        this.log.debug('Setting the requested permissions before WDA is started');

        for (const [bundleId, permissionsMapping] of _lodash.default.toPairs(JSON.parse(this.opts.permissions))) {
          await this.opts.device.setPermissions(bundleId, permissionsMapping);
        }
      } else {
        this.log.warn('Setting permissions is only supported on Simulator. ' + 'The "permissions" capability will be ignored.');
      }
    }

    if (this.isSimulator()) {
      if (this.opts.calendarAccessAuthorized) {
        await this.opts.device.enableCalendarAccess(this.opts.bundleId);
      } else if (this.opts.calendarAccessAuthorized === false) {
        await this.opts.device.disableCalendarAccess(this.opts.bundleId);
      }
    }

    await this.startWda(this.opts.sessionId, realDevice);
    await this.setReduceMotion(this.opts.reduceMotion);
    await this.setInitialOrientation(this.opts.orientation);
    this.logEvent('orientationSet');

    if (this.isSafari() || this.opts.autoWebview) {
      await this.activateRecentWebview();
    }

    if (this.isSafari()) {
      this.log.info(`About to set the initial Safari URL to '${this.getCurrentUrl()}'.` + `Use 'safariInitialUrl' capability in order to customize it`);
      await this.setUrl(this.getCurrentUrl());
    }
  }

  async startWda(sessionId, realDevice) {
    if (!_support.util.hasValue(this.wda.webDriverAgentUrl)) {
      await this.wda.cleanupObsoleteProcesses();
    }

    const usePortForwarding = this.isRealDevice() && !this.wda.webDriverAgentUrl && (0, _utils.isLocalHost)(this.wda.wdaBaseUrl);
    await _deviceConnectionsFactory.default.requestConnection(this.opts.udid, this.wda.url.port, {
      devicePort: usePortForwarding ? this.wda.wdaRemotePort : null,
      usePortForwarding
    });
    let synchronizationKey = XCUITestDriver.name;

    if (this.opts.useXctestrunFile || !(await this.wda.isSourceFresh())) {
      const derivedDataPath = await this.wda.retrieveDerivedDataPath();

      if (derivedDataPath) {
        synchronizationKey = _path.default.normalize(derivedDataPath);
      }
    }

    this.log.debug(`Starting WebDriverAgent initialization with the synchronization key '${synchronizationKey}'`);

    if (SHARED_RESOURCES_GUARD.isBusy() && !this.opts.derivedDataPath && !this.opts.bootstrapPath) {
      this.log.debug(`Consider setting a unique 'derivedDataPath' capability value for each parallel driver instance ` + `to avoid conflicts and speed up the building process`);
    }

    return await SHARED_RESOURCES_GUARD.acquire(synchronizationKey, async () => {
      if (this.opts.useNewWDA) {
        this.log.debug(`Capability 'useNewWDA' set to true, so uninstalling WDA before proceeding`);
        await this.wda.quitAndUninstall();
        this.logEvent('wdaUninstalled');
      } else if (!_support.util.hasValue(this.wda.webDriverAgentUrl)) {
        await this.wda.setupCaching();
      }

      const quitAndUninstall = async msg => {
        this.log.debug(msg);

        if (this.opts.webDriverAgentUrl) {
          this.log.debug('Not quitting/uninstalling WebDriverAgent since webDriverAgentUrl capability is provided');
          throw new Error(msg);
        }

        this.log.warn('Quitting and uninstalling WebDriverAgent');
        await this.wda.quitAndUninstall();
        throw new Error(msg);
      };

      if (this.opts.resultBundlePath) {
        this.ensureFeatureEnabled(CUSTOMIZE_RESULT_BUNDPE_PATH);
      }

      const startupRetries = this.opts.wdaStartupRetries || (this.isRealDevice() ? WDA_REAL_DEV_STARTUP_RETRIES : WDA_SIM_STARTUP_RETRIES);
      const startupRetryInterval = this.opts.wdaStartupRetryInterval || WDA_STARTUP_RETRY_INTERVAL;
      this.log.debug(`Trying to start WebDriverAgent ${startupRetries} times with ${startupRetryInterval}ms interval`);

      if (!_support.util.hasValue(this.opts.wdaStartupRetries) && !_support.util.hasValue(this.opts.wdaStartupRetryInterval)) {
        this.log.debug(`These values can be customized by changing wdaStartupRetries/wdaStartupRetryInterval capabilities`);
      }

      let retryCount = 0;
      await (0, _asyncbox.retryInterval)(startupRetries, startupRetryInterval, async () => {
        this.logEvent('wdaStartAttempted');

        if (retryCount > 0) {
          this.log.info(`Retrying WDA startup (${retryCount + 1} of ${startupRetries})`);
        }

        try {
          const retries = this.xcodeVersion.major >= 10 ? 2 : 1;
          this.cachedWdaStatus = await (0, _asyncbox.retry)(retries, this.wda.launch.bind(this.wda), sessionId, realDevice);
        } catch (err) {
          this.logEvent('wdaStartFailed');
          retryCount++;
          let errorMsg = `Unable to launch WebDriverAgent because of xcodebuild failure: ${err.message}`;

          if (this.isRealDevice()) {
            errorMsg += `. Make sure you follow the tutorial at ${WDA_REAL_DEV_TUTORIAL_URL}. ` + `Try to remove the WebDriverAgentRunner application from the device if it is installed ` + `and reboot the device.`;
          }

          await quitAndUninstall(errorMsg);
        }

        this.proxyReqRes = this.wda.proxyReqRes.bind(this.wda);
        this.jwpProxyActive = true;
        let originalStacktrace = null;

        try {
          await (0, _asyncbox.retryInterval)(15, 1000, async () => {
            this.logEvent('wdaSessionAttempted');
            this.log.debug('Sending createSession command to WDA');

            try {
              this.cachedWdaStatus = this.cachedWdaStatus || (await this.proxyCommand('/status', 'GET'));
              await this.startWdaSession(this.opts.bundleId, this.opts.processArguments);
            } catch (err) {
              originalStacktrace = err.stack;
              this.log.debug(`Failed to create WDA session (${err.message}). Retrying...`);
              throw err;
            }
          });
          this.logEvent('wdaSessionStarted');
        } catch (err) {
          if (originalStacktrace) {
            this.log.debug(originalStacktrace);
          }

          let errorMsg = `Unable to start WebDriverAgent session because of xcodebuild failure: ${err.message}`;

          if (this.isRealDevice()) {
            errorMsg += ` Make sure you follow the tutorial at ${WDA_REAL_DEV_TUTORIAL_URL}. ` + `Try to remove the WebDriverAgentRunner application from the device if it is installed ` + `and reboot the device.`;
          }

          await quitAndUninstall(errorMsg);
        }

        if (this.opts.clearSystemFiles && !this.opts.webDriverAgentUrl) {
          await (0, _utils.markSystemFilesForCleanup)(this.wda);
        }

        this.wda.fullyStarted = true;
        this.logEvent('wdaStarted');
      });
    });
  }

  async runReset(opts = null) {
    this.logEvent('resetStarted');

    if (this.isRealDevice()) {
      await (0, _realDeviceManagement.runRealDeviceReset)(this.opts.device, opts || this.opts);
    } else {
      await (0, _simulatorManagement.runSimulatorReset)(this.opts.device, opts || this.opts);
    }

    this.logEvent('resetComplete');
  }

  async deleteSession() {
    await (0, _utils.removeAllSessionWebSocketHandlers)(this.server, this.sessionId);

    for (const recorder of _lodash.default.compact([this._recentScreenRecorder, this._audioRecorder, this._trafficCapture])) {
      await recorder.interrupt(true);
      await recorder.cleanup();
    }

    if (!_lodash.default.isEmpty(this._perfRecorders)) {
      await _bluebird.default.all(this._perfRecorders.map(x => x.stop(true)));
      this._perfRecorders = [];
    }

    await this.stop();

    if (this.wda && !this.opts.webDriverAgentUrl) {
      if (this.opts.clearSystemFiles) {
        let synchronizationKey = XCUITestDriver.name;
        const derivedDataPath = await this.wda.retrieveDerivedDataPath();

        if (derivedDataPath) {
          synchronizationKey = _path.default.normalize(derivedDataPath);
        }

        await SHARED_RESOURCES_GUARD.acquire(synchronizationKey, async () => {
          await (0, _utils.clearSystemFiles)(this.wda);
        });
      } else {
        this.log.debug('Not clearing log files. Use `clearSystemFiles` capability to turn on.');
      }
    }

    if (this.remote) {
      this.log.debug('Found a remote debugger session. Removing...');
      await this.stopRemote();
    }

    if (this.opts.resetOnSessionStartOnly === false) {
      await this.runReset(Object.assign({}, this.opts, {
        enforceSimulatorShutdown: true
      }));
    }

    if (this.isSimulator() && !this.opts.noReset && !!this.opts.device) {
      if (this.lifecycleData.createSim) {
        this.log.debug(`Deleting simulator created for this run (udid: '${this.opts.udid}')`);
        await (0, _simulatorManagement.shutdownSimulator)(this.opts.device);
        await this.opts.device.delete();
      }
    }

    const shouldResetLocationServivce = this.isRealDevice() && !!this.opts.resetLocationService;

    if (shouldResetLocationServivce) {
      try {
        await this.mobileResetLocationService();
      } catch (ignore) {}
    }

    if (!_lodash.default.isEmpty(this.logs)) {
      await this.logs.syslog.stopCapture();
      this.logs = {};
    }

    if (this.mjpegStream) {
      this.log.info('Closing MJPEG stream');
      this.mjpegStream.stop();
    }

    this.resetIos();
    await super.deleteSession();
  }

  async stop() {
    this.jwpProxyActive = false;
    this.proxyReqRes = null;

    if (this.wda && this.wda.fullyStarted) {
      if (this.wda.jwproxy) {
        try {
          await this.proxyCommand(`/session/${this.sessionId}`, 'DELETE');
        } catch (err) {
          this.log.debug(`Unable to DELETE session on WDA: '${err.message}'. Continuing shutdown.`);
        }
      }

      if (!this.wda.webDriverAgentUrl && this.opts.useNewWDA) {
        await this.wda.quit();
      }
    }

    _deviceConnectionsFactory.default.releaseConnection(this.opts.udid);
  }

  async executeCommand(cmd, ...args) {
    this.log.debug(`Executing command '${cmd}'`);

    if (cmd === 'receiveAsyncResponse') {
      return await this.receiveAsyncResponse(...args);
    }

    if (cmd === 'getStatus') {
      return await this.getStatus();
    }

    return await super.executeCommand(cmd, ...args);
  }

  async configureApp() {
    function appIsPackageOrBundle(app) {
      return /^([a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+)+$/.test(app);
    }

    if (!this.opts.bundleId && appIsPackageOrBundle(this.opts.app)) {
      this.opts.bundleId = this.opts.app;
      this.opts.app = '';
    }

    if (this.opts.bundleId && appIsPackageOrBundle(this.opts.bundleId) && (this.opts.app === '' || appIsPackageOrBundle(this.opts.app))) {
      this.log.debug('App is an iOS bundle, will attempt to run as pre-existing');
      return;
    }

    switch (_lodash.default.toLower(this.opts.app)) {
      case 'settings':
        this.opts.bundleId = 'com.apple.Preferences';
        this.opts.app = null;
        return;

      case 'calendar':
        this.opts.bundleId = 'com.apple.mobilecal';
        this.opts.app = null;
        return;
    }

    try {
      this.opts.app = await this.helpers.configureApp(this.opts.app, '.app');
    } catch (err) {
      this.log.error(err);
      throw new Error(`Bad app: ${this.opts.app}. ` + `App paths need to be absolute or an URL to a compressed app file: ${err.message}`);
    }
  }

  async determineDevice() {
    this.lifecycleData.createSim = false;
    this.opts.deviceName = (0, _utils.translateDeviceName)(this.opts.platformVersion, this.opts.deviceName);

    const setupVersionCaps = async () => {
      this.opts.iosSdkVersion = await (0, _utils.getAndCheckIosSdkVersion)();
      this.log.info(`iOS SDK Version set to '${this.opts.iosSdkVersion}'`);

      if (!this.opts.platformVersion && this.opts.iosSdkVersion) {
        this.log.info(`No platformVersion specified. Using the latest version Xcode supports: '${this.opts.iosSdkVersion}'. ` + `This may cause problems if a simulator does not exist for this platform version.`);
        this.opts.platformVersion = (0, _utils.normalizePlatformVersion)(this.opts.iosSdkVersion);
      }
    };

    if (this.opts.udid) {
      if (this.opts.udid.toLowerCase() === 'auto') {
        try {
          this.opts.udid = await (0, _utils.detectUdid)();
        } catch (err) {
          this.log.warn(`Cannot detect any connected real devices. Falling back to Simulator. Original error: ${err.message}`);
          const device = await (0, _simulatorManagement.getExistingSim)(this.opts);

          if (!device) {
            this.log.errorAndThrow(`Cannot detect udid for ${this.opts.deviceName} Simulator running iOS ${this.opts.platformVersion}`);
          }

          this.opts.udid = device.udid;
          const devicePlatform = (0, _utils.normalizePlatformVersion)(await device.getPlatformVersion());

          if (this.opts.platformVersion !== devicePlatform) {
            this.opts.platformVersion = devicePlatform;
            this.log.info(`Set platformVersion to '${devicePlatform}' to match the device with given UDID`);
          }

          await setupVersionCaps();
          return {
            device,
            realDevice: false,
            udid: device.udid
          };
        }
      } else {
        const devices = await (0, _realDeviceManagement.getConnectedDevices)();
        this.log.debug(`Available devices: ${devices.join(', ')}`);

        if (!devices.includes(this.opts.udid)) {
          this.log.debug(`No real device with udid '${this.opts.udid}'. Looking for simulator`);

          try {
            const device = await (0, _appiumIosSimulator.getSimulator)(this.opts.udid, {
              devicesSetPath: this.opts.simulatorDevicesSetPath
            });
            return {
              device,
              realDevice: false,
              udid: this.opts.udid
            };
          } catch (ign) {
            throw new Error(`Unknown device or simulator UDID: '${this.opts.udid}'`);
          }
        }
      }

      const device = await (0, _realDeviceManagement.getRealDeviceObj)(this.opts.udid);
      return {
        device,
        realDevice: true,
        udid: this.opts.udid
      };
    }

    await setupVersionCaps();

    if (this.opts.enforceFreshSimulatorCreation) {
      this.log.debug(`New simulator is requested. If this is not wanted, set 'enforceFreshSimulatorCreation' capability to false`);
    } else {
      const device = await (0, _simulatorManagement.getExistingSim)(this.opts);

      if (device) {
        return {
          device,
          realDevice: false,
          udid: device.udid
        };
      }

      this.log.info('Simulator udid not provided');
    }

    this.log.info('Using desired caps to create a new simulator');
    const device = await this.createSim();
    return {
      device,
      realDevice: false,
      udid: device.udid
    };
  }

  async startSim() {
    var _this$opts$simulatorP;

    const runOpts = {
      scaleFactor: this.opts.scaleFactor,
      connectHardwareKeyboard: !!this.opts.connectHardwareKeyboard,
      pasteboardAutomaticSync: (_this$opts$simulatorP = this.opts.simulatorPasteboardAutomaticSync) !== null && _this$opts$simulatorP !== void 0 ? _this$opts$simulatorP : 'off',
      isHeadless: !!this.opts.isHeadless,
      tracePointer: this.opts.simulatorTracePointer,
      devicePreferences: {}
    };

    if (this.opts.SimulatorWindowCenter) {
      runOpts.devicePreferences.SimulatorWindowCenter = this.opts.SimulatorWindowCenter;
    }

    if (_lodash.default.isInteger(this.opts.simulatorStartupTimeout)) {
      runOpts.startupTimeout = this.opts.simulatorStartupTimeout;
    }

    const orientation = _lodash.default.isString(this.opts.orientation) && this.opts.orientation.toUpperCase();

    switch (orientation) {
      case 'LANDSCAPE':
        runOpts.devicePreferences.SimulatorWindowOrientation = 'LandscapeLeft';
        runOpts.devicePreferences.SimulatorWindowRotationAngle = 90;
        break;

      case 'PORTRAIT':
        runOpts.devicePreferences.SimulatorWindowOrientation = 'Portrait';
        runOpts.devicePreferences.SimulatorWindowRotationAngle = 0;
        break;
    }

    await this.opts.device.run(runOpts);
  }

  async createSim() {
    this.lifecycleData.createSim = true;
    const platformName = this.isTvOS() ? _desiredCaps.PLATFORM_NAME_TVOS : _desiredCaps.PLATFORM_NAME_IOS;
    const sim = await (0, _simulatorManagement.createSim)(this.opts, platformName);
    this.log.info(`Created simulator with udid '${sim.udid}'.`);
    return sim;
  }

  async launchApp() {
    const APP_LAUNCH_TIMEOUT = 20 * 1000;
    this.logEvent('appLaunchAttempted');
    await this.opts.device.simctl.launchApp(this.opts.bundleId);

    let checkStatus = async () => {
      let response = await this.proxyCommand('/status', 'GET');
      let currentApp = response.currentApp.bundleID;

      if (currentApp !== this.opts.bundleId) {
        throw new Error(`${this.opts.bundleId} not in foreground. ${currentApp} is in foreground`);
      }
    };

    this.log.info(`Waiting for '${this.opts.bundleId}' to be in foreground`);
    let retries = parseInt(APP_LAUNCH_TIMEOUT / 200, 10);
    await (0, _asyncbox.retryInterval)(retries, 200, checkStatus);
    this.log.info(`${this.opts.bundleId} is in foreground`);
    this.logEvent('appLaunched');
  }

  async startWdaSession(bundleId, processArguments) {
    var _this$opts$wdaEventlo, _this$opts$waitForQui, _this$opts$simpleIsVi, _this$opts$maxTypingF, _this$opts$shouldUseS, _this$opts$shouldTerm, _this$opts$forceAppLa, _this$opts$useNativeC, _this$opts$forceSimul;

    const args = processArguments ? processArguments.args || [] : [];

    if (!_lodash.default.isArray(args)) {
      throw new Error(`processArguments.args capability is expected to be an array. ` + `${JSON.stringify(args)} is given instead`);
    }

    const env = processArguments ? processArguments.env || {} : {};

    if (!_lodash.default.isPlainObject(env)) {
      throw new Error(`processArguments.env capability is expected to be a dictionary. ` + `${JSON.stringify(env)} is given instead`);
    }

    if (_support.util.hasValue(this.opts.language)) {
      args.push('-AppleLanguages', `(${this.opts.language})`);
      args.push('-NSLanguages', `(${this.opts.language})`);
    }

    if (_support.util.hasValue(this.opts.locale)) {
      args.push('-AppleLocale', this.opts.locale);
    }

    if (this.opts.noReset) {
      if (_lodash.default.isNil(this.opts.shouldTerminateApp)) {
        this.opts.shouldTerminateApp = false;
      }

      if (_lodash.default.isNil(this.opts.forceAppLaunch)) {
        this.opts.forceAppLaunch = false;
      }
    }

    const wdaCaps = {
      bundleId: this.opts.autoLaunch === false ? undefined : bundleId,
      arguments: args,
      environment: env,
      eventloopIdleDelaySec: (_this$opts$wdaEventlo = this.opts.wdaEventloopIdleDelay) !== null && _this$opts$wdaEventlo !== void 0 ? _this$opts$wdaEventlo : 0,
      shouldWaitForQuiescence: (_this$opts$waitForQui = this.opts.waitForQuiescence) !== null && _this$opts$waitForQui !== void 0 ? _this$opts$waitForQui : true,
      shouldUseTestManagerForVisibilityDetection: (_this$opts$simpleIsVi = this.opts.simpleIsVisibleCheck) !== null && _this$opts$simpleIsVi !== void 0 ? _this$opts$simpleIsVi : false,
      maxTypingFrequency: (_this$opts$maxTypingF = this.opts.maxTypingFrequency) !== null && _this$opts$maxTypingF !== void 0 ? _this$opts$maxTypingF : 60,
      shouldUseSingletonTestManager: (_this$opts$shouldUseS = this.opts.shouldUseSingletonTestManager) !== null && _this$opts$shouldUseS !== void 0 ? _this$opts$shouldUseS : true,
      waitForIdleTimeout: this.opts.waitForIdleTimeout,
      shouldUseCompactResponses: this.opts.shouldUseCompactResponses,
      elementResponseFields: this.opts.elementResponseFields,
      disableAutomaticScreenshots: this.opts.disableAutomaticScreenshots,
      shouldTerminateApp: (_this$opts$shouldTerm = this.opts.shouldTerminateApp) !== null && _this$opts$shouldTerm !== void 0 ? _this$opts$shouldTerm : true,
      forceAppLaunch: (_this$opts$forceAppLa = this.opts.forceAppLaunch) !== null && _this$opts$forceAppLa !== void 0 ? _this$opts$forceAppLa : true,
      useNativeCachingStrategy: (_this$opts$useNativeC = this.opts.useNativeCachingStrategy) !== null && _this$opts$useNativeC !== void 0 ? _this$opts$useNativeC : true,
      forceSimulatorSoftwareKeyboardPresence: (_this$opts$forceSimul = this.opts.forceSimulatorSoftwareKeyboardPresence) !== null && _this$opts$forceSimul !== void 0 ? _this$opts$forceSimul : this.opts.connectHardwareKeyboard === true ? false : true
    };

    if (this.opts.autoAcceptAlerts) {
      wdaCaps.defaultAlertAction = 'accept';
    } else if (this.opts.autoDismissAlerts) {
      wdaCaps.defaultAlertAction = 'dismiss';
    }

    await this.proxyCommand('/session', 'POST', {
      capabilities: {
        firstMatch: [wdaCaps],
        alwaysMatch: {}
      }
    });
  }

  proxyActive() {
    return this.jwpProxyActive;
  }

  getProxyAvoidList() {
    if (this.isWebview()) {
      return NO_PROXY_WEB_LIST;
    }

    return NO_PROXY_NATIVE_LIST;
  }

  canProxy() {
    return true;
  }

  isSafari() {
    return !!this.safari;
  }

  isRealDevice() {
    return this.opts.realDevice;
  }

  isSimulator() {
    return !this.opts.realDevice;
  }

  isTvOS() {
    return _lodash.default.toLower(this.opts.platformName) === _lodash.default.toLower(_desiredCaps.PLATFORM_NAME_TVOS);
  }

  isWebview() {
    return this.isSafari() || this.isWebContext();
  }

  validateLocatorStrategy(strategy) {
    super.validateLocatorStrategy(strategy, this.isWebContext());
  }

  validateDesiredCaps(caps) {
    if (!super.validateDesiredCaps(caps)) {
      return false;
    }

    if (_lodash.default.toLower(caps.browserName) !== 'safari' && !caps.app && !caps.bundleId) {
      this.log.info('The desired capabilities include neither an app nor a bundleId. ' + 'WebDriverAgent will be started without the default app');
    }

    if (!_support.util.coerceVersion(caps.platformVersion, false)) {
      this.log.warn(`'platformVersion' capability ('${caps.platformVersion}') is not a valid version number. ` + `Consider fixing it or be ready to experience an inconsistent driver behavior.`);
    }

    let verifyProcessArgument = processArguments => {
      const {
        args,
        env
      } = processArguments;

      if (!_lodash.default.isNil(args) && !_lodash.default.isArray(args)) {
        this.log.errorAndThrow('processArguments.args must be an array of strings');
      }

      if (!_lodash.default.isNil(env) && !_lodash.default.isPlainObject(env)) {
        this.log.errorAndThrow('processArguments.env must be an object <key,value> pair {a:b, c:d}');
      }
    };

    if (caps.processArguments) {
      if (_lodash.default.isString(caps.processArguments)) {
        try {
          caps.processArguments = JSON.parse(caps.processArguments);
          verifyProcessArgument(caps.processArguments);
        } catch (err) {
          this.log.errorAndThrow(`processArguments must be a JSON format or an object with format {args : [], env : {a:b, c:d}}. ` + `Both environment and argument can be null. Error: ${err}`);
        }
      } else if (_lodash.default.isPlainObject(caps.processArguments)) {
        verifyProcessArgument(caps.processArguments);
      } else {
        this.log.errorAndThrow(`'processArguments must be an object, or a string JSON object with format {args : [], env : {a:b, c:d}}. ` + `Both environment and argument can be null.`);
      }
    }

    if (caps.keychainPath && !caps.keychainPassword || !caps.keychainPath && caps.keychainPassword) {
      this.log.errorAndThrow(`If 'keychainPath' is set, 'keychainPassword' must also be set (and vice versa).`);
    }

    this.opts.resetOnSessionStartOnly = !_support.util.hasValue(this.opts.resetOnSessionStartOnly) || this.opts.resetOnSessionStartOnly;
    this.opts.useNewWDA = _support.util.hasValue(this.opts.useNewWDA) ? this.opts.useNewWDA : false;

    if (caps.commandTimeouts) {
      caps.commandTimeouts = (0, _utils.normalizeCommandTimeouts)(caps.commandTimeouts);
    }

    if (_lodash.default.isString(caps.webDriverAgentUrl)) {
      const {
        protocol,
        host
      } = _url.default.parse(caps.webDriverAgentUrl);

      if (_lodash.default.isEmpty(protocol) || _lodash.default.isEmpty(host)) {
        this.log.errorAndThrow(`'webDriverAgentUrl' capability is expected to contain a valid WebDriverAgent server URL. ` + `'${caps.webDriverAgentUrl}' is given instead`);
      }
    }

    if (caps.browserName) {
      if (caps.bundleId) {
        this.log.errorAndThrow(`'browserName' cannot be set together with 'bundleId' capability`);
      }

      if (caps.app) {
        this.log.warn(`The capabilities should generally not include both an 'app' and a 'browserName'`);
      }
    }

    if (caps.permissions) {
      try {
        for (const [bundleId, perms] of _lodash.default.toPairs(JSON.parse(caps.permissions))) {
          if (!_lodash.default.isString(bundleId)) {
            throw new Error(`'${JSON.stringify(bundleId)}' must be a string`);
          }

          if (!_lodash.default.isPlainObject(perms)) {
            throw new Error(`'${JSON.stringify(perms)}' must be a JSON object`);
          }
        }
      } catch (e) {
        this.log.errorAndThrow(`'${caps.permissions}' is expected to be a valid object with format ` + `{"<bundleId1>": {"<serviceName1>": "<serviceStatus1>", ...}, ...}. Original error: ${e.message}`);
      }
    }

    if (caps.platformVersion && !_support.util.coerceVersion(caps.platformVersion, false)) {
      this.log.errorAndThrow(`'platformVersion' must be a valid version number. ` + `'${caps.platformVersion}' is given instead.`);
    }

    if (caps.additionalWebviewBundleIds) {
      caps.additionalWebviewBundleIds = this.helpers.parseCapsArray(caps.additionalWebviewBundleIds);
    }

    return true;
  }

  async installAUT() {
    if (this.isSafari()) {
      return;
    }

    await (0, _appUtils.verifyApplicationPlatform)(this.opts.app, {
      isSimulator: this.isSimulator(),
      isTvOS: this.isTvOS()
    });

    if (this.isRealDevice()) {
      await (0, _realDeviceManagement.installToRealDevice)(this.opts.device, this.opts.app, this.opts.bundleId, {
        noReset: this.opts.noReset,
        timeout: this.opts.appPushTimeout,
        strategy: this.opts.appInstallStrategy
      });
    } else {
      await (0, _simulatorManagement.installToSimulator)(this.opts.device, this.opts.app, this.opts.bundleId, {
        noReset: this.opts.noReset,
        newSimulator: this.lifecycleData.createSim
      });
    }

    if (this.opts.otherApps) {
      await this.installOtherApps(this.opts.otherApps);
    }

    if (_support.util.hasValue(this.opts.iosInstallPause)) {
      let pause = parseInt(this.opts.iosInstallPause, 10);
      this.log.debug(`iosInstallPause set. Pausing ${pause} ms before continuing`);
      await _bluebird.default.delay(pause);
    }
  }

  async installOtherApps(otherApps) {
    if (this.isRealDevice()) {
      this.log.warn('Capability otherApps is only supported for Simulators');
      return;
    }

    let appsList;

    try {
      appsList = this.helpers.parseCapsArray(otherApps);
    } catch (e) {
      this.log.errorAndThrow(`Could not parse "otherApps" capability: ${e.message}`);
    }

    if (_lodash.default.isEmpty(appsList)) {
      this.log.info(`Got zero apps from 'otherApps' capability value. Doing nothing`);
      return;
    }

    const appPaths = await _bluebird.default.all(appsList.map(app => this.helpers.configureApp(app, '.app')));

    for (const otherApp of appPaths) {
      await (0, _simulatorManagement.installToSimulator)(this.opts.device, otherApp, undefined, {
        noReset: this.opts.noReset,
        newSimulator: this.lifecycleData.createSim
      });
    }
  }

  async setReduceMotion(isEnabled) {
    if (this.isRealDevice() || !_lodash.default.isBoolean(isEnabled)) {
      return;
    }

    this.log.info(`Setting reduceMotion to ${isEnabled}`);
    await this.updateSettings({
      reduceMotion: isEnabled
    });
  }

  async setInitialOrientation(orientation) {
    if (!_lodash.default.isString(orientation)) {
      this.log.info('Skipping setting of the initial display orientation. ' + 'Set the "orientation" capability to either "LANDSCAPE" or "PORTRAIT", if this is an undesired behavior.');
      return;
    }

    orientation = orientation.toUpperCase();

    if (!_lodash.default.includes(['LANDSCAPE', 'PORTRAIT'], orientation)) {
      this.log.debug(`Unable to set initial orientation to '${orientation}'`);
      return;
    }

    this.log.debug(`Setting initial orientation to '${orientation}'`);

    try {
      await this.proxyCommand('/orientation', 'POST', {
        orientation
      });
      this.opts.curOrientation = orientation;
    } catch (err) {
      this.log.warn(`Setting initial orientation failed with: ${err.message}`);
    }
  }

  _getCommandTimeout(cmdName) {
    if (this.opts.commandTimeouts) {
      if (cmdName && _lodash.default.has(this.opts.commandTimeouts, cmdName)) {
        return this.opts.commandTimeouts[cmdName];
      }

      return this.opts.commandTimeouts[_utils.DEFAULT_TIMEOUT_KEY];
    }
  }

  async getSession() {
    const driverSession = await super.getSession();

    if (!this.wdaCaps) {
      this.wdaCaps = await this.proxyCommand('/', 'GET');
    }

    const shouldGetDeviceCaps = _lodash.default.isBoolean(this.opts.includeDeviceCapsToSessionInfo) ? this.opts.includeDeviceCapsToSessionInfo : true;

    if (shouldGetDeviceCaps && !this.deviceCaps) {
      const {
        statusBarSize,
        scale
      } = await this.getScreenInfo();
      this.deviceCaps = {
        pixelRatio: scale,
        statBarHeight: statusBarSize.height,
        viewportRect: await this.getViewportRect()
      };
    }

    this.log.info('Merging WDA caps over Appium caps for session detail response');
    return Object.assign({
      udid: this.opts.udid
    }, driverSession, this.wdaCaps.capabilities, this.deviceCaps || {});
  }

  async reset() {
    if (this.opts.noReset) {
      let opts = _lodash.default.cloneDeep(this.opts);

      opts.noReset = false;
      opts.fullReset = false;
      const shutdownHandler = this.resetOnUnexpectedShutdown;

      this.resetOnUnexpectedShutdown = () => {};

      try {
        await this.runReset(opts);
      } finally {
        this.resetOnUnexpectedShutdown = shutdownHandler;
      }
    }

    await super.reset();
  }

}

exports.XCUITestDriver = XCUITestDriver;
Object.assign(XCUITestDriver.prototype, _index.default);
var _default = XCUITestDriver;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL2RyaXZlci5qcyIsIm5hbWVzIjpbIlNIVVRET1dOX09USEVSX0ZFQVRfTkFNRSIsIkNVU1RPTUlaRV9SRVNVTFRfQlVORFBFX1BBVEgiLCJkZWZhdWx0U2VydmVyQ2FwcyIsIndlYlN0b3JhZ2VFbmFibGVkIiwibG9jYXRpb25Db250ZXh0RW5hYmxlZCIsImJyb3dzZXJOYW1lIiwicGxhdGZvcm0iLCJqYXZhc2NyaXB0RW5hYmxlZCIsImRhdGFiYXNlRW5hYmxlZCIsInRha2VzU2NyZWVuc2hvdCIsIm5ldHdvcmtDb25uZWN0aW9uRW5hYmxlZCIsIlNBRkFSSV9CVU5ETEVfSUQiLCJXREFfU0lNX1NUQVJUVVBfUkVUUklFUyIsIldEQV9SRUFMX0RFVl9TVEFSVFVQX1JFVFJJRVMiLCJXREFfUkVBTF9ERVZfVFVUT1JJQUxfVVJMIiwiV0RBX1NUQVJUVVBfUkVUUllfSU5URVJWQUwiLCJERUZBVUxUX1NFVFRJTkdTIiwibmF0aXZlV2ViVGFwIiwibmF0aXZlV2ViVGFwU3RyaWN0IiwidXNlSlNPTlNvdXJjZSIsInNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXMiLCJlbGVtZW50UmVzcG9uc2VBdHRyaWJ1dGVzIiwibWpwZWdTZXJ2ZXJTY3JlZW5zaG90UXVhbGl0eSIsIm1qcGVnU2VydmVyRnJhbWVyYXRlIiwic2NyZWVuc2hvdFF1YWxpdHkiLCJtanBlZ1NjYWxpbmdGYWN0b3IiLCJyZWR1Y2VNb3Rpb24iLCJTSEFSRURfUkVTT1VSQ0VTX0dVQVJEIiwiQXN5bmNMb2NrIiwiV0VCX0VMRU1FTlRTX0NBQ0hFX1NJWkUiLCJOT19QUk9YWV9OQVRJVkVfTElTVCIsIk5PX1BST1hZX1dFQl9MSVNUIiwiY29uY2F0IiwiTUVNT0laRURfRlVOQ1RJT05TIiwiWENVSVRlc3REcml2ZXIiLCJCYXNlRHJpdmVyIiwiY29uc3RydWN0b3IiLCJvcHRzIiwic2hvdWxkVmFsaWRhdGVDYXBzIiwiZGVzaXJlZENhcENvbnN0cmFpbnRzIiwibG9jYXRvclN0cmF0ZWdpZXMiLCJ3ZWJMb2NhdG9yU3RyYXRlZ2llcyIsInJlc2V0SW9zIiwic2V0dGluZ3MiLCJEZXZpY2VTZXR0aW5ncyIsIm9uU2V0dGluZ3NVcGRhdGUiLCJiaW5kIiwibG9ncyIsImZuIiwiXyIsIm1lbW9pemUiLCJrZXkiLCJ2YWx1ZSIsInByb3h5Q29tbWFuZCIsIndkYSIsImRldmljZSIsImp3cFByb3h5QWN0aXZlIiwicHJveHlSZXFSZXMiLCJqd3BQcm94eUF2b2lkIiwic2FmYXJpIiwiY2FjaGVkV2RhU3RhdHVzIiwiY3VyV2ViRnJhbWVzIiwiX2N1cnJlbnRVcmwiLCJjdXJDb250ZXh0IiwieGNvZGVWZXJzaW9uIiwiY29udGV4dHMiLCJpbXBsaWNpdFdhaXRNcyIsImFzeW5jbGliV2FpdE1zIiwicGFnZUxvYWRNcyIsImxhbmRzY2FwZVdlYkNvb3Jkc09mZnNldCIsInJlbW90ZSIsIndlYkVsZW1lbnRzQ2FjaGUiLCJMUlUiLCJtYXgiLCJkcml2ZXJEYXRhIiwiZ2V0U3RhdHVzIiwiZHJpdmVySW5mbyIsImdldERyaXZlckluZm8iLCJzdGF0dXMiLCJidWlsZCIsInZlcnNpb24iLCJtZXJnZUNsaUFyZ3NUb09wdHMiLCJkaWRNZXJnZSIsIk9iamVjdCIsImVudHJpZXMiLCJjbGlBcmdzIiwiaGFzIiwibG9nIiwiaW5mbyIsImNyZWF0ZVNlc3Npb24iLCJhcmdzIiwibGlmZWN5Y2xlRGF0YSIsInNlc3Npb25JZCIsImNhcHMiLCJ2YWxpZGF0ZURlc2lyZWRDYXBzIiwic3RhcnQiLCJhc3NpZ24iLCJ1ZGlkIiwidXBkYXRlU2V0dGluZ3MiLCJ3ZGFTZXR0aW5ncyIsIm1qcGVnU2NyZWVuc2hvdFVybCIsIm1qcGVnU3RyZWFtIiwibWpwZWciLCJNSnBlZ1N0cmVhbSIsImUiLCJlcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVTZXNzaW9uIiwiZ2V0RGVmYXVsdFVybCIsImlzUmVhbERldmljZSIsIndkYUxvY2FsUG9ydCIsImFkZHJlc3MiLCJpbmNsdWRlcyIsInBvcnQiLCJkb2VzU2FmYXJpU3VwcG9ydFVybEFyZ3VtZW50IiwidXRpbCIsImNvbXBhcmVWZXJzaW9ucyIsInBsYXRmb3JtVmVyc2lvbiIsIm5vUmVzZXQiLCJmdWxsUmVzZXQiLCJwcmludFVzZXIiLCJpb3NTZGtWZXJzaW9uIiwicmVhbERldmljZSIsImRldGVybWluZURldmljZSIsInNpbXVsYXRvckRldmljZXNTZXRQYXRoIiwiZGV2aWNlc1NldFBhdGgiLCJnZXRQbGF0Zm9ybVZlcnNpb24iLCJub3JtYWxpemVkVmVyc2lvbiIsIm5vcm1hbGl6ZVBsYXRmb3JtVmVyc2lvbiIsIkVycm9yIiwiaXNFbXB0eSIsIndlYkRyaXZlckFnZW50VXJsIiwiZ2V0QW5kQ2hlY2tYY29kZVZlcnNpb24iLCJsb2dFdmVudCIsInRvTG93ZXIiLCJhcHAiLCJ1bmRlZmluZWQiLCJwcm9jZXNzQXJndW1lbnRzIiwiYnVuZGxlSWQiLCJzYWZhcmlJbml0aWFsVXJsIiwiY29uZmlndXJlQXBwIiwiY2hlY2tBcHBQcmVzZW50IiwiZXh0cmFjdEJ1bmRsZUlkIiwicnVuUmVzZXQiLCJXZWJEcml2ZXJBZ2VudCIsInJldHJpZXZlRGVyaXZlZERhdGFQYXRoIiwiY2F0Y2giLCJkZWJ1ZyIsIm1lbW9pemVkTG9nSW5mbyIsInN0YXJ0TG9nQ2FwdHVyZSIsInNraXBMb2dDYXB0dXJlIiwicmVzdWx0IiwiaXNMb2dDYXB0dXJlU3RhcnRlZCIsImlzU2ltdWxhdG9yIiwic2h1dGRvd25PdGhlclNpbXVsYXRvcnMiLCJlbnN1cmVGZWF0dXJlRW5hYmxlZCIsImlzU2FmYXJpIiwic2FmYXJpR2xvYmFsUHJlZmVyZW5jZXMiLCJ1cGRhdGVTYWZhcmlHbG9iYWxTZXR0aW5ncyIsImxvY2FsQ29uZmlnIiwic2V0TG9jYWxlQW5kUHJlZmVyZW5jZXMiLCJzaW0iLCJzaHV0ZG93blNpbXVsYXRvciIsImN1c3RvbVNTTENlcnQiLCJkb2VzU3VwcG9ydEtleWNoYWluQXBpIiwiY2VydEhlYWQiLCJ0cnVuY2F0ZSIsImxlbmd0aCIsImhhc0NlcnRpZmljYXRlTGVnYWN5IiwiaW5zdGFsbENlcnRpZmljYXRlTGVnYWN5Iiwic3RhcnRTaW0iLCJpbnN0YWxsQ2VydGlmaWNhdGUiLCJsYXVuY2hXaXRoSURCIiwiaWRiIiwiSURCIiwiY29ubmVjdCIsIm1lc3NhZ2UiLCJQeWlkZXZpY2UiLCJpbnN0YWxsUHJvZmlsZSIsInBheWxvYWQiLCJpbnN0YWxsQVVUIiwiaXNBcHBJbnN0YWxsZWQiLCJlcnJvckFuZFRocm93IiwicGVybWlzc2lvbnMiLCJwZXJtaXNzaW9uc01hcHBpbmciLCJ0b1BhaXJzIiwicGFyc2UiLCJzZXRQZXJtaXNzaW9ucyIsIndhcm4iLCJjYWxlbmRhckFjY2Vzc0F1dGhvcml6ZWQiLCJlbmFibGVDYWxlbmRhckFjY2VzcyIsImRpc2FibGVDYWxlbmRhckFjY2VzcyIsInN0YXJ0V2RhIiwic2V0UmVkdWNlTW90aW9uIiwic2V0SW5pdGlhbE9yaWVudGF0aW9uIiwib3JpZW50YXRpb24iLCJhdXRvV2VidmlldyIsImFjdGl2YXRlUmVjZW50V2VidmlldyIsImdldEN1cnJlbnRVcmwiLCJzZXRVcmwiLCJoYXNWYWx1ZSIsImNsZWFudXBPYnNvbGV0ZVByb2Nlc3NlcyIsInVzZVBvcnRGb3J3YXJkaW5nIiwiaXNMb2NhbEhvc3QiLCJ3ZGFCYXNlVXJsIiwiREVWSUNFX0NPTk5FQ1RJT05TX0ZBQ1RPUlkiLCJyZXF1ZXN0Q29ubmVjdGlvbiIsInVybCIsImRldmljZVBvcnQiLCJ3ZGFSZW1vdGVQb3J0Iiwic3luY2hyb25pemF0aW9uS2V5IiwibmFtZSIsInVzZVhjdGVzdHJ1bkZpbGUiLCJpc1NvdXJjZUZyZXNoIiwiZGVyaXZlZERhdGFQYXRoIiwicGF0aCIsIm5vcm1hbGl6ZSIsImlzQnVzeSIsImJvb3RzdHJhcFBhdGgiLCJhY3F1aXJlIiwidXNlTmV3V0RBIiwicXVpdEFuZFVuaW5zdGFsbCIsInNldHVwQ2FjaGluZyIsIm1zZyIsInJlc3VsdEJ1bmRsZVBhdGgiLCJzdGFydHVwUmV0cmllcyIsIndkYVN0YXJ0dXBSZXRyaWVzIiwic3RhcnR1cFJldHJ5SW50ZXJ2YWwiLCJ3ZGFTdGFydHVwUmV0cnlJbnRlcnZhbCIsInJldHJ5Q291bnQiLCJyZXRyeUludGVydmFsIiwicmV0cmllcyIsIm1ham9yIiwicmV0cnkiLCJsYXVuY2giLCJlcnIiLCJlcnJvck1zZyIsIm9yaWdpbmFsU3RhY2t0cmFjZSIsInN0YXJ0V2RhU2Vzc2lvbiIsInN0YWNrIiwiY2xlYXJTeXN0ZW1GaWxlcyIsIm1hcmtTeXN0ZW1GaWxlc0ZvckNsZWFudXAiLCJmdWxseVN0YXJ0ZWQiLCJydW5SZWFsRGV2aWNlUmVzZXQiLCJydW5TaW11bGF0b3JSZXNldCIsInJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyIsInNlcnZlciIsInJlY29yZGVyIiwiY29tcGFjdCIsIl9yZWNlbnRTY3JlZW5SZWNvcmRlciIsIl9hdWRpb1JlY29yZGVyIiwiX3RyYWZmaWNDYXB0dXJlIiwiaW50ZXJydXB0IiwiY2xlYW51cCIsIl9wZXJmUmVjb3JkZXJzIiwiQiIsImFsbCIsIm1hcCIsIngiLCJzdG9wIiwic3RvcFJlbW90ZSIsInJlc2V0T25TZXNzaW9uU3RhcnRPbmx5IiwiZW5mb3JjZVNpbXVsYXRvclNodXRkb3duIiwiY3JlYXRlU2ltIiwiZGVsZXRlIiwic2hvdWxkUmVzZXRMb2NhdGlvblNlcnZpdmNlIiwicmVzZXRMb2NhdGlvblNlcnZpY2UiLCJtb2JpbGVSZXNldExvY2F0aW9uU2VydmljZSIsImlnbm9yZSIsInN5c2xvZyIsInN0b3BDYXB0dXJlIiwiandwcm94eSIsInF1aXQiLCJyZWxlYXNlQ29ubmVjdGlvbiIsImV4ZWN1dGVDb21tYW5kIiwiY21kIiwicmVjZWl2ZUFzeW5jUmVzcG9uc2UiLCJhcHBJc1BhY2thZ2VPckJ1bmRsZSIsInRlc3QiLCJoZWxwZXJzIiwiZGV2aWNlTmFtZSIsInRyYW5zbGF0ZURldmljZU5hbWUiLCJzZXR1cFZlcnNpb25DYXBzIiwiZ2V0QW5kQ2hlY2tJb3NTZGtWZXJzaW9uIiwidG9Mb3dlckNhc2UiLCJkZXRlY3RVZGlkIiwiZ2V0RXhpc3RpbmdTaW0iLCJkZXZpY2VQbGF0Zm9ybSIsImRldmljZXMiLCJnZXRDb25uZWN0ZWREZXZpY2VzIiwiam9pbiIsImdldFNpbXVsYXRvciIsImlnbiIsImdldFJlYWxEZXZpY2VPYmoiLCJlbmZvcmNlRnJlc2hTaW11bGF0b3JDcmVhdGlvbiIsInJ1bk9wdHMiLCJzY2FsZUZhY3RvciIsImNvbm5lY3RIYXJkd2FyZUtleWJvYXJkIiwicGFzdGVib2FyZEF1dG9tYXRpY1N5bmMiLCJzaW11bGF0b3JQYXN0ZWJvYXJkQXV0b21hdGljU3luYyIsImlzSGVhZGxlc3MiLCJ0cmFjZVBvaW50ZXIiLCJzaW11bGF0b3JUcmFjZVBvaW50ZXIiLCJkZXZpY2VQcmVmZXJlbmNlcyIsIlNpbXVsYXRvcldpbmRvd0NlbnRlciIsImlzSW50ZWdlciIsInNpbXVsYXRvclN0YXJ0dXBUaW1lb3V0Iiwic3RhcnR1cFRpbWVvdXQiLCJpc1N0cmluZyIsInRvVXBwZXJDYXNlIiwiU2ltdWxhdG9yV2luZG93T3JpZW50YXRpb24iLCJTaW11bGF0b3JXaW5kb3dSb3RhdGlvbkFuZ2xlIiwicnVuIiwicGxhdGZvcm1OYW1lIiwiaXNUdk9TIiwiUExBVEZPUk1fTkFNRV9UVk9TIiwiUExBVEZPUk1fTkFNRV9JT1MiLCJsYXVuY2hBcHAiLCJBUFBfTEFVTkNIX1RJTUVPVVQiLCJzaW1jdGwiLCJjaGVja1N0YXR1cyIsInJlc3BvbnNlIiwiY3VycmVudEFwcCIsImJ1bmRsZUlEIiwicGFyc2VJbnQiLCJpc0FycmF5IiwiZW52IiwiaXNQbGFpbk9iamVjdCIsImxhbmd1YWdlIiwicHVzaCIsImxvY2FsZSIsImlzTmlsIiwic2hvdWxkVGVybWluYXRlQXBwIiwiZm9yY2VBcHBMYXVuY2giLCJ3ZGFDYXBzIiwiYXV0b0xhdW5jaCIsImFyZ3VtZW50cyIsImVudmlyb25tZW50IiwiZXZlbnRsb29wSWRsZURlbGF5U2VjIiwid2RhRXZlbnRsb29wSWRsZURlbGF5Iiwic2hvdWxkV2FpdEZvclF1aWVzY2VuY2UiLCJ3YWl0Rm9yUXVpZXNjZW5jZSIsInNob3VsZFVzZVRlc3RNYW5hZ2VyRm9yVmlzaWJpbGl0eURldGVjdGlvbiIsInNpbXBsZUlzVmlzaWJsZUNoZWNrIiwibWF4VHlwaW5nRnJlcXVlbmN5Iiwic2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIiLCJ3YWl0Rm9ySWRsZVRpbWVvdXQiLCJlbGVtZW50UmVzcG9uc2VGaWVsZHMiLCJkaXNhYmxlQXV0b21hdGljU2NyZWVuc2hvdHMiLCJ1c2VOYXRpdmVDYWNoaW5nU3RyYXRlZ3kiLCJmb3JjZVNpbXVsYXRvclNvZnR3YXJlS2V5Ym9hcmRQcmVzZW5jZSIsImF1dG9BY2NlcHRBbGVydHMiLCJkZWZhdWx0QWxlcnRBY3Rpb24iLCJhdXRvRGlzbWlzc0FsZXJ0cyIsImNhcGFiaWxpdGllcyIsImZpcnN0TWF0Y2giLCJhbHdheXNNYXRjaCIsInByb3h5QWN0aXZlIiwiZ2V0UHJveHlBdm9pZExpc3QiLCJpc1dlYnZpZXciLCJjYW5Qcm94eSIsImlzV2ViQ29udGV4dCIsInZhbGlkYXRlTG9jYXRvclN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJjb2VyY2VWZXJzaW9uIiwidmVyaWZ5UHJvY2Vzc0FyZ3VtZW50Iiwia2V5Y2hhaW5QYXRoIiwia2V5Y2hhaW5QYXNzd29yZCIsImNvbW1hbmRUaW1lb3V0cyIsIm5vcm1hbGl6ZUNvbW1hbmRUaW1lb3V0cyIsInByb3RvY29sIiwiaG9zdCIsInBlcm1zIiwiYWRkaXRpb25hbFdlYnZpZXdCdW5kbGVJZHMiLCJwYXJzZUNhcHNBcnJheSIsInZlcmlmeUFwcGxpY2F0aW9uUGxhdGZvcm0iLCJpbnN0YWxsVG9SZWFsRGV2aWNlIiwidGltZW91dCIsImFwcFB1c2hUaW1lb3V0IiwiYXBwSW5zdGFsbFN0cmF0ZWd5IiwiaW5zdGFsbFRvU2ltdWxhdG9yIiwibmV3U2ltdWxhdG9yIiwib3RoZXJBcHBzIiwiaW5zdGFsbE90aGVyQXBwcyIsImlvc0luc3RhbGxQYXVzZSIsInBhdXNlIiwiZGVsYXkiLCJhcHBzTGlzdCIsImFwcFBhdGhzIiwib3RoZXJBcHAiLCJpc0VuYWJsZWQiLCJpc0Jvb2xlYW4iLCJjdXJPcmllbnRhdGlvbiIsIl9nZXRDb21tYW5kVGltZW91dCIsImNtZE5hbWUiLCJERUZBVUxUX1RJTUVPVVRfS0VZIiwiZ2V0U2Vzc2lvbiIsImRyaXZlclNlc3Npb24iLCJzaG91bGRHZXREZXZpY2VDYXBzIiwiaW5jbHVkZURldmljZUNhcHNUb1Nlc3Npb25JbmZvIiwiZGV2aWNlQ2FwcyIsInN0YXR1c0JhclNpemUiLCJzY2FsZSIsImdldFNjcmVlbkluZm8iLCJwaXhlbFJhdGlvIiwic3RhdEJhckhlaWdodCIsImhlaWdodCIsInZpZXdwb3J0UmVjdCIsImdldFZpZXdwb3J0UmVjdCIsInJlc2V0IiwiY2xvbmVEZWVwIiwic2h1dGRvd25IYW5kbGVyIiwicmVzZXRPblVuZXhwZWN0ZWRTaHV0ZG93biIsInByb3RvdHlwZSIsImNvbW1hbmRzIl0sInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsibGliL2RyaXZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlRHJpdmVyLCBEZXZpY2VTZXR0aW5ncyB9IGZyb20gJ0BhcHBpdW0vYmFzZS1kcml2ZXInO1xuaW1wb3J0IHsgdXRpbCwgbWpwZWcgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB1cmwgZnJvbSAndXJsJztcbmltcG9ydCB7IFdlYkRyaXZlckFnZW50IH0gZnJvbSAnYXBwaXVtLXdlYmRyaXZlcmFnZW50JztcbmltcG9ydCBMUlUgZnJvbSAnbHJ1LWNhY2hlJztcbmltcG9ydCB7XG4gIGNyZWF0ZVNpbSwgZ2V0RXhpc3RpbmdTaW0sIHJ1blNpbXVsYXRvclJlc2V0LCBpbnN0YWxsVG9TaW11bGF0b3IsXG4gIHNodXRkb3duT3RoZXJTaW11bGF0b3JzLCBzaHV0ZG93blNpbXVsYXRvciwgc2V0TG9jYWxlQW5kUHJlZmVyZW5jZXNcbn0gZnJvbSAnLi9zaW11bGF0b3ItbWFuYWdlbWVudCc7XG5pbXBvcnQgeyBnZXRTaW11bGF0b3IgfSBmcm9tICdhcHBpdW0taW9zLXNpbXVsYXRvcic7XG5pbXBvcnQge1xuICBkb2VzU3VwcG9ydEtleWNoYWluQXBpLCBpbnN0YWxsQ2VydGlmaWNhdGUsIGluc3RhbGxDZXJ0aWZpY2F0ZUxlZ2FjeSxcbiAgaGFzQ2VydGlmaWNhdGVMZWdhY3ksXG59IGZyb20gJy4vY2VydC11dGlscyc7XG5pbXBvcnQgeyByZXRyeUludGVydmFsLCByZXRyeSB9IGZyb20gJ2FzeW5jYm94JztcbmltcG9ydCB7IHZlcmlmeUFwcGxpY2F0aW9uUGxhdGZvcm0sIGV4dHJhY3RCdW5kbGVJZCB9IGZyb20gJy4vYXBwLXV0aWxzJztcbmltcG9ydCB7IGRlc2lyZWRDYXBDb25zdHJhaW50cywgUExBVEZPUk1fTkFNRV9JT1MsIFBMQVRGT1JNX05BTUVfVFZPUyB9IGZyb20gJy4vZGVzaXJlZC1jYXBzJztcbmltcG9ydCBjb21tYW5kcyBmcm9tICcuL2NvbW1hbmRzL2luZGV4JztcbmltcG9ydCB7XG4gIGRldGVjdFVkaWQsIGdldEFuZENoZWNrWGNvZGVWZXJzaW9uLCBnZXRBbmRDaGVja0lvc1Nka1ZlcnNpb24sXG4gIGNoZWNrQXBwUHJlc2VudCwgZ2V0RHJpdmVySW5mbyxcbiAgY2xlYXJTeXN0ZW1GaWxlcywgdHJhbnNsYXRlRGV2aWNlTmFtZSwgbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzLFxuICBERUZBVUxUX1RJTUVPVVRfS0VZLCBtYXJrU3lzdGVtRmlsZXNGb3JDbGVhbnVwLFxuICBwcmludFVzZXIsIHJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyxcbiAgbm9ybWFsaXplUGxhdGZvcm1WZXJzaW9uLCBpc0xvY2FsSG9zdFxufSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7XG4gIGdldENvbm5lY3RlZERldmljZXMsIHJ1blJlYWxEZXZpY2VSZXNldCwgaW5zdGFsbFRvUmVhbERldmljZSxcbiAgZ2V0UmVhbERldmljZU9ialxufSBmcm9tICcuL3JlYWwtZGV2aWNlLW1hbmFnZW1lbnQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IEFzeW5jTG9jayBmcm9tICdhc3luYy1sb2NrJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IElEQiBmcm9tICdhcHBpdW0taWRiJztcbmltcG9ydCBERVZJQ0VfQ09OTkVDVElPTlNfRkFDVE9SWSBmcm9tICcuL2RldmljZS1jb25uZWN0aW9ucy1mYWN0b3J5JztcbmltcG9ydCBQeWlkZXZpY2UgZnJvbSAnLi9weS1pb3MtZGV2aWNlLWNsaWVudCc7XG5cblxuY29uc3QgU0hVVERPV05fT1RIRVJfRkVBVF9OQU1FID0gJ3NodXRkb3duX290aGVyX3NpbXMnO1xuY29uc3QgQ1VTVE9NSVpFX1JFU1VMVF9CVU5EUEVfUEFUSCA9ICdjdXN0b21pemVfcmVzdWx0X2J1bmRsZV9wYXRoJztcblxuY29uc3QgZGVmYXVsdFNlcnZlckNhcHMgPSB7XG4gIHdlYlN0b3JhZ2VFbmFibGVkOiBmYWxzZSxcbiAgbG9jYXRpb25Db250ZXh0RW5hYmxlZDogZmFsc2UsXG4gIGJyb3dzZXJOYW1lOiAnJyxcbiAgcGxhdGZvcm06ICdNQUMnLFxuICBqYXZhc2NyaXB0RW5hYmxlZDogdHJ1ZSxcbiAgZGF0YWJhc2VFbmFibGVkOiBmYWxzZSxcbiAgdGFrZXNTY3JlZW5zaG90OiB0cnVlLFxuICBuZXR3b3JrQ29ubmVjdGlvbkVuYWJsZWQ6IGZhbHNlLFxufTtcbmNvbnN0IFNBRkFSSV9CVU5ETEVfSUQgPSAnY29tLmFwcGxlLm1vYmlsZXNhZmFyaSc7XG5jb25zdCBXREFfU0lNX1NUQVJUVVBfUkVUUklFUyA9IDI7XG5jb25zdCBXREFfUkVBTF9ERVZfU1RBUlRVUF9SRVRSSUVTID0gMTtcbmNvbnN0IFdEQV9SRUFMX0RFVl9UVVRPUklBTF9VUkwgPSAnaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0teGN1aXRlc3QtZHJpdmVyL2Jsb2IvbWFzdGVyL2RvY3MvcmVhbC1kZXZpY2UtY29uZmlnLm1kJztcbmNvbnN0IFdEQV9TVEFSVFVQX1JFVFJZX0lOVEVSVkFMID0gMTAwMDA7XG5jb25zdCBERUZBVUxUX1NFVFRJTkdTID0ge1xuICBuYXRpdmVXZWJUYXA6IGZhbHNlLFxuICBuYXRpdmVXZWJUYXBTdHJpY3Q6IGZhbHNlLFxuICB1c2VKU09OU291cmNlOiBmYWxzZSxcbiAgc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlczogdHJ1ZSxcbiAgZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlczogJ3R5cGUsbGFiZWwnLFxuICAvLyBSZWFkIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vV2ViRHJpdmVyQWdlbnQvYmxvYi9tYXN0ZXIvV2ViRHJpdmVyQWdlbnRMaWIvVXRpbGl0aWVzL0ZCQ29uZmlndXJhdGlvbi5tIGZvciBmb2xsb3dpbmcgc2V0dGluZ3MnIHZhbHVlc1xuICBtanBlZ1NlcnZlclNjcmVlbnNob3RRdWFsaXR5OiAyNSxcbiAgbWpwZWdTZXJ2ZXJGcmFtZXJhdGU6IDEwLFxuICBzY3JlZW5zaG90UXVhbGl0eTogMSxcbiAgbWpwZWdTY2FsaW5nRmFjdG9yOiAxMDAsXG4gIC8vIHNldCBgcmVkdWNlTW90aW9uYCB0byBgbnVsbGAgc28gdGhhdCBpdCB3aWxsIGJlIHZlcmlmaWVkIGJ1dCBzdGlsbCBzZXQgZWl0aGVyIHRydWUvZmFsc2VcbiAgcmVkdWNlTW90aW9uOiBudWxsLFxufTtcbi8vIFRoaXMgbG9jayBhc3N1cmVzLCB0aGF0IGVhY2ggZHJpdmVyIHNlc3Npb24gZG9lcyBub3Rcbi8vIGFmZmVjdCBzaGFyZWQgcmVzb3VyY2VzIG9mIHRoZSBvdGhlciBwYXJhbGxlbCBzZXNzaW9uc1xuY29uc3QgU0hBUkVEX1JFU09VUkNFU19HVUFSRCA9IG5ldyBBc3luY0xvY2soKTtcbmNvbnN0IFdFQl9FTEVNRU5UU19DQUNIRV9TSVpFID0gNTAwO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11c2VsZXNzLWVzY2FwZSAqL1xuY29uc3QgTk9fUFJPWFlfTkFUSVZFX0xJU1QgPSBbXG4gIFsnREVMRVRFJywgL3dpbmRvdy9dLFxuICBbJ0dFVCcsIC9eXFwvc2Vzc2lvblxcL1teXFwvXSskL10sXG4gIFsnR0VUJywgL2FsZXJ0X3RleHQvXSxcbiAgWydHRVQnLCAvYWxlcnRcXC9bXlxcL10rL10sXG4gIFsnR0VUJywgL2FwcGl1bS9dLFxuICBbJ0dFVCcsIC9hdHRyaWJ1dGUvXSxcbiAgWydHRVQnLCAvY29udGV4dC9dLFxuICBbJ0dFVCcsIC9sb2NhdGlvbi9dLFxuICBbJ0dFVCcsIC9sb2cvXSxcbiAgWydHRVQnLCAvc2NyZWVuc2hvdC9dLFxuICBbJ0dFVCcsIC9zaXplL10sXG4gIFsnR0VUJywgL3NvdXJjZS9dLFxuICBbJ0dFVCcsIC90aW1lb3V0cyQvXSxcbiAgWydHRVQnLCAvdXJsL10sXG4gIFsnR0VUJywgL3dpbmRvdy9dLFxuICBbJ1BPU1QnLCAvYWNjZXB0X2FsZXJ0L10sXG4gIFsnUE9TVCcsIC9hY3Rpb25zJC9dLFxuICBbJ1BPU1QnLCAvYWxlcnRfdGV4dC9dLFxuICBbJ1BPU1QnLCAvYWxlcnRcXC9bXlxcL10rL10sXG4gIFsnUE9TVCcsIC9hcHBpdW0vXSxcbiAgWydQT1NUJywgL2FwcGl1bVxcL2RldmljZVxcL2lzX2xvY2tlZC9dLFxuICBbJ1BPU1QnLCAvYXBwaXVtXFwvZGV2aWNlXFwvbG9jay9dLFxuICBbJ1BPU1QnLCAvYXBwaXVtXFwvZGV2aWNlXFwvdW5sb2NrL10sXG4gIFsnUE9TVCcsIC9iYWNrL10sXG4gIFsnUE9TVCcsIC9jbGVhci9dLFxuICBbJ1BPU1QnLCAvY29udGV4dC9dLFxuICBbJ1BPU1QnLCAvZGlzbWlzc19hbGVydC9dLFxuICBbJ1BPU1QnLCAvZWxlbWVudFxcL2FjdGl2ZS9dLCAvLyBNSlNPTldQIGdldCBhY3RpdmUgZWxlbWVudCBzaG91bGQgcHJveHlcbiAgWydQT1NUJywgL2VsZW1lbnQkL10sXG4gIFsnUE9TVCcsIC9lbGVtZW50cyQvXSxcbiAgWydQT1NUJywgL2V4ZWN1dGUvXSxcbiAgWydQT1NUJywgL2tleXMvXSxcbiAgWydQT1NUJywgL2xvZy9dLFxuICBbJ1BPU1QnLCAvbW92ZXRvL10sXG4gIFsnUE9TVCcsIC9yZWNlaXZlX2FzeW5jX3Jlc3BvbnNlL10sIC8vIGFsd2F5cywgaW4gY2FzZSBjb250ZXh0IHN3aXRjaGVzIHdoaWxlIHdhaXRpbmdcbiAgWydQT1NUJywgL3Nlc3Npb25cXC9bXlxcL10rXFwvbG9jYXRpb24vXSwgLy8gZ2VvIGxvY2F0aW9uLCBidXQgbm90IGVsZW1lbnQgbG9jYXRpb25cbiAgWydQT1NUJywgL3NoYWtlL10sXG4gIFsnUE9TVCcsIC90aW1lb3V0cy9dLFxuICBbJ1BPU1QnLCAvdG91Y2gvXSxcbiAgWydQT1NUJywgL3VybC9dLFxuICBbJ1BPU1QnLCAvdmFsdWUvXSxcbiAgWydQT1NUJywgL3dpbmRvdy9dLFxuICBbJ0RFTEVURScsIC9jb29raWUvXSxcbiAgWydHRVQnLCAvY29va2llL10sXG4gIFsnUE9TVCcsIC9jb29raWUvXSxcbl07XG5jb25zdCBOT19QUk9YWV9XRUJfTElTVCA9IFtcbiAgWydHRVQnLCAvYXR0cmlidXRlL10sXG4gIFsnR0VUJywgL2VsZW1lbnQvXSxcbiAgWydHRVQnLCAvdGV4dC9dLFxuICBbJ0dFVCcsIC90aXRsZS9dLFxuICBbJ1BPU1QnLCAvY2xlYXIvXSxcbiAgWydQT1NUJywgL2NsaWNrL10sXG4gIFsnUE9TVCcsIC9lbGVtZW50L10sXG4gIFsnUE9TVCcsIC9mb3J3YXJkL10sXG4gIFsnUE9TVCcsIC9mcmFtZS9dLFxuICBbJ1BPU1QnLCAva2V5cy9dLFxuICBbJ1BPU1QnLCAvcmVmcmVzaC9dLFxuXS5jb25jYXQoTk9fUFJPWFlfTkFUSVZFX0xJU1QpO1xuLyogZXNsaW50LWVuYWJsZSBuby11c2VsZXNzLWVzY2FwZSAqL1xuXG5jb25zdCBNRU1PSVpFRF9GVU5DVElPTlMgPSBbXG4gICdnZXRTdGF0dXNCYXJIZWlnaHQnLFxuICAnZ2V0RGV2aWNlUGl4ZWxSYXRpbycsXG4gICdnZXRTY3JlZW5JbmZvJyxcbl07XG5cbmNsYXNzIFhDVUlUZXN0RHJpdmVyIGV4dGVuZHMgQmFzZURyaXZlciB7XG4gIGNvbnN0cnVjdG9yIChvcHRzID0ge30sIHNob3VsZFZhbGlkYXRlQ2FwcyA9IHRydWUpIHtcbiAgICBzdXBlcihvcHRzLCBzaG91bGRWYWxpZGF0ZUNhcHMpO1xuXG4gICAgdGhpcy5kZXNpcmVkQ2FwQ29uc3RyYWludHMgPSBkZXNpcmVkQ2FwQ29uc3RyYWludHM7XG5cbiAgICB0aGlzLmxvY2F0b3JTdHJhdGVnaWVzID0gW1xuICAgICAgJ3hwYXRoJyxcbiAgICAgICdpZCcsXG4gICAgICAnbmFtZScsXG4gICAgICAnY2xhc3MgbmFtZScsXG4gICAgICAnLWlvcyBwcmVkaWNhdGUgc3RyaW5nJyxcbiAgICAgICctaW9zIGNsYXNzIGNoYWluJyxcbiAgICAgICdhY2Nlc3NpYmlsaXR5IGlkJyxcbiAgICAgICdjc3Mgc2VsZWN0b3InLFxuICAgIF07XG4gICAgdGhpcy53ZWJMb2NhdG9yU3RyYXRlZ2llcyA9IFtcbiAgICAgICdsaW5rIHRleHQnLFxuICAgICAgJ2NzcyBzZWxlY3RvcicsXG4gICAgICAndGFnIG5hbWUnLFxuICAgICAgJ2xpbmsgdGV4dCcsXG4gICAgICAncGFydGlhbCBsaW5rIHRleHQnLFxuICAgIF07XG4gICAgdGhpcy5yZXNldElvcygpO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBuZXcgRGV2aWNlU2V0dGluZ3MoREVGQVVMVF9TRVRUSU5HUywgdGhpcy5vblNldHRpbmdzVXBkYXRlLmJpbmQodGhpcykpO1xuICAgIHRoaXMubG9ncyA9IHt9O1xuXG4gICAgLy8gbWVtb2l6ZSBmdW5jdGlvbnMgaGVyZSwgc28gdGhhdCB0aGV5IGFyZSBkb25lIG9uIGEgcGVyLWluc3RhbmNlIGJhc2lzXG4gICAgZm9yIChjb25zdCBmbiBvZiBNRU1PSVpFRF9GVU5DVElPTlMpIHtcbiAgICAgIHRoaXNbZm5dID0gXy5tZW1vaXplKHRoaXNbZm5dKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvblNldHRpbmdzVXBkYXRlIChrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSAhPT0gJ25hdGl2ZVdlYlRhcCcgJiYga2V5ICE9PSAnbmF0aXZlV2ViVGFwU3RyaWN0Jykge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvYXBwaXVtL3NldHRpbmdzJywgJ1BPU1QnLCB7XG4gICAgICAgIHNldHRpbmdzOiB7W2tleV06IHZhbHVlfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMub3B0c1trZXldID0gISF2YWx1ZTtcbiAgfVxuXG4gIHJlc2V0SW9zICgpIHtcbiAgICB0aGlzLm9wdHMgPSB0aGlzLm9wdHMgfHwge307XG4gICAgdGhpcy53ZGEgPSBudWxsO1xuICAgIHRoaXMub3B0cy5kZXZpY2UgPSBudWxsO1xuICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnByb3h5UmVxUmVzID0gbnVsbDtcbiAgICB0aGlzLmp3cFByb3h5QXZvaWQgPSBbXTtcbiAgICB0aGlzLnNhZmFyaSA9IGZhbHNlO1xuICAgIHRoaXMuY2FjaGVkV2RhU3RhdHVzID0gbnVsbDtcblxuICAgIHRoaXMuY3VyV2ViRnJhbWVzID0gW107XG4gICAgdGhpcy5fY3VycmVudFVybCA9IG51bGw7XG4gICAgdGhpcy5jdXJDb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLnhjb2RlVmVyc2lvbiA9IHt9O1xuICAgIHRoaXMuY29udGV4dHMgPSBbXTtcbiAgICB0aGlzLmltcGxpY2l0V2FpdE1zID0gMDtcbiAgICB0aGlzLmFzeW5jbGliV2FpdE1zID0gMDtcbiAgICB0aGlzLnBhZ2VMb2FkTXMgPSA2MDAwO1xuICAgIHRoaXMubGFuZHNjYXBlV2ViQ29vcmRzT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnJlbW90ZSA9IG51bGw7XG5cbiAgICB0aGlzLndlYkVsZW1lbnRzQ2FjaGUgPSBuZXcgTFJVKHtcbiAgICAgIG1heDogV0VCX0VMRU1FTlRTX0NBQ0hFX1NJWkUsXG4gICAgfSk7XG4gIH1cblxuICBnZXQgZHJpdmVyRGF0YSAoKSB7XG4gICAgLy8gVE9ETyBmaWxsIG91dCByZXNvdXJjZSBpbmZvIGhlcmVcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBhc3luYyBnZXRTdGF0dXMgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kcml2ZXJJbmZvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kcml2ZXJJbmZvID0gYXdhaXQgZ2V0RHJpdmVySW5mbygpO1xuICAgIH1cbiAgICBsZXQgc3RhdHVzID0ge2J1aWxkOiB7dmVyc2lvbjogdGhpcy5kcml2ZXJJbmZvLnZlcnNpb259fTtcbiAgICBpZiAodGhpcy5jYWNoZWRXZGFTdGF0dXMpIHtcbiAgICAgIHN0YXR1cy53ZGEgPSB0aGlzLmNhY2hlZFdkYVN0YXR1cztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXR1cztcbiAgfVxuXG4gIG1lcmdlQ2xpQXJnc1RvT3B0cyAoKSB7XG4gICAgbGV0IGRpZE1lcmdlID0gZmFsc2U7XG4gICAgLy8gdGhpcy5jbGlBcmdzIHNob3VsZCBuZXZlciBpbmNsdWRlIGFueXRoaW5nIHdlIGRvIG5vdCBleHBlY3QuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jbGlBcmdzID8/IHt9KSkge1xuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywga2V5KSkge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBDTEkgYXJnICcke2tleX0nIHdpdGggdmFsdWUgJyR7dmFsdWV9JyBvdmVyd3JpdGVzIHZhbHVlICcke3RoaXMub3B0c1trZXldfScgc2VudCBpbiB2aWEgY2FwcylgKTtcbiAgICAgICAgZGlkTWVyZ2UgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZE1lcmdlO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2Vzc2lvbiAoLi4uYXJncykge1xuICAgIHRoaXMubGlmZWN5Y2xlRGF0YSA9IHt9OyAvLyB0aGlzIGlzIHVzZWQgZm9yIGtlZXBpbmcgdHJhY2sgb2YgdGhlIHN0YXRlIHdlIHN0YXJ0IHNvIHdoZW4gd2UgZGVsZXRlIHRoZSBzZXNzaW9uIHdlIGNhbiBwdXQgdGhpbmdzIGJhY2tcbiAgICB0cnkge1xuICAgICAgbGV0IFtzZXNzaW9uSWQsIGNhcHNdID0gYXdhaXQgc3VwZXIuY3JlYXRlU2Vzc2lvbiguLi5hcmdzKTtcbiAgICAgIHRoaXMub3B0cy5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgIC8vIG1lcmdlIGNsaSBhcmdzIHRvIG9wdHMsIGFuZCBpZiB3ZSBkaWQgbWVyZ2UgYW55LCByZXZhbGlkYXRlIG9wdHMgdG8gZW5zdXJlIHRoZSBmaW5hbCBzZXRcbiAgICAgIC8vIGlzIGFsc28gY29uc2lzdGVudFxuICAgICAgaWYgKHRoaXMubWVyZ2VDbGlBcmdzVG9PcHRzKCkpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZURlc2lyZWRDYXBzKHsuLi5jYXBzLCAuLi50aGlzLmNsaUFyZ3N9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zdGFydCgpO1xuXG4gICAgICAvLyBtZXJnZSBzZXJ2ZXIgY2FwYWJpbGl0aWVzICsgZGVzaXJlZCBjYXBhYmlsaXRpZXNcbiAgICAgIGNhcHMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2VydmVyQ2FwcywgY2Fwcyk7XG4gICAgICAvLyB1cGRhdGUgdGhlIHVkaWQgd2l0aCB3aGF0IGlzIGFjdHVhbGx5IHVzZWRcbiAgICAgIGNhcHMudWRpZCA9IHRoaXMub3B0cy51ZGlkO1xuICAgICAgLy8gZW5zdXJlIHdlIHRyYWNrIG5hdGl2ZVdlYlRhcCBjYXBhYmlsaXR5IGFzIGEgc2V0dGluZyBhcyB3ZWxsXG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnbmF0aXZlV2ViVGFwJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5ncyh7bmF0aXZlV2ViVGFwOiB0aGlzLm9wdHMubmF0aXZlV2ViVGFwfSk7XG4gICAgICB9XG4gICAgICAvLyBlbnN1cmUgd2UgdHJhY2sgbmF0aXZlV2ViVGFwU3RyaWN0IGNhcGFiaWxpdHkgYXMgYSBzZXR0aW5nIGFzIHdlbGxcbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICduYXRpdmVXZWJUYXBTdHJpY3QnKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmdzKHtuYXRpdmVXZWJUYXBTdHJpY3Q6IHRoaXMub3B0cy5uYXRpdmVXZWJUYXBTdHJpY3R9KTtcbiAgICAgIH1cbiAgICAgIC8vIGVuc3VyZSB3ZSB0cmFjayB1c2VKU09OU291cmNlIGNhcGFiaWxpdHkgYXMgYSBzZXR0aW5nIGFzIHdlbGxcbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICd1c2VKU09OU291cmNlJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5ncyh7dXNlSlNPTlNvdXJjZTogdGhpcy5vcHRzLnVzZUpTT05Tb3VyY2V9KTtcbiAgICAgIH1cblxuICAgICAgbGV0IHdkYVNldHRpbmdzID0ge1xuICAgICAgICBlbGVtZW50UmVzcG9uc2VBdHRyaWJ1dGVzOiBERUZBVUxUX1NFVFRJTkdTLmVsZW1lbnRSZXNwb25zZUF0dHJpYnV0ZXMsXG4gICAgICAgIHNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXM6IERFRkFVTFRfU0VUVElOR1Muc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlcyxcbiAgICAgIH07XG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlcycpKSB7XG4gICAgICAgIHdkYVNldHRpbmdzLmVsZW1lbnRSZXNwb25zZUF0dHJpYnV0ZXMgPSB0aGlzLm9wdHMuZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlcztcbiAgICAgIH1cbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICdzaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzJykpIHtcbiAgICAgICAgd2RhU2V0dGluZ3Muc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlcyA9IHRoaXMub3B0cy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzO1xuICAgICAgfVxuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywgJ21qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHknKSkge1xuICAgICAgICB3ZGFTZXR0aW5ncy5tanBlZ1NlcnZlclNjcmVlbnNob3RRdWFsaXR5ID0gdGhpcy5vcHRzLm1qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHk7XG4gICAgICB9XG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnbWpwZWdTZXJ2ZXJGcmFtZXJhdGUnKSkge1xuICAgICAgICB3ZGFTZXR0aW5ncy5tanBlZ1NlcnZlckZyYW1lcmF0ZSA9IHRoaXMub3B0cy5tanBlZ1NlcnZlckZyYW1lcmF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICdzY3JlZW5zaG90UXVhbGl0eScpKSB7XG4gICAgICAgIHRoaXMubG9nLmluZm8oYFNldHRpbmcgdGhlIHF1YWxpdHkgb2YgcGhvbmUgc2NyZWVuc2hvdDogJyR7dGhpcy5vcHRzLnNjcmVlbnNob3RRdWFsaXR5fSdgKTtcbiAgICAgICAgd2RhU2V0dGluZ3Muc2NyZWVuc2hvdFF1YWxpdHkgPSB0aGlzLm9wdHMuc2NyZWVuc2hvdFF1YWxpdHk7XG4gICAgICB9XG4gICAgICAvLyBlbnN1cmUgV0RBIGdldHMgb3VyIGRlZmF1bHRzIGluc3RlYWQgb2Ygd2hhdGV2ZXIgaXRzIG93biBtaWdodCBiZVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5ncyh3ZGFTZXR0aW5ncyk7XG5cbiAgICAgIC8vIHR1cm4gb24gbWpwZWcgc3RyZWFtIHJlYWRpbmcgaWYgcmVxdWVzdGVkXG4gICAgICBpZiAodGhpcy5vcHRzLm1qcGVnU2NyZWVuc2hvdFVybCkge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBTdGFydGluZyBNSlBFRyBzdHJlYW0gcmVhZGluZyBVUkw6ICcke3RoaXMub3B0cy5tanBlZ1NjcmVlbnNob3RVcmx9J2ApO1xuICAgICAgICB0aGlzLm1qcGVnU3RyZWFtID0gbmV3IG1qcGVnLk1KcGVnU3RyZWFtKHRoaXMub3B0cy5tanBlZ1NjcmVlbnNob3RVcmwpO1xuICAgICAgICBhd2FpdCB0aGlzLm1qcGVnU3RyZWFtLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3Nlc3Npb25JZCwgY2Fwc107XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2cuZXJyb3IoSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgICAgYXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uKCk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZWZhdWx0IFVSTCBmb3IgU2FmYXJpIGJyb3dzZXJcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgVVJMXG4gICAqL1xuICBnZXREZWZhdWx0VXJsICgpIHtcbiAgICAvLyBTZXR0aW5nIHRoaXMgdG8gc29tZSBleHRlcm5hbCBVUkwgc2xvd3MgZG93biBBcHBpdW0gc3RhcnR1cFxuICAgIHJldHVybiB0aGlzLmlzUmVhbERldmljZSgpXG4gICAgICA/IGBodHRwOi8vMTI3LjAuMC4xOiR7dGhpcy5vcHRzLndkYUxvY2FsUG9ydCB8fCA4MTAwfS9oZWFsdGhgXG4gICAgICA6IGBodHRwOi8vJHtcbiAgICAgICAgdGhpcy5vcHRzLmFkZHJlc3MuaW5jbHVkZXMoJzonKSA/IGBbJHt0aGlzLm9wdHMuYWRkcmVzc31dYCA6IHRoaXMub3B0cy5hZGRyZXNzXG4gICAgICB9OiR7dGhpcy5vcHRzLnBvcnR9L3dlbGNvbWVgO1xuICB9XG5cbiAgZG9lc1NhZmFyaVN1cHBvcnRVcmxBcmd1bWVudCAoKSB7XG4gICAgcmV0dXJuIHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc8JywgJzEyLjInKTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0ICgpIHtcbiAgICB0aGlzLm9wdHMubm9SZXNldCA9ICEhdGhpcy5vcHRzLm5vUmVzZXQ7XG4gICAgdGhpcy5vcHRzLmZ1bGxSZXNldCA9ICEhdGhpcy5vcHRzLmZ1bGxSZXNldDtcblxuICAgIGF3YWl0IHByaW50VXNlcigpO1xuXG4gICAgdGhpcy5vcHRzLmlvc1Nka1ZlcnNpb24gPSBudWxsOyAvLyBGb3IgV0RBIGFuZCB4Y29kZWJ1aWxkXG4gICAgY29uc3Qge2RldmljZSwgdWRpZCwgcmVhbERldmljZX0gPSBhd2FpdCB0aGlzLmRldGVybWluZURldmljZSgpO1xuICAgIHRoaXMubG9nLmluZm8oYERldGVybWluaW5nIGRldmljZSB0byBydW4gdGVzdHMgb246IHVkaWQ6ICcke3VkaWR9JywgcmVhbCBkZXZpY2U6ICR7cmVhbERldmljZX1gKTtcbiAgICB0aGlzLm9wdHMuZGV2aWNlID0gZGV2aWNlO1xuICAgIHRoaXMub3B0cy51ZGlkID0gdWRpZDtcbiAgICB0aGlzLm9wdHMucmVhbERldmljZSA9IHJlYWxEZXZpY2U7XG5cbiAgICBpZiAodGhpcy5vcHRzLnNpbXVsYXRvckRldmljZXNTZXRQYXRoKSB7XG4gICAgICBpZiAocmVhbERldmljZSkge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBUaGUgJ3NpbXVsYXRvckRldmljZXNTZXRQYXRoJyBjYXBhYmlsaXR5IGlzIG9ubHkgc3VwcG9ydGVkIGZvciBTaW11bGF0b3IgZGV2aWNlc2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2cuaW5mbyhgU2V0dGluZyBzaW11bGF0b3IgZGV2aWNlcyBzZXQgcGF0aCB0byAnJHt0aGlzLm9wdHMuc2ltdWxhdG9yRGV2aWNlc1NldFBhdGh9J2ApO1xuICAgICAgICB0aGlzLm9wdHMuZGV2aWNlLmRldmljZXNTZXRQYXRoID0gdGhpcy5vcHRzLnNpbXVsYXRvckRldmljZXNTZXRQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGF0IHRoaXMgcG9pbnQgaWYgdGhlcmUgaXMgbm8gcGxhdGZvcm1WZXJzaW9uLCBnZXQgaXQgZnJvbSB0aGUgZGV2aWNlXG4gICAgaWYgKCF0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uICYmIHRoaXMub3B0cy5kZXZpY2UpIHtcbiAgICAgIHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24gPSBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLmdldFBsYXRmb3JtVmVyc2lvbigpO1xuICAgICAgdGhpcy5sb2cuaW5mbyhgTm8gcGxhdGZvcm1WZXJzaW9uIHNwZWNpZmllZC4gVXNpbmcgZGV2aWNlIHZlcnNpb246ICcke3RoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb259J2ApO1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWRWZXJzaW9uID0gbm9ybWFsaXplUGxhdGZvcm1WZXJzaW9uKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24pO1xuICAgIGlmICh0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uICE9PSBub3JtYWxpemVkVmVyc2lvbikge1xuICAgICAgdGhpcy5sb2cuaW5mbyhgTm9ybWFsaXplZCBwbGF0Zm9ybVZlcnNpb24gY2FwYWJpbGl0eSB2YWx1ZSAnJHt0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9ufScgdG8gJyR7bm9ybWFsaXplZFZlcnNpb259J2ApO1xuICAgICAgdGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiA9IG5vcm1hbGl6ZWRWZXJzaW9uO1xuICAgIH1cbiAgICBpZiAodXRpbC5jb21wYXJlVmVyc2lvbnModGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiwgJzwnLCAnOS4zJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUGxhdGZvcm0gdmVyc2lvbiBtdXN0IGJlIDkuMyBvciBhYm92ZS4gJyR7dGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbn0nIGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgfVxuXG4gICAgaWYgKF8uaXNFbXB0eSh0aGlzLnhjb2RlVmVyc2lvbikgJiYgKCF0aGlzLm9wdHMud2ViRHJpdmVyQWdlbnRVcmwgfHwgIXRoaXMub3B0cy5yZWFsRGV2aWNlKSkge1xuICAgICAgLy8gbm8gYHdlYkRyaXZlckFnZW50VXJsYCwgb3Igb24gYSBzaW11bGF0b3IsIHNvIHdlIG5lZWQgYW4gWGNvZGUgdmVyc2lvblxuICAgICAgdGhpcy54Y29kZVZlcnNpb24gPSBhd2FpdCBnZXRBbmRDaGVja1hjb2RlVmVyc2lvbigpO1xuICAgIH1cbiAgICB0aGlzLmxvZ0V2ZW50KCd4Y29kZURldGFpbHNSZXRyaWV2ZWQnKTtcblxuICAgIGlmIChfLnRvTG93ZXIodGhpcy5vcHRzLmJyb3dzZXJOYW1lKSA9PT0gJ3NhZmFyaScpIHtcbiAgICAgIHRoaXMubG9nLmluZm8oJ1NhZmFyaSB0ZXN0IHJlcXVlc3RlZCcpO1xuICAgICAgdGhpcy5zYWZhcmkgPSB0cnVlO1xuICAgICAgdGhpcy5vcHRzLmFwcCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMub3B0cy5wcm9jZXNzQXJndW1lbnRzID0gdGhpcy5vcHRzLnByb2Nlc3NBcmd1bWVudHMgfHwge307XG4gICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSBTQUZBUklfQlVORExFX0lEO1xuICAgICAgdGhpcy5fY3VycmVudFVybCA9IHRoaXMub3B0cy5zYWZhcmlJbml0aWFsVXJsIHx8IHRoaXMuZ2V0RGVmYXVsdFVybCgpO1xuICAgICAgaWYgKHRoaXMuZG9lc1NhZmFyaVN1cHBvcnRVcmxBcmd1bWVudCgpKSB7XG4gICAgICAgIC8vIHRoaXMgb3B0aW9uIGRvZXMgbm90IHdvcmsgb24gMTIuMiBhbmQgYWJvdmVcbiAgICAgICAgdGhpcy5vcHRzLnByb2Nlc3NBcmd1bWVudHMuYXJncyA9IFsnLXUnLCB0aGlzLl9jdXJyZW50VXJsXTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0cy5hcHAgfHwgdGhpcy5vcHRzLmJ1bmRsZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNvbmZpZ3VyZUFwcCgpO1xuICAgIH1cbiAgICB0aGlzLmxvZ0V2ZW50KCdhcHBDb25maWd1cmVkJyk7XG5cbiAgICAvLyBmYWlsIHZlcnkgZWFybHkgaWYgdGhlIGFwcCBkb2Vzbid0IGFjdHVhbGx5IGV4aXN0XG4gICAgLy8gb3IgaWYgYnVuZGxlIGlkIGRvZXNuJ3QgcG9pbnQgdG8gYW4gaW5zdGFsbGVkIGFwcFxuICAgIGlmICh0aGlzLm9wdHMuYXBwKSB7XG4gICAgICBhd2FpdCBjaGVja0FwcFByZXNlbnQodGhpcy5vcHRzLmFwcCk7XG5cbiAgICAgIGlmICghdGhpcy5vcHRzLmJ1bmRsZUlkKSB7XG4gICAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9IGF3YWl0IGV4dHJhY3RCdW5kbGVJZCh0aGlzLm9wdHMuYXBwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnJ1blJlc2V0KCk7XG5cbiAgICB0aGlzLndkYSA9IG5ldyBXZWJEcml2ZXJBZ2VudCh0aGlzLnhjb2RlVmVyc2lvbiwgdGhpcy5vcHRzLCB0aGlzLmxvZyk7XG4gICAgLy8gRGVyaXZlZCBkYXRhIHBhdGggcmV0cmlldmFsIGlzIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb25cbiAgICAvLyBXZSBjb3VsZCBzdGFydCB0aGF0IG5vdyBpbiBiYWNrZ3JvdW5kIGFuZCBnZXQgdGhlIGNhY2hlZCByZXN1bHRcbiAgICAvLyB3aGVuZXZlciBpdCBpcyBuZWVkZWRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgIHRoaXMud2RhLnJldHJpZXZlRGVyaXZlZERhdGFQYXRoKCkuY2F0Y2goKGUpID0+IHRoaXMubG9nLmRlYnVnKGUpKTtcblxuICAgIGNvbnN0IG1lbW9pemVkTG9nSW5mbyA9IF8ubWVtb2l6ZSgoKSA9PiB7XG4gICAgICB0aGlzLmxvZy5pbmZvKFwiJ3NraXBMb2dDYXB0dXJlJyBpcyBzZXQuIFNraXBwaW5nIHN0YXJ0aW5nIGxvZ3Mgc3VjaCBhcyBjcmFzaCwgc3lzdGVtLCBzYWZhcmkgY29uc29sZSBhbmQgc2FmYXJpIG5ldHdvcmsuXCIpO1xuICAgIH0pO1xuICAgIGNvbnN0IHN0YXJ0TG9nQ2FwdHVyZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdHMuc2tpcExvZ0NhcHR1cmUpIHtcbiAgICAgICAgbWVtb2l6ZWRMb2dJbmZvKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zdGFydExvZ0NhcHR1cmUoKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgdGhpcy5sb2dFdmVudCgnbG9nQ2FwdHVyZVN0YXJ0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBjb25zdCBpc0xvZ0NhcHR1cmVTdGFydGVkID0gYXdhaXQgc3RhcnRMb2dDYXB0dXJlKCk7XG5cbiAgICB0aGlzLmxvZy5pbmZvKGBTZXR0aW5nIHVwICR7dGhpcy5pc1JlYWxEZXZpY2UoKSA/ICdyZWFsIGRldmljZScgOiAnc2ltdWxhdG9yJ31gKTtcblxuICAgIGlmICh0aGlzLmlzU2ltdWxhdG9yKCkpIHtcbiAgICAgIGlmICh0aGlzLm9wdHMuc2h1dGRvd25PdGhlclNpbXVsYXRvcnMpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVGZWF0dXJlRW5hYmxlZChTSFVURE9XTl9PVEhFUl9GRUFUX05BTUUpO1xuICAgICAgICBhd2FpdCBzaHV0ZG93bk90aGVyU2ltdWxhdG9ycyh0aGlzLm9wdHMuZGV2aWNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhpcyBzaG91bGQgYmUgZG9uZSBiZWZvcmUgdGhlIHNpbXVsYXRvciBpcyBzdGFydGVkXG4gICAgICAvLyBpZiBpdCBpcyBhbHJlYWR5IHJ1bm5pbmcsIHRoaXMgY2FwIHdvbid0IHdvcmssIHdoaWNoIGlzIGRvY3VtZW50ZWRcbiAgICAgIGlmICh0aGlzLmlzU2FmYXJpKCkgJiYgdGhpcy5vcHRzLnNhZmFyaUdsb2JhbFByZWZlcmVuY2VzKSB7XG4gICAgICAgIGlmIChhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLnVwZGF0ZVNhZmFyaUdsb2JhbFNldHRpbmdzKHRoaXMub3B0cy5zYWZhcmlHbG9iYWxQcmVmZXJlbmNlcykpIHtcbiAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgU2FmYXJpIGdsb2JhbCBwcmVmZXJlbmNlcyB1cGRhdGVkYCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2NhbENvbmZpZyA9IGF3YWl0IHNldExvY2FsZUFuZFByZWZlcmVuY2VzKHRoaXMub3B0cy5kZXZpY2UsIHRoaXMub3B0cywgdGhpcy5pc1NhZmFyaSgpLCBhc3luYyAoc2ltKSA9PiB7XG4gICAgICAgIGF3YWl0IHNodXRkb3duU2ltdWxhdG9yKHNpbSk7XG5cbiAgICAgICAgLy8gd2UgZG9uJ3Qga25vdyBpZiB0aGVyZSBuZWVkcyB0byBiZSBjaGFuZ2VzIGEgcHJpb3JpLCBzbyBjaGFuZ2UgZmlyc3QuXG4gICAgICAgIC8vIHNvbWV0aW1lcyB0aGUgc2h1dGRvd24gcHJvY2VzcyBjaGFuZ2VzIHRoZSBzZXR0aW5ncywgc28gcmVzZXQgdGhlbSxcbiAgICAgICAgLy8ga25vd2luZyB0aGF0IHRoZSBzaW0gaXMgYWxyZWFkeSBzaHV0XG4gICAgICAgIGF3YWl0IHNldExvY2FsZUFuZFByZWZlcmVuY2VzKHNpbSwgdGhpcy5vcHRzLCB0aGlzLmlzU2FmYXJpKCkpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCAmJiAhKGF3YWl0IGRvZXNTdXBwb3J0S2V5Y2hhaW5BcGkodGhpcy5vcHRzLmRldmljZSkpKSB7XG4gICAgICAgIGNvbnN0IGNlcnRIZWFkID0gXy50cnVuY2F0ZSh0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCwge2xlbmd0aDogMjB9KTtcbiAgICAgICAgdGhpcy5sb2cuaW5mbyhgSW5zdGFsbGluZyB0aGUgY3VzdG9tIFNTTCBjZXJ0aWZpY2F0ZSAnJHtjZXJ0SGVhZH0nYCk7XG4gICAgICAgIGlmIChhd2FpdCBoYXNDZXJ0aWZpY2F0ZUxlZ2FjeSh0aGlzLm9wdHMuZGV2aWNlLCB0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCkpIHtcbiAgICAgICAgICB0aGlzLmxvZy5pbmZvKGBTU0wgY2VydGlmaWNhdGUgJyR7Y2VydEhlYWR9JyBhbHJlYWR5IGluc3RhbGxlZGApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubG9nLmluZm8oYE1ha2luZyBzdXJlIFNpbXVsYXRvciBpcyBzaHV0IGRvd24sICcgK1xuICAgICAgICAgICAgJ3NvIHRoYXQgU1NMIGNlcnRpZmljYXRlIGluc3RhbGxhdGlvbiB0YWtlcyBlZmZlY3RgKTtcbiAgICAgICAgICBhd2FpdCBzaHV0ZG93blNpbXVsYXRvcih0aGlzLm9wdHMuZGV2aWNlKTtcbiAgICAgICAgICBhd2FpdCBpbnN0YWxsQ2VydGlmaWNhdGVMZWdhY3kodGhpcy5vcHRzLmRldmljZSwgdGhpcy5vcHRzLmN1c3RvbVNTTENlcnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ2N1c3RvbUNlcnRJbnN0YWxsZWQnKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zdGFydFNpbSgpO1xuXG4gICAgICBpZiAodGhpcy5vcHRzLmN1c3RvbVNTTENlcnQgJiYgYXdhaXQgZG9lc1N1cHBvcnRLZXljaGFpbkFwaSh0aGlzLm9wdHMuZGV2aWNlKSkge1xuICAgICAgICAvLyBTaW11bGF0b3IgbXVzdCBiZSBib290ZWQgaW4gb3JkZXIgdG8gY2FsbCB0aGlzIGhlbHBlclxuICAgICAgICBhd2FpdCBpbnN0YWxsQ2VydGlmaWNhdGUodGhpcy5vcHRzLmRldmljZSwgdGhpcy5vcHRzLmN1c3RvbVNTTENlcnQpO1xuICAgICAgICB0aGlzLmxvZ0V2ZW50KCdjdXN0b21DZXJ0SW5zdGFsbGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdHMubGF1bmNoV2l0aElEQiAmJiB0aGlzLmlzU2ltdWxhdG9yKCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBpZGIgPSBuZXcgSURCKHt1ZGlkfSk7XG4gICAgICAgICAgYXdhaXQgaWRiLmNvbm5lY3QoKTtcbiAgICAgICAgICB0aGlzLm9wdHMuZGV2aWNlLmlkYiA9IGlkYjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXMubG9nLmluZm8oYGlkYiB3aWxsIG5vdCBiZSB1c2VkIGZvciBTaW11bGF0b3IgaW50ZXJhY3Rpb24uIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmxvZ0V2ZW50KCdzaW1TdGFydGVkJyk7XG4gICAgICBpZiAoIWlzTG9nQ2FwdHVyZVN0YXJ0ZWQpIHtcbiAgICAgICAgLy8gUmV0cnkgbG9nIGNhcHR1cmUgaWYgU2ltdWxhdG9yIHdhcyBub3QgcnVubmluZyBiZWZvcmVcbiAgICAgICAgYXdhaXQgc3RhcnRMb2dDYXB0dXJlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCkge1xuICAgICAgYXdhaXQgbmV3IFB5aWRldmljZSh1ZGlkKS5pbnN0YWxsUHJvZmlsZSh7cGF5bG9hZDogdGhpcy5vcHRzLmN1c3RvbVNTTENlcnR9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLmFwcCkge1xuICAgICAgYXdhaXQgdGhpcy5pbnN0YWxsQVVUKCk7XG4gICAgICB0aGlzLmxvZ0V2ZW50KCdhcHBJbnN0YWxsZWQnKTtcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSBvbmx5IGhhdmUgYnVuZGxlIGlkZW50aWZpZXIgYW5kIG5vIGFwcCwgZmFpbCBpZiBpdCBpcyBub3QgYWxyZWFkeSBpbnN0YWxsZWRcbiAgICBpZiAoIXRoaXMub3B0cy5hcHAgJiYgdGhpcy5vcHRzLmJ1bmRsZUlkICYmICF0aGlzLmlzU2FmYXJpKCkpIHtcbiAgICAgIGlmICghYXdhaXQgdGhpcy5vcHRzLmRldmljZS5pc0FwcEluc3RhbGxlZCh0aGlzLm9wdHMuYnVuZGxlSWQpKSB7XG4gICAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYEFwcCB3aXRoIGJ1bmRsZSBpZGVudGlmaWVyICcke3RoaXMub3B0cy5idW5kbGVJZH0nIHVua25vd25gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLnBlcm1pc3Npb25zKSB7XG4gICAgICBpZiAodGhpcy5pc1NpbXVsYXRvcigpKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKCdTZXR0aW5nIHRoZSByZXF1ZXN0ZWQgcGVybWlzc2lvbnMgYmVmb3JlIFdEQSBpcyBzdGFydGVkJyk7XG4gICAgICAgIGZvciAoY29uc3QgW2J1bmRsZUlkLCBwZXJtaXNzaW9uc01hcHBpbmddIG9mIF8udG9QYWlycyhKU09OLnBhcnNlKHRoaXMub3B0cy5wZXJtaXNzaW9ucykpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5zZXRQZXJtaXNzaW9ucyhidW5kbGVJZCwgcGVybWlzc2lvbnNNYXBwaW5nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2cud2FybignU2V0dGluZyBwZXJtaXNzaW9ucyBpcyBvbmx5IHN1cHBvcnRlZCBvbiBTaW11bGF0b3IuICcgK1xuICAgICAgICAgICdUaGUgXCJwZXJtaXNzaW9uc1wiIGNhcGFiaWxpdHkgd2lsbCBiZSBpZ25vcmVkLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmlzU2ltdWxhdG9yKCkpIHtcbiAgICAgIGlmICh0aGlzLm9wdHMuY2FsZW5kYXJBY2Nlc3NBdXRob3JpemVkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2UuZW5hYmxlQ2FsZW5kYXJBY2Nlc3ModGhpcy5vcHRzLmJ1bmRsZUlkKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLmNhbGVuZGFyQWNjZXNzQXV0aG9yaXplZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5kaXNhYmxlQ2FsZW5kYXJBY2Nlc3ModGhpcy5vcHRzLmJ1bmRsZUlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnN0YXJ0V2RhKHRoaXMub3B0cy5zZXNzaW9uSWQsIHJlYWxEZXZpY2UpO1xuXG4gICAgYXdhaXQgdGhpcy5zZXRSZWR1Y2VNb3Rpb24odGhpcy5vcHRzLnJlZHVjZU1vdGlvbik7XG5cbiAgICBhd2FpdCB0aGlzLnNldEluaXRpYWxPcmllbnRhdGlvbih0aGlzLm9wdHMub3JpZW50YXRpb24pO1xuICAgIHRoaXMubG9nRXZlbnQoJ29yaWVudGF0aW9uU2V0Jyk7XG5cbiAgICBpZiAodGhpcy5pc1NhZmFyaSgpIHx8IHRoaXMub3B0cy5hdXRvV2Vidmlldykge1xuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVJlY2VudFdlYnZpZXcoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNTYWZhcmkoKSkge1xuICAgICAgdGhpcy5sb2cuaW5mbyhgQWJvdXQgdG8gc2V0IHRoZSBpbml0aWFsIFNhZmFyaSBVUkwgdG8gJyR7dGhpcy5nZXRDdXJyZW50VXJsKCl9Jy5gICtcbiAgICAgICAgYFVzZSAnc2FmYXJpSW5pdGlhbFVybCcgY2FwYWJpbGl0eSBpbiBvcmRlciB0byBjdXN0b21pemUgaXRgKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0VXJsKHRoaXMuZ2V0Q3VycmVudFVybCgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgV2ViRHJpdmVyQWdlbnRSdW5uZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBpZCBvZiB0aGUgdGFyZ2V0IHNlc3Npb24gdG8gbGF1bmNoIFdEQSB3aXRoLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlYWxEZXZpY2UgLSBFcXVhbHMgdG8gdHJ1ZSBpZiB0aGUgdGVzdCB0YXJnZXQgZGV2aWNlIGlzIGEgcmVhbCBkZXZpY2UuXG4gICAqL1xuICBhc3luYyBzdGFydFdkYSAoc2Vzc2lvbklkLCByZWFsRGV2aWNlKSB7XG4gICAgLy8gRG9uJ3QgY2xlYW51cCB0aGUgcHJvY2Vzc2VzIGlmIHdlYkRyaXZlckFnZW50VXJsIGlzIHNldFxuICAgIGlmICghdXRpbC5oYXNWYWx1ZSh0aGlzLndkYS53ZWJEcml2ZXJBZ2VudFVybCkpIHtcbiAgICAgIGF3YWl0IHRoaXMud2RhLmNsZWFudXBPYnNvbGV0ZVByb2Nlc3NlcygpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZVBvcnRGb3J3YXJkaW5nID0gdGhpcy5pc1JlYWxEZXZpY2UoKVxuICAgICAgJiYgIXRoaXMud2RhLndlYkRyaXZlckFnZW50VXJsXG4gICAgICAmJiBpc0xvY2FsSG9zdCh0aGlzLndkYS53ZGFCYXNlVXJsKTtcbiAgICBhd2FpdCBERVZJQ0VfQ09OTkVDVElPTlNfRkFDVE9SWS5yZXF1ZXN0Q29ubmVjdGlvbih0aGlzLm9wdHMudWRpZCwgdGhpcy53ZGEudXJsLnBvcnQsIHtcbiAgICAgIGRldmljZVBvcnQ6IHVzZVBvcnRGb3J3YXJkaW5nID8gdGhpcy53ZGEud2RhUmVtb3RlUG9ydCA6IG51bGwsXG4gICAgICB1c2VQb3J0Rm9yd2FyZGluZyxcbiAgICB9KTtcblxuICAgIC8vIExldCBtdWx0aXBsZSBXREEgYmluYXJpZXMgd2l0aCBkaWZmZXJlbnQgZGVyaXZlZCBkYXRhIGZvbGRlcnMgYmUgYnVpbHQgaW4gcGFyYWxsZWxcbiAgICAvLyBDb25jdXJyZW50IFdEQSBidWlsZHMgZnJvbSB0aGUgc2FtZSBzb3VyY2Ugd2lsbCBjYXVzZSB4Y29kZWJ1aWxkIHN5bmNocm9uaXphdGlvbiBlcnJvcnNcbiAgICBsZXQgc3luY2hyb25pemF0aW9uS2V5ID0gWENVSVRlc3REcml2ZXIubmFtZTtcbiAgICBpZiAodGhpcy5vcHRzLnVzZVhjdGVzdHJ1bkZpbGUgfHwgIShhd2FpdCB0aGlzLndkYS5pc1NvdXJjZUZyZXNoKCkpKSB7XG4gICAgICAvLyBGaXJzdC10aW1lIGNvbXBpbGF0aW9uIGlzIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb24sIHdoaWNoIGlzIGRvbmUgZmFzdGVyIGlmIGV4ZWN1dGVkXG4gICAgICAvLyBzZXF1ZW50aWFsbHkuIFhjb2RlYnVpbGQgc3ByZWFkcyB0aGUgbG9hZCBjYXVzZWQgYnkgdGhlIGNsYW5nIGNvbXBpbGVyIHRvIGFsbCBhdmFpbGFibGUgQ1BVIGNvcmVzXG4gICAgICBjb25zdCBkZXJpdmVkRGF0YVBhdGggPSBhd2FpdCB0aGlzLndkYS5yZXRyaWV2ZURlcml2ZWREYXRhUGF0aCgpO1xuICAgICAgaWYgKGRlcml2ZWREYXRhUGF0aCkge1xuICAgICAgICBzeW5jaHJvbml6YXRpb25LZXkgPSBwYXRoLm5vcm1hbGl6ZShkZXJpdmVkRGF0YVBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxvZy5kZWJ1ZyhgU3RhcnRpbmcgV2ViRHJpdmVyQWdlbnQgaW5pdGlhbGl6YXRpb24gd2l0aCB0aGUgc3luY2hyb25pemF0aW9uIGtleSAnJHtzeW5jaHJvbml6YXRpb25LZXl9J2ApO1xuICAgIGlmIChTSEFSRURfUkVTT1VSQ0VTX0dVQVJELmlzQnVzeSgpICYmICF0aGlzLm9wdHMuZGVyaXZlZERhdGFQYXRoICYmICF0aGlzLm9wdHMuYm9vdHN0cmFwUGF0aCkge1xuICAgICAgdGhpcy5sb2cuZGVidWcoYENvbnNpZGVyIHNldHRpbmcgYSB1bmlxdWUgJ2Rlcml2ZWREYXRhUGF0aCcgY2FwYWJpbGl0eSB2YWx1ZSBmb3IgZWFjaCBwYXJhbGxlbCBkcml2ZXIgaW5zdGFuY2UgYCArXG4gICAgICAgIGB0byBhdm9pZCBjb25mbGljdHMgYW5kIHNwZWVkIHVwIHRoZSBidWlsZGluZyBwcm9jZXNzYCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBTSEFSRURfUkVTT1VSQ0VTX0dVQVJELmFjcXVpcmUoc3luY2hyb25pemF0aW9uS2V5LCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5vcHRzLnVzZU5ld1dEQSkge1xuICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgQ2FwYWJpbGl0eSAndXNlTmV3V0RBJyBzZXQgdG8gdHJ1ZSwgc28gdW5pbnN0YWxsaW5nIFdEQSBiZWZvcmUgcHJvY2VlZGluZ2ApO1xuICAgICAgICBhd2FpdCB0aGlzLndkYS5xdWl0QW5kVW5pbnN0YWxsKCk7XG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVVuaW5zdGFsbGVkJyk7XG4gICAgICB9IGVsc2UgaWYgKCF1dGlsLmhhc1ZhbHVlKHRoaXMud2RhLndlYkRyaXZlckFnZW50VXJsKSkge1xuICAgICAgICBhd2FpdCB0aGlzLndkYS5zZXR1cENhY2hpbmcoKTtcbiAgICAgIH1cblxuICAgICAgLy8gbG9jYWwgaGVscGVyIGZvciB0aGUgdHdvIHBsYWNlcyB3ZSBuZWVkIHRvIHVuaW5zdGFsbCB3ZGEgYW5kIHJlLXN0YXJ0IGl0XG4gICAgICBjb25zdCBxdWl0QW5kVW5pbnN0YWxsID0gYXN5bmMgKG1zZykgPT4ge1xuICAgICAgICB0aGlzLmxvZy5kZWJ1Zyhtc2cpO1xuICAgICAgICBpZiAodGhpcy5vcHRzLndlYkRyaXZlckFnZW50VXJsKSB7XG4gICAgICAgICAgdGhpcy5sb2cuZGVidWcoJ05vdCBxdWl0dGluZy91bmluc3RhbGxpbmcgV2ViRHJpdmVyQWdlbnQgc2luY2Ugd2ViRHJpdmVyQWdlbnRVcmwgY2FwYWJpbGl0eSBpcyBwcm92aWRlZCcpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nLndhcm4oJ1F1aXR0aW5nIGFuZCB1bmluc3RhbGxpbmcgV2ViRHJpdmVyQWdlbnQnKTtcbiAgICAgICAgYXdhaXQgdGhpcy53ZGEucXVpdEFuZFVuaW5zdGFsbCgpO1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfTtcblxuICAgICAgLy8gVXNlZCBpbiB0aGUgZm9sbG93aW5nIFdEQSBidWlsZFxuICAgICAgaWYgKHRoaXMub3B0cy5yZXN1bHRCdW5kbGVQYXRoKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlRmVhdHVyZUVuYWJsZWQoQ1VTVE9NSVpFX1JFU1VMVF9CVU5EUEVfUEFUSCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXJ0dXBSZXRyaWVzID0gdGhpcy5vcHRzLndkYVN0YXJ0dXBSZXRyaWVzIHx8ICh0aGlzLmlzUmVhbERldmljZSgpID8gV0RBX1JFQUxfREVWX1NUQVJUVVBfUkVUUklFUyA6IFdEQV9TSU1fU1RBUlRVUF9SRVRSSUVTKTtcbiAgICAgIGNvbnN0IHN0YXJ0dXBSZXRyeUludGVydmFsID0gdGhpcy5vcHRzLndkYVN0YXJ0dXBSZXRyeUludGVydmFsIHx8IFdEQV9TVEFSVFVQX1JFVFJZX0lOVEVSVkFMO1xuICAgICAgdGhpcy5sb2cuZGVidWcoYFRyeWluZyB0byBzdGFydCBXZWJEcml2ZXJBZ2VudCAke3N0YXJ0dXBSZXRyaWVzfSB0aW1lcyB3aXRoICR7c3RhcnR1cFJldHJ5SW50ZXJ2YWx9bXMgaW50ZXJ2YWxgKTtcbiAgICAgIGlmICghdXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMud2RhU3RhcnR1cFJldHJpZXMpICYmICF1dGlsLmhhc1ZhbHVlKHRoaXMub3B0cy53ZGFTdGFydHVwUmV0cnlJbnRlcnZhbCkpIHtcbiAgICAgICAgdGhpcy5sb2cuZGVidWcoYFRoZXNlIHZhbHVlcyBjYW4gYmUgY3VzdG9taXplZCBieSBjaGFuZ2luZyB3ZGFTdGFydHVwUmV0cmllcy93ZGFTdGFydHVwUmV0cnlJbnRlcnZhbCBjYXBhYmlsaXRpZXNgKTtcbiAgICAgIH1cbiAgICAgIGxldCByZXRyeUNvdW50ID0gMDtcbiAgICAgIGF3YWl0IHJldHJ5SW50ZXJ2YWwoc3RhcnR1cFJldHJpZXMsIHN0YXJ0dXBSZXRyeUludGVydmFsLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVN0YXJ0QXR0ZW1wdGVkJyk7XG4gICAgICAgIGlmIChyZXRyeUNvdW50ID4gMCkge1xuICAgICAgICAgIHRoaXMubG9nLmluZm8oYFJldHJ5aW5nIFdEQSBzdGFydHVwICgke3JldHJ5Q291bnQgKyAxfSBvZiAke3N0YXJ0dXBSZXRyaWVzfSlgKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIG9uIHhjb2RlIDEwIGluc3RhbGxkIHdpbGwgb2Z0ZW4gdHJ5IHRvIGFjY2VzcyB0aGUgYXBwIGZyb20gaXRzIHN0YWdpbmdcbiAgICAgICAgICAvLyBkaXJlY3RvcnkgYmVmb3JlIGZ1bGx5IG1vdmluZyBpdCB0aGVyZSwgYW5kIGZhaWwuIFJldHJ5aW5nIG9uY2VcbiAgICAgICAgICAvLyBpbW1lZGlhdGVseSBoZWxwc1xuICAgICAgICAgIGNvbnN0IHJldHJpZXMgPSB0aGlzLnhjb2RlVmVyc2lvbi5tYWpvciA+PSAxMCA/IDIgOiAxO1xuICAgICAgICAgIHRoaXMuY2FjaGVkV2RhU3RhdHVzID0gYXdhaXQgcmV0cnkocmV0cmllcywgdGhpcy53ZGEubGF1bmNoLmJpbmQodGhpcy53ZGEpLCBzZXNzaW9uSWQsIHJlYWxEZXZpY2UpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLmxvZ0V2ZW50KCd3ZGFTdGFydEZhaWxlZCcpO1xuICAgICAgICAgIHJldHJ5Q291bnQrKztcbiAgICAgICAgICBsZXQgZXJyb3JNc2cgPSBgVW5hYmxlIHRvIGxhdW5jaCBXZWJEcml2ZXJBZ2VudCBiZWNhdXNlIG9mIHhjb2RlYnVpbGQgZmFpbHVyZTogJHtlcnIubWVzc2FnZX1gO1xuICAgICAgICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICAgICAgICBlcnJvck1zZyArPSBgLiBNYWtlIHN1cmUgeW91IGZvbGxvdyB0aGUgdHV0b3JpYWwgYXQgJHtXREFfUkVBTF9ERVZfVFVUT1JJQUxfVVJMfS4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgVHJ5IHRvIHJlbW92ZSB0aGUgV2ViRHJpdmVyQWdlbnRSdW5uZXIgYXBwbGljYXRpb24gZnJvbSB0aGUgZGV2aWNlIGlmIGl0IGlzIGluc3RhbGxlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhbmQgcmVib290IHRoZSBkZXZpY2UuYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgcXVpdEFuZFVuaW5zdGFsbChlcnJvck1zZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByb3h5UmVxUmVzID0gdGhpcy53ZGEucHJveHlSZXFSZXMuYmluZCh0aGlzLndkYSk7XG4gICAgICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgIGxldCBvcmlnaW5hbFN0YWNrdHJhY2UgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHJldHJ5SW50ZXJ2YWwoMTUsIDEwMDAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVNlc3Npb25BdHRlbXB0ZWQnKTtcbiAgICAgICAgICAgIHRoaXMubG9nLmRlYnVnKCdTZW5kaW5nIGNyZWF0ZVNlc3Npb24gY29tbWFuZCB0byBXREEnKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHRoaXMuY2FjaGVkV2RhU3RhdHVzID0gdGhpcy5jYWNoZWRXZGFTdGF0dXMgfHwgYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy9zdGF0dXMnLCAnR0VUJyk7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRXZGFTZXNzaW9uKHRoaXMub3B0cy5idW5kbGVJZCwgdGhpcy5vcHRzLnByb2Nlc3NBcmd1bWVudHMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIG9yaWdpbmFsU3RhY2t0cmFjZSA9IGVyci5zdGFjaztcbiAgICAgICAgICAgICAgdGhpcy5sb2cuZGVidWcoYEZhaWxlZCB0byBjcmVhdGUgV0RBIHNlc3Npb24gKCR7ZXJyLm1lc3NhZ2V9KS4gUmV0cnlpbmcuLi5gKTtcbiAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVNlc3Npb25TdGFydGVkJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmIChvcmlnaW5hbFN0YWNrdHJhY2UpIHtcbiAgICAgICAgICAgIHRoaXMubG9nLmRlYnVnKG9yaWdpbmFsU3RhY2t0cmFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBlcnJvck1zZyA9IGBVbmFibGUgdG8gc3RhcnQgV2ViRHJpdmVyQWdlbnQgc2Vzc2lvbiBiZWNhdXNlIG9mIHhjb2RlYnVpbGQgZmFpbHVyZTogJHtlcnIubWVzc2FnZX1gO1xuICAgICAgICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICAgICAgICBlcnJvck1zZyArPSBgIE1ha2Ugc3VyZSB5b3UgZm9sbG93IHRoZSB0dXRvcmlhbCBhdCAke1dEQV9SRUFMX0RFVl9UVVRPUklBTF9VUkx9LiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBUcnkgdG8gcmVtb3ZlIHRoZSBXZWJEcml2ZXJBZ2VudFJ1bm5lciBhcHBsaWNhdGlvbiBmcm9tIHRoZSBkZXZpY2UgaWYgaXQgaXMgaW5zdGFsbGVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGFuZCByZWJvb3QgdGhlIGRldmljZS5gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCBxdWl0QW5kVW5pbnN0YWxsKGVycm9yTXNnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdHMuY2xlYXJTeXN0ZW1GaWxlcyAmJiAhdGhpcy5vcHRzLndlYkRyaXZlckFnZW50VXJsKSB7XG4gICAgICAgICAgYXdhaXQgbWFya1N5c3RlbUZpbGVzRm9yQ2xlYW51cCh0aGlzLndkYSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBleHBlY3QgY2VydGFpbiBzb2NrZXQgZXJyb3JzIHVudGlsIHRoaXMgcG9pbnQsIGJ1dCBub3dcbiAgICAgICAgLy8gbWFyayB0aGluZ3MgYXMgZnVsbHkgd29ya2luZ1xuICAgICAgICB0aGlzLndkYS5mdWxseVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmxvZ0V2ZW50KCd3ZGFTdGFydGVkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJ1blJlc2V0IChvcHRzID0gbnVsbCkge1xuICAgIHRoaXMubG9nRXZlbnQoJ3Jlc2V0U3RhcnRlZCcpO1xuICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCBydW5SZWFsRGV2aWNlUmVzZXQodGhpcy5vcHRzLmRldmljZSwgb3B0cyB8fCB0aGlzLm9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBydW5TaW11bGF0b3JSZXNldCh0aGlzLm9wdHMuZGV2aWNlLCBvcHRzIHx8IHRoaXMub3B0cyk7XG4gICAgfVxuICAgIHRoaXMubG9nRXZlbnQoJ3Jlc2V0Q29tcGxldGUnKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVNlc3Npb24gKCkge1xuICAgIGF3YWl0IHJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyh0aGlzLnNlcnZlciwgdGhpcy5zZXNzaW9uSWQpO1xuXG4gICAgZm9yIChjb25zdCByZWNvcmRlciBvZiBfLmNvbXBhY3QoW1xuICAgICAgdGhpcy5fcmVjZW50U2NyZWVuUmVjb3JkZXIsIHRoaXMuX2F1ZGlvUmVjb3JkZXIsIHRoaXMuX3RyYWZmaWNDYXB0dXJlXG4gICAgXSkpIHtcbiAgICAgIGF3YWl0IHJlY29yZGVyLmludGVycnVwdCh0cnVlKTtcbiAgICAgIGF3YWl0IHJlY29yZGVyLmNsZWFudXAoKTtcbiAgICB9XG5cbiAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLl9wZXJmUmVjb3JkZXJzKSkge1xuICAgICAgYXdhaXQgQi5hbGwodGhpcy5fcGVyZlJlY29yZGVycy5tYXAoKHgpID0+IHguc3RvcCh0cnVlKSkpO1xuICAgICAgdGhpcy5fcGVyZlJlY29yZGVycyA9IFtdO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuc3RvcCgpO1xuXG4gICAgaWYgKHRoaXMud2RhICYmICF0aGlzLm9wdHMud2ViRHJpdmVyQWdlbnRVcmwpIHtcbiAgICAgIGlmICh0aGlzLm9wdHMuY2xlYXJTeXN0ZW1GaWxlcykge1xuICAgICAgICBsZXQgc3luY2hyb25pemF0aW9uS2V5ID0gWENVSVRlc3REcml2ZXIubmFtZTtcbiAgICAgICAgY29uc3QgZGVyaXZlZERhdGFQYXRoID0gYXdhaXQgdGhpcy53ZGEucmV0cmlldmVEZXJpdmVkRGF0YVBhdGgoKTtcbiAgICAgICAgaWYgKGRlcml2ZWREYXRhUGF0aCkge1xuICAgICAgICAgIHN5bmNocm9uaXphdGlvbktleSA9IHBhdGgubm9ybWFsaXplKGRlcml2ZWREYXRhUGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgU0hBUkVEX1JFU09VUkNFU19HVUFSRC5hY3F1aXJlKHN5bmNocm9uaXphdGlvbktleSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGNsZWFyU3lzdGVtRmlsZXModGhpcy53ZGEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKCdOb3QgY2xlYXJpbmcgbG9nIGZpbGVzLiBVc2UgYGNsZWFyU3lzdGVtRmlsZXNgIGNhcGFiaWxpdHkgdG8gdHVybiBvbi4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZW1vdGUpIHtcbiAgICAgIHRoaXMubG9nLmRlYnVnKCdGb3VuZCBhIHJlbW90ZSBkZWJ1Z2dlciBzZXNzaW9uLiBSZW1vdmluZy4uLicpO1xuICAgICAgYXdhaXQgdGhpcy5zdG9wUmVtb3RlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0cy5yZXNldE9uU2Vzc2lvblN0YXJ0T25seSA9PT0gZmFsc2UpIHtcbiAgICAgIGF3YWl0IHRoaXMucnVuUmVzZXQoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRzLCB7XG4gICAgICAgIGVuZm9yY2VTaW11bGF0b3JTaHV0ZG93bjogdHJ1ZSxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1NpbXVsYXRvcigpICYmICF0aGlzLm9wdHMubm9SZXNldCAmJiAhIXRoaXMub3B0cy5kZXZpY2UpIHtcbiAgICAgIGlmICh0aGlzLmxpZmVjeWNsZURhdGEuY3JlYXRlU2ltKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKGBEZWxldGluZyBzaW11bGF0b3IgY3JlYXRlZCBmb3IgdGhpcyBydW4gKHVkaWQ6ICcke3RoaXMub3B0cy51ZGlkfScpYCk7XG4gICAgICAgIGF3YWl0IHNodXRkb3duU2ltdWxhdG9yKHRoaXMub3B0cy5kZXZpY2UpO1xuICAgICAgICBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLmRlbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNob3VsZFJlc2V0TG9jYXRpb25TZXJ2aXZjZSA9IHRoaXMuaXNSZWFsRGV2aWNlKCkgJiYgISF0aGlzLm9wdHMucmVzZXRMb2NhdGlvblNlcnZpY2U7XG4gICAgaWYgKHNob3VsZFJlc2V0TG9jYXRpb25TZXJ2aXZjZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5tb2JpbGVSZXNldExvY2F0aW9uU2VydmljZSgpO1xuICAgICAgfSBjYXRjaCAoaWdub3JlKSB7IC8qIElnbm9yZSB0aGlzIGVycm9yIHNpbmNlIG1vYmlsZVJlc2V0TG9jYXRpb25TZXJ2aWNlIGFscmVhZHkgbG9nZ2VkIHRoZSBlcnJvciAqLyB9XG4gICAgfVxuXG4gICAgaWYgKCFfLmlzRW1wdHkodGhpcy5sb2dzKSkge1xuICAgICAgYXdhaXQgdGhpcy5sb2dzLnN5c2xvZy5zdG9wQ2FwdHVyZSgpO1xuICAgICAgdGhpcy5sb2dzID0ge307XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWpwZWdTdHJlYW0pIHtcbiAgICAgIHRoaXMubG9nLmluZm8oJ0Nsb3NpbmcgTUpQRUcgc3RyZWFtJyk7XG4gICAgICB0aGlzLm1qcGVnU3RyZWFtLnN0b3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0SW9zKCk7XG5cbiAgICBhd2FpdCBzdXBlci5kZWxldGVTZXNzaW9uKCk7XG4gIH1cblxuICBhc3luYyBzdG9wICgpIHtcbiAgICB0aGlzLmp3cFByb3h5QWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5wcm94eVJlcVJlcyA9IG51bGw7XG5cblxuICAgIGlmICh0aGlzLndkYSAmJiB0aGlzLndkYS5mdWxseVN0YXJ0ZWQpIHtcbiAgICAgIGlmICh0aGlzLndkYS5qd3Byb3h5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC9zZXNzaW9uLyR7dGhpcy5zZXNzaW9uSWR9YCwgJ0RFTEVURScpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBhbiBlcnJvciBoZXJlIHNob3VsZCBub3Qgc2hvcnQtY2lyY3VpdCB0aGUgcmVzdCBvZiBjbGVhbiB1cFxuICAgICAgICAgIHRoaXMubG9nLmRlYnVnKGBVbmFibGUgdG8gREVMRVRFIHNlc3Npb24gb24gV0RBOiAnJHtlcnIubWVzc2FnZX0nLiBDb250aW51aW5nIHNodXRkb3duLmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMud2RhLndlYkRyaXZlckFnZW50VXJsICYmIHRoaXMub3B0cy51c2VOZXdXREEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy53ZGEucXVpdCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIERFVklDRV9DT05ORUNUSU9OU19GQUNUT1JZLnJlbGVhc2VDb25uZWN0aW9uKHRoaXMub3B0cy51ZGlkKTtcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVDb21tYW5kIChjbWQsIC4uLmFyZ3MpIHtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgRXhlY3V0aW5nIGNvbW1hbmQgJyR7Y21kfSdgKTtcblxuICAgIGlmIChjbWQgPT09ICdyZWNlaXZlQXN5bmNSZXNwb25zZScpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlY2VpdmVBc3luY1Jlc3BvbnNlKC4uLmFyZ3MpO1xuICAgIH1cbiAgICAvLyBUT0RPOiBvbmNlIHRoaXMgZml4IGdldHMgaW50byBiYXNlIGRyaXZlciByZW1vdmUgZnJvbSBoZXJlXG4gICAgaWYgKGNtZCA9PT0gJ2dldFN0YXR1cycpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFN0YXR1cygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgc3VwZXIuZXhlY3V0ZUNvbW1hbmQoY21kLCAuLi5hcmdzKTtcbiAgfVxuXG4gIGFzeW5jIGNvbmZpZ3VyZUFwcCAoKSB7XG4gICAgZnVuY3Rpb24gYXBwSXNQYWNrYWdlT3JCdW5kbGUgKGFwcCkge1xuICAgICAgcmV0dXJuICgvXihbYS16QS1aMC05XFwtX10rXFwuW2EtekEtWjAtOVxcLV9dKykrJC8pLnRlc3QoYXBwKTtcbiAgICB9XG5cbiAgICAvLyB0aGUgYXBwIG5hbWUgaXMgYSBidW5kbGVJZCBhc3NpZ24gaXQgdG8gdGhlIGJ1bmRsZUlkIHByb3BlcnR5XG4gICAgaWYgKCF0aGlzLm9wdHMuYnVuZGxlSWQgJiYgYXBwSXNQYWNrYWdlT3JCdW5kbGUodGhpcy5vcHRzLmFwcCkpIHtcbiAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9IHRoaXMub3B0cy5hcHA7XG4gICAgICB0aGlzLm9wdHMuYXBwID0gJyc7XG4gICAgfVxuICAgIC8vIHdlIGhhdmUgYSBidW5kbGUgSUQsIGJ1dCBubyBhcHAsIG9yIGFwcCBpcyBhbHNvIGEgYnVuZGxlXG4gICAgaWYgKCh0aGlzLm9wdHMuYnVuZGxlSWQgJiYgYXBwSXNQYWNrYWdlT3JCdW5kbGUodGhpcy5vcHRzLmJ1bmRsZUlkKSkgJiZcbiAgICAgICAgKHRoaXMub3B0cy5hcHAgPT09ICcnIHx8IGFwcElzUGFja2FnZU9yQnVuZGxlKHRoaXMub3B0cy5hcHApKSkge1xuICAgICAgdGhpcy5sb2cuZGVidWcoJ0FwcCBpcyBhbiBpT1MgYnVuZGxlLCB3aWxsIGF0dGVtcHQgdG8gcnVuIGFzIHByZS1leGlzdGluZycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGZvciBzdXBwb3J0ZWQgYnVpbGQtaW4gYXBwc1xuICAgIHN3aXRjaCAoXy50b0xvd2VyKHRoaXMub3B0cy5hcHApKSB7XG4gICAgICBjYXNlICdzZXR0aW5ncyc6XG4gICAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9ICdjb20uYXBwbGUuUHJlZmVyZW5jZXMnO1xuICAgICAgICB0aGlzLm9wdHMuYXBwID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSAnY2FsZW5kYXInOlxuICAgICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSAnY29tLmFwcGxlLm1vYmlsZWNhbCc7XG4gICAgICAgIHRoaXMub3B0cy5hcHAgPSBudWxsO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIGRvd25sb2FkIGlmIG5lY2Vzc2FyeVxuICAgICAgdGhpcy5vcHRzLmFwcCA9IGF3YWl0IHRoaXMuaGVscGVycy5jb25maWd1cmVBcHAodGhpcy5vcHRzLmFwcCwgJy5hcHAnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yKGVycik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhZCBhcHA6ICR7dGhpcy5vcHRzLmFwcH0uIGAgK1xuICAgICAgICBgQXBwIHBhdGhzIG5lZWQgdG8gYmUgYWJzb2x1dGUgb3IgYW4gVVJMIHRvIGEgY29tcHJlc3NlZCBhcHAgZmlsZTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZXRlcm1pbmVEZXZpY2UgKCkge1xuICAgIC8vIGluIHRoZSBvbmUgY2FzZSB3aGVyZSB3ZSBjcmVhdGUgYSBzaW0sIHdlIHdpbGwgc2V0IHRoaXMgc3RhdGVcbiAgICB0aGlzLmxpZmVjeWNsZURhdGEuY3JlYXRlU2ltID0gZmFsc2U7XG5cbiAgICAvLyBpZiB3ZSBnZXQgZ2VuZXJpYyBuYW1lcywgdHJhbnNsYXRlIHRoZW1cbiAgICB0aGlzLm9wdHMuZGV2aWNlTmFtZSA9IHRyYW5zbGF0ZURldmljZU5hbWUodGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiwgdGhpcy5vcHRzLmRldmljZU5hbWUpO1xuXG4gICAgY29uc3Qgc2V0dXBWZXJzaW9uQ2FwcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMub3B0cy5pb3NTZGtWZXJzaW9uID0gYXdhaXQgZ2V0QW5kQ2hlY2tJb3NTZGtWZXJzaW9uKCk7XG4gICAgICB0aGlzLmxvZy5pbmZvKGBpT1MgU0RLIFZlcnNpb24gc2V0IHRvICcke3RoaXMub3B0cy5pb3NTZGtWZXJzaW9ufSdgKTtcbiAgICAgIGlmICghdGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiAmJiB0aGlzLm9wdHMuaW9zU2RrVmVyc2lvbikge1xuICAgICAgICB0aGlzLmxvZy5pbmZvKGBObyBwbGF0Zm9ybVZlcnNpb24gc3BlY2lmaWVkLiBVc2luZyB0aGUgbGF0ZXN0IHZlcnNpb24gWGNvZGUgc3VwcG9ydHM6ICcke3RoaXMub3B0cy5pb3NTZGtWZXJzaW9ufScuIGAgK1xuICAgICAgICAgIGBUaGlzIG1heSBjYXVzZSBwcm9ibGVtcyBpZiBhIHNpbXVsYXRvciBkb2VzIG5vdCBleGlzdCBmb3IgdGhpcyBwbGF0Zm9ybSB2ZXJzaW9uLmApO1xuICAgICAgICB0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uID0gbm9ybWFsaXplUGxhdGZvcm1WZXJzaW9uKHRoaXMub3B0cy5pb3NTZGtWZXJzaW9uKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHRoaXMub3B0cy51ZGlkKSB7XG4gICAgICBpZiAodGhpcy5vcHRzLnVkaWQudG9Mb3dlckNhc2UoKSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5vcHRzLnVkaWQgPSBhd2FpdCBkZXRlY3RVZGlkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIC8vIFRyeWluZyB0byBmaW5kIG1hdGNoaW5nIFVESUQgZm9yIFNpbXVsYXRvclxuICAgICAgICAgIHRoaXMubG9nLndhcm4oYENhbm5vdCBkZXRlY3QgYW55IGNvbm5lY3RlZCByZWFsIGRldmljZXMuIEZhbGxpbmcgYmFjayB0byBTaW11bGF0b3IuIE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgIGNvbnN0IGRldmljZSA9IGF3YWl0IGdldEV4aXN0aW5nU2ltKHRoaXMub3B0cyk7XG4gICAgICAgICAgaWYgKCFkZXZpY2UpIHtcbiAgICAgICAgICAgIC8vIE5vIG1hdGNoaW5nIFNpbXVsYXRvciBpcyBmb3VuZC4gVGhyb3cgYW4gZXJyb3JcbiAgICAgICAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYENhbm5vdCBkZXRlY3QgdWRpZCBmb3IgJHt0aGlzLm9wdHMuZGV2aWNlTmFtZX0gU2ltdWxhdG9yIHJ1bm5pbmcgaU9TICR7dGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbn1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNYXRjaGluZyBTaW11bGF0b3IgZXhpc3RzIGFuZCBpcyBmb3VuZC4gVXNlIGl0XG4gICAgICAgICAgdGhpcy5vcHRzLnVkaWQgPSBkZXZpY2UudWRpZDtcbiAgICAgICAgICBjb25zdCBkZXZpY2VQbGF0Zm9ybSA9IG5vcm1hbGl6ZVBsYXRmb3JtVmVyc2lvbihhd2FpdCBkZXZpY2UuZ2V0UGxhdGZvcm1WZXJzaW9uKCkpO1xuICAgICAgICAgIGlmICh0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uICE9PSBkZXZpY2VQbGF0Zm9ybSkge1xuICAgICAgICAgICAgdGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiA9IGRldmljZVBsYXRmb3JtO1xuICAgICAgICAgICAgdGhpcy5sb2cuaW5mbyhgU2V0IHBsYXRmb3JtVmVyc2lvbiB0byAnJHtkZXZpY2VQbGF0Zm9ybX0nIHRvIG1hdGNoIHRoZSBkZXZpY2Ugd2l0aCBnaXZlbiBVRElEYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHNldHVwVmVyc2lvbkNhcHMoKTtcbiAgICAgICAgICByZXR1cm4ge2RldmljZSwgcmVhbERldmljZTogZmFsc2UsIHVkaWQ6IGRldmljZS51ZGlkfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbWFrZSBzdXJlIGl0IGlzIGEgY29ubmVjdGVkIGRldmljZS4gSWYgbm90LCB0aGUgdWRpZCBwYXNzZWQgaW4gaXMgaW52YWxpZFxuICAgICAgICBjb25zdCBkZXZpY2VzID0gYXdhaXQgZ2V0Q29ubmVjdGVkRGV2aWNlcygpO1xuICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgQXZhaWxhYmxlIGRldmljZXM6ICR7ZGV2aWNlcy5qb2luKCcsICcpfWApO1xuICAgICAgICBpZiAoIWRldmljZXMuaW5jbHVkZXModGhpcy5vcHRzLnVkaWQpKSB7XG4gICAgICAgICAgLy8gY2hlY2sgZm9yIGEgcGFydGljdWxhciBzaW11bGF0b3JcbiAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgTm8gcmVhbCBkZXZpY2Ugd2l0aCB1ZGlkICcke3RoaXMub3B0cy51ZGlkfScuIExvb2tpbmcgZm9yIHNpbXVsYXRvcmApO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCBnZXRTaW11bGF0b3IodGhpcy5vcHRzLnVkaWQsIHtcbiAgICAgICAgICAgICAgZGV2aWNlc1NldFBhdGg6IHRoaXMub3B0cy5zaW11bGF0b3JEZXZpY2VzU2V0UGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IGZhbHNlLCB1ZGlkOiB0aGlzLm9wdHMudWRpZH07XG4gICAgICAgICAgfSBjYXRjaCAoaWduKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGV2aWNlIG9yIHNpbXVsYXRvciBVRElEOiAnJHt0aGlzLm9wdHMudWRpZH0nYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRldmljZSA9IGF3YWl0IGdldFJlYWxEZXZpY2VPYmoodGhpcy5vcHRzLnVkaWQpO1xuICAgICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IHRydWUsIHVkaWQ6IHRoaXMub3B0cy51ZGlkfTtcbiAgICB9XG5cbiAgICAvLyBOb3cgd2Uga25vdyBmb3Igc3VyZSB0aGUgZGV2aWNlIHdpbGwgYmUgYSBTaW11bGF0b3JcbiAgICBhd2FpdCBzZXR1cFZlcnNpb25DYXBzKCk7XG4gICAgaWYgKHRoaXMub3B0cy5lbmZvcmNlRnJlc2hTaW11bGF0b3JDcmVhdGlvbikge1xuICAgICAgdGhpcy5sb2cuZGVidWcoYE5ldyBzaW11bGF0b3IgaXMgcmVxdWVzdGVkLiBJZiB0aGlzIGlzIG5vdCB3YW50ZWQsIHNldCAnZW5mb3JjZUZyZXNoU2ltdWxhdG9yQ3JlYXRpb24nIGNhcGFiaWxpdHkgdG8gZmFsc2VgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBzaW11bGF0b3IgdG8gdXNlLCBnaXZlbiB0aGUgZGVzaXJlZCBjYXBhYmlsaXRpZXNcbiAgICAgIGNvbnN0IGRldmljZSA9IGF3YWl0IGdldEV4aXN0aW5nU2ltKHRoaXMub3B0cyk7XG5cbiAgICAgIC8vIGNoZWNrIGZvciBhbiBleGlzdGluZyBzaW11bGF0b3JcbiAgICAgIGlmIChkZXZpY2UpIHtcbiAgICAgICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IGZhbHNlLCB1ZGlkOiBkZXZpY2UudWRpZH07XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nLmluZm8oJ1NpbXVsYXRvciB1ZGlkIG5vdCBwcm92aWRlZCcpO1xuICAgIH1cblxuICAgIC8vIG5vIGRldmljZSBvZiB0aGlzIHR5cGUgZXhpc3RzLCBvciB0aGV5IHJlcXVlc3QgbmV3IHNpbSwgc28gY3JlYXRlIG9uZVxuICAgIHRoaXMubG9nLmluZm8oJ1VzaW5nIGRlc2lyZWQgY2FwcyB0byBjcmVhdGUgYSBuZXcgc2ltdWxhdG9yJyk7XG4gICAgY29uc3QgZGV2aWNlID0gYXdhaXQgdGhpcy5jcmVhdGVTaW0oKTtcbiAgICByZXR1cm4ge2RldmljZSwgcmVhbERldmljZTogZmFsc2UsIHVkaWQ6IGRldmljZS51ZGlkfTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0U2ltICgpIHtcbiAgICBjb25zdCBydW5PcHRzID0ge1xuICAgICAgc2NhbGVGYWN0b3I6IHRoaXMub3B0cy5zY2FsZUZhY3RvcixcbiAgICAgIGNvbm5lY3RIYXJkd2FyZUtleWJvYXJkOiAhIXRoaXMub3B0cy5jb25uZWN0SGFyZHdhcmVLZXlib2FyZCxcbiAgICAgIHBhc3RlYm9hcmRBdXRvbWF0aWNTeW5jOiB0aGlzLm9wdHMuc2ltdWxhdG9yUGFzdGVib2FyZEF1dG9tYXRpY1N5bmMgPz8gJ29mZicsXG4gICAgICBpc0hlYWRsZXNzOiAhIXRoaXMub3B0cy5pc0hlYWRsZXNzLFxuICAgICAgdHJhY2VQb2ludGVyOiB0aGlzLm9wdHMuc2ltdWxhdG9yVHJhY2VQb2ludGVyLFxuICAgICAgZGV2aWNlUHJlZmVyZW5jZXM6IHt9LFxuICAgIH07XG5cbiAgICAvLyBhZGQgdGhlIHdpbmRvdyBjZW50ZXIsIGlmIGl0IGlzIHNwZWNpZmllZFxuICAgIGlmICh0aGlzLm9wdHMuU2ltdWxhdG9yV2luZG93Q2VudGVyKSB7XG4gICAgICBydW5PcHRzLmRldmljZVByZWZlcmVuY2VzLlNpbXVsYXRvcldpbmRvd0NlbnRlciA9IHRoaXMub3B0cy5TaW11bGF0b3JXaW5kb3dDZW50ZXI7XG4gICAgfVxuXG4gICAgaWYgKF8uaXNJbnRlZ2VyKHRoaXMub3B0cy5zaW11bGF0b3JTdGFydHVwVGltZW91dCkpIHtcbiAgICAgIHJ1bk9wdHMuc3RhcnR1cFRpbWVvdXQgPSB0aGlzLm9wdHMuc2ltdWxhdG9yU3RhcnR1cFRpbWVvdXQ7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBpcyB0byB3b3JrYXJvdW5kIFhDVGVzdCBidWcgYWJvdXQgY2hhbmdpbmcgU2ltdWxhdG9yXG4gICAgLy8gb3JpZW50YXRpb24gaXMgbm90IHN5bmNocm9uaXplZCB0byB0aGUgYWN0dWFsIHdpbmRvdyBvcmllbnRhdGlvblxuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gXy5pc1N0cmluZyh0aGlzLm9wdHMub3JpZW50YXRpb24pICYmIHRoaXMub3B0cy5vcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcbiAgICAgIGNhc2UgJ0xBTkRTQ0FQRSc6XG4gICAgICAgIHJ1bk9wdHMuZGV2aWNlUHJlZmVyZW5jZXMuU2ltdWxhdG9yV2luZG93T3JpZW50YXRpb24gPSAnTGFuZHNjYXBlTGVmdCc7XG4gICAgICAgIHJ1bk9wdHMuZGV2aWNlUHJlZmVyZW5jZXMuU2ltdWxhdG9yV2luZG93Um90YXRpb25BbmdsZSA9IDkwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1BPUlRSQUlUJzpcbiAgICAgICAgcnVuT3B0cy5kZXZpY2VQcmVmZXJlbmNlcy5TaW11bGF0b3JXaW5kb3dPcmllbnRhdGlvbiA9ICdQb3J0cmFpdCc7XG4gICAgICAgIHJ1bk9wdHMuZGV2aWNlUHJlZmVyZW5jZXMuU2ltdWxhdG9yV2luZG93Um90YXRpb25BbmdsZSA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2UucnVuKHJ1bk9wdHMpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2ltICgpIHtcbiAgICB0aGlzLmxpZmVjeWNsZURhdGEuY3JlYXRlU2ltID0gdHJ1ZTtcblxuICAgIC8vIEdldCBwbGF0Zm9ybSBuYW1lIGZyb20gY29uc3Qgc2luY2UgaXQgbXVzdCBiZSBjYXNlIHNlbnNpdGl2ZSB0byBjcmVhdGUgYSBuZXcgc2ltdWxhdG9yXG4gICAgY29uc3QgcGxhdGZvcm1OYW1lID0gdGhpcy5pc1R2T1MoKSA/IFBMQVRGT1JNX05BTUVfVFZPUyA6IFBMQVRGT1JNX05BTUVfSU9TO1xuXG4gICAgLy8gY3JlYXRlIHNpbSBmb3IgY2Fwc1xuICAgIGNvbnN0IHNpbSA9IGF3YWl0IGNyZWF0ZVNpbSh0aGlzLm9wdHMsIHBsYXRmb3JtTmFtZSk7XG4gICAgdGhpcy5sb2cuaW5mbyhgQ3JlYXRlZCBzaW11bGF0b3Igd2l0aCB1ZGlkICcke3NpbS51ZGlkfScuYCk7XG5cbiAgICByZXR1cm4gc2ltO1xuICB9XG5cbiAgYXN5bmMgbGF1bmNoQXBwICgpIHtcbiAgICBjb25zdCBBUFBfTEFVTkNIX1RJTUVPVVQgPSAyMCAqIDEwMDA7XG5cbiAgICB0aGlzLmxvZ0V2ZW50KCdhcHBMYXVuY2hBdHRlbXB0ZWQnKTtcbiAgICBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLnNpbWN0bC5sYXVuY2hBcHAodGhpcy5vcHRzLmJ1bmRsZUlkKTtcblxuICAgIGxldCBjaGVja1N0YXR1cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvc3RhdHVzJywgJ0dFVCcpO1xuICAgICAgbGV0IGN1cnJlbnRBcHAgPSByZXNwb25zZS5jdXJyZW50QXBwLmJ1bmRsZUlEO1xuICAgICAgaWYgKGN1cnJlbnRBcHAgIT09IHRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpcy5vcHRzLmJ1bmRsZUlkfSBub3QgaW4gZm9yZWdyb3VuZC4gJHtjdXJyZW50QXBwfSBpcyBpbiBmb3JlZ3JvdW5kYCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nLmluZm8oYFdhaXRpbmcgZm9yICcke3RoaXMub3B0cy5idW5kbGVJZH0nIHRvIGJlIGluIGZvcmVncm91bmRgKTtcbiAgICBsZXQgcmV0cmllcyA9IHBhcnNlSW50KEFQUF9MQVVOQ0hfVElNRU9VVCAvIDIwMCwgMTApO1xuICAgIGF3YWl0IHJldHJ5SW50ZXJ2YWwocmV0cmllcywgMjAwLCBjaGVja1N0YXR1cyk7XG4gICAgdGhpcy5sb2cuaW5mbyhgJHt0aGlzLm9wdHMuYnVuZGxlSWR9IGlzIGluIGZvcmVncm91bmRgKTtcbiAgICB0aGlzLmxvZ0V2ZW50KCdhcHBMYXVuY2hlZCcpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRXZGFTZXNzaW9uIChidW5kbGVJZCwgcHJvY2Vzc0FyZ3VtZW50cykge1xuICAgIGNvbnN0IGFyZ3MgPSBwcm9jZXNzQXJndW1lbnRzID8gKHByb2Nlc3NBcmd1bWVudHMuYXJncyB8fCBbXSkgOiBbXTtcbiAgICBpZiAoIV8uaXNBcnJheShhcmdzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBwcm9jZXNzQXJndW1lbnRzLmFyZ3MgY2FwYWJpbGl0eSBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheS4gYCArXG4gICAgICAgIGAke0pTT04uc3RyaW5naWZ5KGFyZ3MpfSBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gICAgfVxuICAgIGNvbnN0IGVudiA9IHByb2Nlc3NBcmd1bWVudHMgPyAocHJvY2Vzc0FyZ3VtZW50cy5lbnYgfHwge30pIDoge307XG4gICAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZW52KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBwcm9jZXNzQXJndW1lbnRzLmVudiBjYXBhYmlsaXR5IGlzIGV4cGVjdGVkIHRvIGJlIGEgZGljdGlvbmFyeS4gYCArXG4gICAgICAgIGAke0pTT04uc3RyaW5naWZ5KGVudil9IGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMubGFuZ3VhZ2UpKSB7XG4gICAgICBhcmdzLnB1c2goJy1BcHBsZUxhbmd1YWdlcycsIGAoJHt0aGlzLm9wdHMubGFuZ3VhZ2V9KWApO1xuICAgICAgYXJncy5wdXNoKCctTlNMYW5ndWFnZXMnLCBgKCR7dGhpcy5vcHRzLmxhbmd1YWdlfSlgKTtcbiAgICB9XG4gICAgaWYgKHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLmxvY2FsZSkpIHtcbiAgICAgIGFyZ3MucHVzaCgnLUFwcGxlTG9jYWxlJywgdGhpcy5vcHRzLmxvY2FsZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0cy5ub1Jlc2V0KSB7XG4gICAgICBpZiAoXy5pc05pbCh0aGlzLm9wdHMuc2hvdWxkVGVybWluYXRlQXBwKSkge1xuICAgICAgICB0aGlzLm9wdHMuc2hvdWxkVGVybWluYXRlQXBwID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoXy5pc05pbCh0aGlzLm9wdHMuZm9yY2VBcHBMYXVuY2gpKSB7XG4gICAgICAgIHRoaXMub3B0cy5mb3JjZUFwcExhdW5jaCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHdkYUNhcHMgPSB7XG4gICAgICBidW5kbGVJZDogdGhpcy5vcHRzLmF1dG9MYXVuY2ggPT09IGZhbHNlID8gdW5kZWZpbmVkIDogYnVuZGxlSWQsXG4gICAgICBhcmd1bWVudHM6IGFyZ3MsXG4gICAgICBlbnZpcm9ubWVudDogZW52LFxuICAgICAgZXZlbnRsb29wSWRsZURlbGF5U2VjOiB0aGlzLm9wdHMud2RhRXZlbnRsb29wSWRsZURlbGF5ID8/IDAsXG4gICAgICBzaG91bGRXYWl0Rm9yUXVpZXNjZW5jZTogdGhpcy5vcHRzLndhaXRGb3JRdWllc2NlbmNlID8/IHRydWUsXG4gICAgICBzaG91bGRVc2VUZXN0TWFuYWdlckZvclZpc2liaWxpdHlEZXRlY3Rpb246IHRoaXMub3B0cy5zaW1wbGVJc1Zpc2libGVDaGVjayA/PyBmYWxzZSxcbiAgICAgIG1heFR5cGluZ0ZyZXF1ZW5jeTogdGhpcy5vcHRzLm1heFR5cGluZ0ZyZXF1ZW5jeSA/PyA2MCxcbiAgICAgIHNob3VsZFVzZVNpbmdsZXRvblRlc3RNYW5hZ2VyOiB0aGlzLm9wdHMuc2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIgPz8gdHJ1ZSxcbiAgICAgIHdhaXRGb3JJZGxlVGltZW91dDogdGhpcy5vcHRzLndhaXRGb3JJZGxlVGltZW91dCxcbiAgICAgIHNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXM6IHRoaXMub3B0cy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzLFxuICAgICAgZWxlbWVudFJlc3BvbnNlRmllbGRzOiB0aGlzLm9wdHMuZWxlbWVudFJlc3BvbnNlRmllbGRzLFxuICAgICAgZGlzYWJsZUF1dG9tYXRpY1NjcmVlbnNob3RzOiB0aGlzLm9wdHMuZGlzYWJsZUF1dG9tYXRpY1NjcmVlbnNob3RzLFxuICAgICAgc2hvdWxkVGVybWluYXRlQXBwOiB0aGlzLm9wdHMuc2hvdWxkVGVybWluYXRlQXBwID8/IHRydWUsXG4gICAgICBmb3JjZUFwcExhdW5jaDogdGhpcy5vcHRzLmZvcmNlQXBwTGF1bmNoID8/IHRydWUsXG4gICAgICB1c2VOYXRpdmVDYWNoaW5nU3RyYXRlZ3k6IHRoaXMub3B0cy51c2VOYXRpdmVDYWNoaW5nU3RyYXRlZ3kgPz8gdHJ1ZSxcbiAgICAgIGZvcmNlU2ltdWxhdG9yU29mdHdhcmVLZXlib2FyZFByZXNlbmNlOiB0aGlzLm9wdHMuZm9yY2VTaW11bGF0b3JTb2Z0d2FyZUtleWJvYXJkUHJlc2VuY2VcbiAgICAgICAgPz8gKHRoaXMub3B0cy5jb25uZWN0SGFyZHdhcmVLZXlib2FyZCA9PT0gdHJ1ZSA/IGZhbHNlIDogdHJ1ZSksXG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRzLmF1dG9BY2NlcHRBbGVydHMpIHtcbiAgICAgIHdkYUNhcHMuZGVmYXVsdEFsZXJ0QWN0aW9uID0gJ2FjY2VwdCc7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuYXV0b0Rpc21pc3NBbGVydHMpIHtcbiAgICAgIHdkYUNhcHMuZGVmYXVsdEFsZXJ0QWN0aW9uID0gJ2Rpc21pc3MnO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvc2Vzc2lvbicsICdQT1NUJywge1xuICAgICAgY2FwYWJpbGl0aWVzOiB7XG4gICAgICAgIGZpcnN0TWF0Y2g6IFt3ZGFDYXBzXSxcbiAgICAgICAgYWx3YXlzTWF0Y2g6IHt9LFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gT3ZlcnJpZGUgUHJveHkgbWV0aG9kcyBmcm9tIEJhc2VEcml2ZXJcbiAgcHJveHlBY3RpdmUgKCkge1xuICAgIHJldHVybiB0aGlzLmp3cFByb3h5QWN0aXZlO1xuICB9XG5cbiAgZ2V0UHJveHlBdm9pZExpc3QgKCkge1xuICAgIGlmICh0aGlzLmlzV2VidmlldygpKSB7XG4gICAgICByZXR1cm4gTk9fUFJPWFlfV0VCX0xJU1Q7XG4gICAgfVxuICAgIHJldHVybiBOT19QUk9YWV9OQVRJVkVfTElTVDtcbiAgfVxuXG4gIGNhblByb3h5ICgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlzU2FmYXJpICgpIHtcbiAgICByZXR1cm4gISF0aGlzLnNhZmFyaTtcbiAgfVxuXG4gIGlzUmVhbERldmljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0cy5yZWFsRGV2aWNlO1xuICB9XG5cbiAgaXNTaW11bGF0b3IgKCkge1xuICAgIHJldHVybiAhdGhpcy5vcHRzLnJlYWxEZXZpY2U7XG4gIH1cblxuICBpc1R2T1MgKCkge1xuICAgIHJldHVybiBfLnRvTG93ZXIodGhpcy5vcHRzLnBsYXRmb3JtTmFtZSkgPT09IF8udG9Mb3dlcihQTEFURk9STV9OQU1FX1RWT1MpO1xuICB9XG5cbiAgaXNXZWJ2aWV3ICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1NhZmFyaSgpIHx8IHRoaXMuaXNXZWJDb250ZXh0KCk7XG4gIH1cblxuICB2YWxpZGF0ZUxvY2F0b3JTdHJhdGVneSAoc3RyYXRlZ3kpIHtcbiAgICBzdXBlci52YWxpZGF0ZUxvY2F0b3JTdHJhdGVneShzdHJhdGVneSwgdGhpcy5pc1dlYkNvbnRleHQoKSk7XG4gIH1cblxuICB2YWxpZGF0ZURlc2lyZWRDYXBzIChjYXBzKSB7XG4gICAgaWYgKCFzdXBlci52YWxpZGF0ZURlc2lyZWRDYXBzKGNhcHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIGNhcGFiaWxpdGllcyBoYXZlIG9uZSBvZiBgYXBwYCBvciBgYnVuZGxlSWRgXG4gICAgaWYgKF8udG9Mb3dlcihjYXBzLmJyb3dzZXJOYW1lKSAhPT0gJ3NhZmFyaScgJiYgIWNhcHMuYXBwICYmICFjYXBzLmJ1bmRsZUlkKSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKCdUaGUgZGVzaXJlZCBjYXBhYmlsaXRpZXMgaW5jbHVkZSBuZWl0aGVyIGFuIGFwcCBub3IgYSBidW5kbGVJZC4gJyArXG4gICAgICAgICdXZWJEcml2ZXJBZ2VudCB3aWxsIGJlIHN0YXJ0ZWQgd2l0aG91dCB0aGUgZGVmYXVsdCBhcHAnKTtcbiAgICB9XG5cbiAgICBpZiAoIXV0aWwuY29lcmNlVmVyc2lvbihjYXBzLnBsYXRmb3JtVmVyc2lvbiwgZmFsc2UpKSB7XG4gICAgICB0aGlzLmxvZy53YXJuKGAncGxhdGZvcm1WZXJzaW9uJyBjYXBhYmlsaXR5ICgnJHtjYXBzLnBsYXRmb3JtVmVyc2lvbn0nKSBpcyBub3QgYSB2YWxpZCB2ZXJzaW9uIG51bWJlci4gYCArXG4gICAgICAgIGBDb25zaWRlciBmaXhpbmcgaXQgb3IgYmUgcmVhZHkgdG8gZXhwZXJpZW5jZSBhbiBpbmNvbnNpc3RlbnQgZHJpdmVyIGJlaGF2aW9yLmApO1xuICAgIH1cblxuICAgIGxldCB2ZXJpZnlQcm9jZXNzQXJndW1lbnQgPSAocHJvY2Vzc0FyZ3VtZW50cykgPT4ge1xuICAgICAgY29uc3Qge2FyZ3MsIGVudn0gPSBwcm9jZXNzQXJndW1lbnRzO1xuICAgICAgaWYgKCFfLmlzTmlsKGFyZ3MpICYmICFfLmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdygncHJvY2Vzc0FyZ3VtZW50cy5hcmdzIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncycpO1xuICAgICAgfVxuICAgICAgaWYgKCFfLmlzTmlsKGVudikgJiYgIV8uaXNQbGFpbk9iamVjdChlbnYpKSB7XG4gICAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coJ3Byb2Nlc3NBcmd1bWVudHMuZW52IG11c3QgYmUgYW4gb2JqZWN0IDxrZXksdmFsdWU+IHBhaXIge2E6YiwgYzpkfScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBgcHJvY2Vzc0FyZ3VtZW50c2Agc2hvdWxkIGJlIEpTT04gc3RyaW5nIG9yIGFuIG9iamVjdCB3aXRoIGFyZ3VtZW50cyBhbmQvIGVudmlyb25tZW50IGRldGFpbHNcbiAgICBpZiAoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKSB7XG4gICAgICBpZiAoXy5pc1N0cmluZyhjYXBzLnByb2Nlc3NBcmd1bWVudHMpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gdHJ5IHRvIHBhcnNlIHRoZSBzdHJpbmcgYXMgSlNPTlxuICAgICAgICAgIGNhcHMucHJvY2Vzc0FyZ3VtZW50cyA9IEpTT04ucGFyc2UoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgICAgICB2ZXJpZnlQcm9jZXNzQXJndW1lbnQoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgcHJvY2Vzc0FyZ3VtZW50cyBtdXN0IGJlIGEgSlNPTiBmb3JtYXQgb3IgYW4gb2JqZWN0IHdpdGggZm9ybWF0IHthcmdzIDogW10sIGVudiA6IHthOmIsIGM6ZH19LiBgICtcbiAgICAgICAgICAgIGBCb3RoIGVudmlyb25tZW50IGFuZCBhcmd1bWVudCBjYW4gYmUgbnVsbC4gRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKF8uaXNQbGFpbk9iamVjdChjYXBzLnByb2Nlc3NBcmd1bWVudHMpKSB7XG4gICAgICAgIHZlcmlmeVByb2Nlc3NBcmd1bWVudChjYXBzLnByb2Nlc3NBcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgJ3Byb2Nlc3NBcmd1bWVudHMgbXVzdCBiZSBhbiBvYmplY3QsIG9yIGEgc3RyaW5nIEpTT04gb2JqZWN0IHdpdGggZm9ybWF0IHthcmdzIDogW10sIGVudiA6IHthOmIsIGM6ZH19LiBgICtcbiAgICAgICAgICBgQm90aCBlbnZpcm9ubWVudCBhbmQgYXJndW1lbnQgY2FuIGJlIG51bGwuYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlcmUgaXMgbm8gcG9pbnQgaW4gaGF2aW5nIGBrZXljaGFpblBhdGhgIHdpdGhvdXQgYGtleWNoYWluUGFzc3dvcmRgXG4gICAgaWYgKChjYXBzLmtleWNoYWluUGF0aCAmJiAhY2Fwcy5rZXljaGFpblBhc3N3b3JkKSB8fCAoIWNhcHMua2V5Y2hhaW5QYXRoICYmIGNhcHMua2V5Y2hhaW5QYXNzd29yZCkpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYElmICdrZXljaGFpblBhdGgnIGlzIHNldCwgJ2tleWNoYWluUGFzc3dvcmQnIG11c3QgYWxzbyBiZSBzZXQgKGFuZCB2aWNlIHZlcnNhKS5gKTtcbiAgICB9XG5cbiAgICAvLyBgcmVzZXRPblNlc3Npb25TdGFydE9ubHlgIHNob3VsZCBiZSBzZXQgdG8gdHJ1ZSBieSBkZWZhdWx0XG4gICAgdGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5ID0gIXV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5KSB8fCB0aGlzLm9wdHMucmVzZXRPblNlc3Npb25TdGFydE9ubHk7XG4gICAgdGhpcy5vcHRzLnVzZU5ld1dEQSA9IHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnVzZU5ld1dEQSkgPyB0aGlzLm9wdHMudXNlTmV3V0RBIDogZmFsc2U7XG5cbiAgICBpZiAoY2Fwcy5jb21tYW5kVGltZW91dHMpIHtcbiAgICAgIGNhcHMuY29tbWFuZFRpbWVvdXRzID0gbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzKGNhcHMuY29tbWFuZFRpbWVvdXRzKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc1N0cmluZyhjYXBzLndlYkRyaXZlckFnZW50VXJsKSkge1xuICAgICAgY29uc3Qge3Byb3RvY29sLCBob3N0fSA9IHVybC5wYXJzZShjYXBzLndlYkRyaXZlckFnZW50VXJsKTtcbiAgICAgIGlmIChfLmlzRW1wdHkocHJvdG9jb2wpIHx8IF8uaXNFbXB0eShob3N0KSkge1xuICAgICAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KGAnd2ViRHJpdmVyQWdlbnRVcmwnIGNhcGFiaWxpdHkgaXMgZXhwZWN0ZWQgdG8gY29udGFpbiBhIHZhbGlkIFdlYkRyaXZlckFnZW50IHNlcnZlciBVUkwuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgJyR7Y2Fwcy53ZWJEcml2ZXJBZ2VudFVybH0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2Fwcy5icm93c2VyTmFtZSkge1xuICAgICAgaWYgKGNhcHMuYnVuZGxlSWQpIHtcbiAgICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgJ2Jyb3dzZXJOYW1lJyBjYW5ub3QgYmUgc2V0IHRvZ2V0aGVyIHdpdGggJ2J1bmRsZUlkJyBjYXBhYmlsaXR5YCk7XG4gICAgICB9XG4gICAgICAvLyB3YXJuIGlmIHRoZSBjYXBhYmlsaXRpZXMgaGF2ZSBib3RoIGBhcHBgIGFuZCBgYnJvd3NlciwgYWx0aG91Z2ggdGhpc1xuICAgICAgLy8gaXMgY29tbW9uIHdpdGggc2VsZW5pdW0gZ3JpZFxuICAgICAgaWYgKGNhcHMuYXBwKSB7XG4gICAgICAgIHRoaXMubG9nLndhcm4oYFRoZSBjYXBhYmlsaXRpZXMgc2hvdWxkIGdlbmVyYWxseSBub3QgaW5jbHVkZSBib3RoIGFuICdhcHAnIGFuZCBhICdicm93c2VyTmFtZSdgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2Fwcy5wZXJtaXNzaW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCBbYnVuZGxlSWQsIHBlcm1zXSBvZiBfLnRvUGFpcnMoSlNPTi5wYXJzZShjYXBzLnBlcm1pc3Npb25zKSkpIHtcbiAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnVuZGxlSWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke0pTT04uc3RyaW5naWZ5KGJ1bmRsZUlkKX0nIG11c3QgYmUgYSBzdHJpbmdgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFfLmlzUGxhaW5PYmplY3QocGVybXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke0pTT04uc3RyaW5naWZ5KHBlcm1zKX0nIG11c3QgYmUgYSBKU09OIG9iamVjdGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KGAnJHtjYXBzLnBlcm1pc3Npb25zfScgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBvYmplY3Qgd2l0aCBmb3JtYXQgYCArXG4gICAgICAgICAgYHtcIjxidW5kbGVJZDE+XCI6IHtcIjxzZXJ2aWNlTmFtZTE+XCI6IFwiPHNlcnZpY2VTdGF0dXMxPlwiLCAuLi59LCAuLi59LiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcHMucGxhdGZvcm1WZXJzaW9uICYmICF1dGlsLmNvZXJjZVZlcnNpb24oY2Fwcy5wbGF0Zm9ybVZlcnNpb24sIGZhbHNlKSkge1xuICAgICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdyhgJ3BsYXRmb3JtVmVyc2lvbicgbXVzdCBiZSBhIHZhbGlkIHZlcnNpb24gbnVtYmVyLiBgICtcbiAgICAgICAgYCcke2NhcHMucGxhdGZvcm1WZXJzaW9ufScgaXMgZ2l2ZW4gaW5zdGVhZC5gKTtcbiAgICB9XG5cbiAgICAvLyBhZGRpdGlvbmFsV2Vidmlld0J1bmRsZUlkcyBpcyBhbiBhcnJheSwgSlNPTiBhcnJheSwgb3Igc3RyaW5nXG4gICAgaWYgKGNhcHMuYWRkaXRpb25hbFdlYnZpZXdCdW5kbGVJZHMpIHtcbiAgICAgIGNhcHMuYWRkaXRpb25hbFdlYnZpZXdCdW5kbGVJZHMgPSB0aGlzLmhlbHBlcnMucGFyc2VDYXBzQXJyYXkoY2Fwcy5hZGRpdGlvbmFsV2Vidmlld0J1bmRsZUlkcyk7XG4gICAgfVxuXG4gICAgLy8gZmluYWxseSwgcmV0dXJuIHRydWUgc2luY2UgdGhlIHN1cGVyY2xhc3MgY2hlY2sgcGFzc2VkLCBhcyBkaWQgdGhpc1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgYXN5bmMgaW5zdGFsbEFVVCAoKSB7XG4gICAgaWYgKHRoaXMuaXNTYWZhcmkoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHZlcmlmeUFwcGxpY2F0aW9uUGxhdGZvcm0odGhpcy5vcHRzLmFwcCwge1xuICAgICAgaXNTaW11bGF0b3I6IHRoaXMuaXNTaW11bGF0b3IoKSxcbiAgICAgIGlzVHZPUzogdGhpcy5pc1R2T1MoKSxcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCBpbnN0YWxsVG9SZWFsRGV2aWNlKHRoaXMub3B0cy5kZXZpY2UsIHRoaXMub3B0cy5hcHAsIHRoaXMub3B0cy5idW5kbGVJZCwge1xuICAgICAgICBub1Jlc2V0OiB0aGlzLm9wdHMubm9SZXNldCxcbiAgICAgICAgdGltZW91dDogdGhpcy5vcHRzLmFwcFB1c2hUaW1lb3V0LFxuICAgICAgICBzdHJhdGVneTogdGhpcy5vcHRzLmFwcEluc3RhbGxTdHJhdGVneSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBpbnN0YWxsVG9TaW11bGF0b3IodGhpcy5vcHRzLmRldmljZSwgdGhpcy5vcHRzLmFwcCwgdGhpcy5vcHRzLmJ1bmRsZUlkLCB7XG4gICAgICAgIG5vUmVzZXQ6IHRoaXMub3B0cy5ub1Jlc2V0LFxuICAgICAgICBuZXdTaW11bGF0b3I6IHRoaXMubGlmZWN5Y2xlRGF0YS5jcmVhdGVTaW0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0cy5vdGhlckFwcHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5zdGFsbE90aGVyQXBwcyh0aGlzLm9wdHMub3RoZXJBcHBzKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMuaW9zSW5zdGFsbFBhdXNlKSkge1xuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzY4ODlcbiAgICAgIGxldCBwYXVzZSA9IHBhcnNlSW50KHRoaXMub3B0cy5pb3NJbnN0YWxsUGF1c2UsIDEwKTtcbiAgICAgIHRoaXMubG9nLmRlYnVnKGBpb3NJbnN0YWxsUGF1c2Ugc2V0LiBQYXVzaW5nICR7cGF1c2V9IG1zIGJlZm9yZSBjb250aW51aW5nYCk7XG4gICAgICBhd2FpdCBCLmRlbGF5KHBhdXNlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBpbnN0YWxsT3RoZXJBcHBzIChvdGhlckFwcHMpIHtcbiAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgdGhpcy5sb2cud2FybignQ2FwYWJpbGl0eSBvdGhlckFwcHMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIFNpbXVsYXRvcnMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGFwcHNMaXN0O1xuICAgIHRyeSB7XG4gICAgICBhcHBzTGlzdCA9IHRoaXMuaGVscGVycy5wYXJzZUNhcHNBcnJheShvdGhlckFwcHMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coYENvdWxkIG5vdCBwYXJzZSBcIm90aGVyQXBwc1wiIGNhcGFiaWxpdHk6ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgICBpZiAoXy5pc0VtcHR5KGFwcHNMaXN0KSkge1xuICAgICAgdGhpcy5sb2cuaW5mbyhgR290IHplcm8gYXBwcyBmcm9tICdvdGhlckFwcHMnIGNhcGFiaWxpdHkgdmFsdWUuIERvaW5nIG5vdGhpbmdgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhcHBQYXRocyA9IGF3YWl0IEIuYWxsKGFwcHNMaXN0Lm1hcChcbiAgICAgIChhcHApID0+IHRoaXMuaGVscGVycy5jb25maWd1cmVBcHAoYXBwLCAnLmFwcCcpXG4gICAgKSk7XG4gICAgZm9yIChjb25zdCBvdGhlckFwcCBvZiBhcHBQYXRocykge1xuICAgICAgYXdhaXQgaW5zdGFsbFRvU2ltdWxhdG9yKHRoaXMub3B0cy5kZXZpY2UsIG90aGVyQXBwLCB1bmRlZmluZWQsIHtcbiAgICAgICAgbm9SZXNldDogdGhpcy5vcHRzLm5vUmVzZXQsXG4gICAgICAgIG5ld1NpbXVsYXRvcjogdGhpcy5saWZlY3ljbGVEYXRhLmNyZWF0ZVNpbSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcmVkdWNlTW90aW9uIGFzICdpc0VuYWJsZWQnIG9ubHkgd2hlbiB0aGUgY2FwYWJpbGl0aWVzIGhhcyAncmVkdWNlTW90aW9uJ1xuICAgKiBUaGUgY2FsbCBpcyBpZ25vcmVkIGZvciByZWFsIGRldmljZXMuXG4gICAqIEBwYXJhbSB7P2Jvb2xlYW59IGlzRW5hYmxlZCBXZXRoZXIgZW5hYmxlIHJlZHVjZU1vdGlvblxuICAgKi9cbiAgYXN5bmMgc2V0UmVkdWNlTW90aW9uIChpc0VuYWJsZWQpIHtcbiAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSB8fCAhXy5pc0Jvb2xlYW4oaXNFbmFibGVkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubG9nLmluZm8oYFNldHRpbmcgcmVkdWNlTW90aW9uIHRvICR7aXNFbmFibGVkfWApO1xuICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZ3Moe3JlZHVjZU1vdGlvbjogaXNFbmFibGVkfSk7XG4gIH1cblxuICBhc3luYyBzZXRJbml0aWFsT3JpZW50YXRpb24gKG9yaWVudGF0aW9uKSB7XG4gICAgaWYgKCFfLmlzU3RyaW5nKG9yaWVudGF0aW9uKSkge1xuICAgICAgdGhpcy5sb2cuaW5mbygnU2tpcHBpbmcgc2V0dGluZyBvZiB0aGUgaW5pdGlhbCBkaXNwbGF5IG9yaWVudGF0aW9uLiAnICtcbiAgICAgICAgJ1NldCB0aGUgXCJvcmllbnRhdGlvblwiIGNhcGFiaWxpdHkgdG8gZWl0aGVyIFwiTEFORFNDQVBFXCIgb3IgXCJQT1JUUkFJVFwiLCBpZiB0aGlzIGlzIGFuIHVuZGVzaXJlZCBiZWhhdmlvci4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3JpZW50YXRpb24gPSBvcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghXy5pbmNsdWRlcyhbJ0xBTkRTQ0FQRScsICdQT1JUUkFJVCddLCBvcmllbnRhdGlvbikpIHtcbiAgICAgIHRoaXMubG9nLmRlYnVnKGBVbmFibGUgdG8gc2V0IGluaXRpYWwgb3JpZW50YXRpb24gdG8gJyR7b3JpZW50YXRpb259J2ApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxvZy5kZWJ1ZyhgU2V0dGluZyBpbml0aWFsIG9yaWVudGF0aW9uIHRvICcke29yaWVudGF0aW9ufSdgKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy9vcmllbnRhdGlvbicsICdQT1NUJywge29yaWVudGF0aW9ufSk7XG4gICAgICB0aGlzLm9wdHMuY3VyT3JpZW50YXRpb24gPSBvcmllbnRhdGlvbjtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMubG9nLndhcm4oYFNldHRpbmcgaW5pdGlhbCBvcmllbnRhdGlvbiBmYWlsZWQgd2l0aDogJHtlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0Q29tbWFuZFRpbWVvdXQgKGNtZE5hbWUpIHtcbiAgICBpZiAodGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0cykge1xuICAgICAgaWYgKGNtZE5hbWUgJiYgXy5oYXModGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0cywgY21kTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0cy5jb21tYW5kVGltZW91dHNbY21kTmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0c1tERUZBVUxUX1RJTUVPVVRfS0VZXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlc3Npb24gY2FwYWJpbGl0aWVzIG1lcmdlZCB3aXRoIHdoYXQgV0RBIHJlcG9ydHNcbiAgICogVGhpcyBpcyBhIGxpYnJhcnkgY29tbWFuZCBidXQgbmVlZHMgdG8gY2FsbCAnc3VwZXInIHNvIGNhbid0IGJlIG9uXG4gICAqIGEgaGVscGVyIG9iamVjdFxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbiAoKSB7XG4gICAgLy8gY2FsbCBzdXBlciB0byBnZXQgZXZlbnQgdGltaW5ncywgZXRjLi4uXG4gICAgY29uc3QgZHJpdmVyU2Vzc2lvbiA9IGF3YWl0IHN1cGVyLmdldFNlc3Npb24oKTtcbiAgICBpZiAoIXRoaXMud2RhQ2Fwcykge1xuICAgICAgdGhpcy53ZGFDYXBzID0gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy8nLCAnR0VUJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvdWxkR2V0RGV2aWNlQ2FwcyA9IF8uaXNCb29sZWFuKHRoaXMub3B0cy5pbmNsdWRlRGV2aWNlQ2Fwc1RvU2Vzc2lvbkluZm8pXG4gICAgICA/IHRoaXMub3B0cy5pbmNsdWRlRGV2aWNlQ2Fwc1RvU2Vzc2lvbkluZm9cbiAgICAgIDogdHJ1ZTsgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgIGlmIChzaG91bGRHZXREZXZpY2VDYXBzICYmICF0aGlzLmRldmljZUNhcHMpIHtcbiAgICAgIGNvbnN0IHtzdGF0dXNCYXJTaXplLCBzY2FsZX0gPSBhd2FpdCB0aGlzLmdldFNjcmVlbkluZm8oKTtcbiAgICAgIHRoaXMuZGV2aWNlQ2FwcyA9IHtcbiAgICAgICAgcGl4ZWxSYXRpbzogc2NhbGUsXG4gICAgICAgIHN0YXRCYXJIZWlnaHQ6IHN0YXR1c0JhclNpemUuaGVpZ2h0LFxuICAgICAgICB2aWV3cG9ydFJlY3Q6IGF3YWl0IHRoaXMuZ2V0Vmlld3BvcnRSZWN0KCksXG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLmxvZy5pbmZvKCdNZXJnaW5nIFdEQSBjYXBzIG92ZXIgQXBwaXVtIGNhcHMgZm9yIHNlc3Npb24gZGV0YWlsIHJlc3BvbnNlJyk7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe3VkaWQ6IHRoaXMub3B0cy51ZGlkfSwgZHJpdmVyU2Vzc2lvbixcbiAgICAgIHRoaXMud2RhQ2Fwcy5jYXBhYmlsaXRpZXMsIHRoaXMuZGV2aWNlQ2FwcyB8fCB7fSk7XG4gIH1cblxuICBhc3luYyByZXNldCAoKSB7XG4gICAgaWYgKHRoaXMub3B0cy5ub1Jlc2V0KSB7XG4gICAgICAvLyBUaGlzIGlzIHRvIG1ha2Ugc3VyZSByZXNldCBoYXBwZW5zIGV2ZW4gaWYgbm9SZXNldCBpcyBzZXQgdG8gdHJ1ZVxuICAgICAgbGV0IG9wdHMgPSBfLmNsb25lRGVlcCh0aGlzLm9wdHMpO1xuICAgICAgb3B0cy5ub1Jlc2V0ID0gZmFsc2U7XG4gICAgICBvcHRzLmZ1bGxSZXNldCA9IGZhbHNlO1xuICAgICAgY29uc3Qgc2h1dGRvd25IYW5kbGVyID0gdGhpcy5yZXNldE9uVW5leHBlY3RlZFNodXRkb3duO1xuICAgICAgdGhpcy5yZXNldE9uVW5leHBlY3RlZFNodXRkb3duID0gKCkgPT4ge307XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnJ1blJlc2V0KG9wdHMpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy5yZXNldE9uVW5leHBlY3RlZFNodXRkb3duID0gc2h1dGRvd25IYW5kbGVyO1xuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci5yZXNldCgpO1xuICB9XG59XG5cbk9iamVjdC5hc3NpZ24oWENVSVRlc3REcml2ZXIucHJvdG90eXBlLCBjb21tYW5kcyk7XG5cbmV4cG9ydCBkZWZhdWx0IFhDVUlUZXN0RHJpdmVyO1xuZXhwb3J0IHsgWENVSVRlc3REcml2ZXIgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFJQTs7QUFDQTs7QUFJQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFRQTs7QUFJQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFD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
