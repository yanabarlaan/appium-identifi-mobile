"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.startServer = startServer;

require("source-map-support/register");

var _logger = _interopRequireDefault(require("./logger"));

var _baseDriver = require("@appium/base-driver");

var _driver = require("./driver");

async function startServer(port, address) {
  const driver = new _driver.XCUITestDriver({
    port,
    address
  });
  const server = await (0, _baseDriver.server)({
    routeConfiguringFunction: (0, _baseDriver.routeConfiguringFunction)(driver),
    port,
    hostname: address,
    allowCors: false
  });
  server.driver = driver;

  _logger.default.info(`XCUITestDriver server listening on http://${address}:${port}`);

  return server;
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3NlcnZlci5qcyIsIm5hbWVzIjpbInN0YXJ0U2VydmVyIiwicG9ydCIsImFkZHJlc3MiLCJkcml2ZXIiLCJYQ1VJVGVzdERyaXZlciIsInNlcnZlciIsImJhc2VTZXJ2ZXIiLCJyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24iLCJob3N0bmFtZSIsImFsbG93Q29ycyIsImxvZyIsImluZm8iXSwic291cmNlUm9vdCI6Ii4uLy4uIiwic291cmNlcyI6WyJsaWIvc2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgc2VydmVyIGFzIGJhc2VTZXJ2ZXIsIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbiB9IGZyb20gJ0BhcHBpdW0vYmFzZS1kcml2ZXInO1xuaW1wb3J0IHsgWENVSVRlc3REcml2ZXIgfSBmcm9tICcuL2RyaXZlcic7XG5cblxuYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXJ2ZXIgKHBvcnQsIGFkZHJlc3MpIHtcbiAgY29uc3QgZHJpdmVyID0gbmV3IFhDVUlUZXN0RHJpdmVyKHtwb3J0LCBhZGRyZXNzfSk7XG4gIGNvbnN0IHNlcnZlciA9IGF3YWl0IGJhc2VTZXJ2ZXIoe1xuICAgIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbjogcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uKGRyaXZlciksXG4gICAgcG9ydCxcbiAgICBob3N0bmFtZTogYWRkcmVzcyxcbiAgICBhbGxvd0NvcnM6IGZhbHNlLFxuICB9KTtcbiAgLy8gbWFrZSB0aGUgZHJpdmVyIGF2YWlsYWJsZVxuICBzZXJ2ZXIuZHJpdmVyID0gZHJpdmVyO1xuICBsb2cuaW5mbyhgWENVSVRlc3REcml2ZXIgc2VydmVyIGxpc3RlbmluZyBvbiBodHRwOi8vJHthZGRyZXNzfToke3BvcnR9YCk7XG4gIHJldHVybiBzZXJ2ZXI7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBR0EsZUFBZUEsV0FBZixDQUE0QkMsSUFBNUIsRUFBa0NDLE9BQWxDLEVBQTJDO0VBQ3pDLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxzQkFBSixDQUFtQjtJQUFDSCxJQUFEO0lBQU9DO0VBQVAsQ0FBbkIsQ0FBZjtFQUNBLE1BQU1HLE1BQU0sR0FBRyxNQUFNLElBQUFDLGtCQUFBLEVBQVc7SUFDOUJDLHdCQUF3QixFQUFFLElBQUFBLG9DQUFBLEVBQXlCSixNQUF6QixDQURJO0lBRTlCRixJQUY4QjtJQUc5Qk8sUUFBUSxFQUFFTixPQUhvQjtJQUk5Qk8sU0FBUyxFQUFFO0VBSm1CLENBQVgsQ0FBckI7RUFPQUosTUFBTSxDQUFDRixNQUFQLEdBQWdCQSxNQUFoQjs7RUFDQU8sZUFBQSxDQUFJQyxJQUFKLENBQVUsNkNBQTRDVCxPQUFRLElBQUdELElBQUssRUFBdEU7O0VBQ0EsT0FBT0ksTUFBUDtBQUNEIn0=
