"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extensions = exports.default = exports.commands = void 0;
exports.gesturesChainToString = gesturesChainToString;
exports.helpers = void 0;

require("source-map-support/register");

var _baseDriver = require("@appium/base-driver");

var _support = require("@appium/support");

var _lodash = _interopRequireDefault(require("lodash"));

var _logger = _interopRequireDefault(require("../logger"));

const SUPPORTED_GESTURE_DIRECTIONS = ['up', 'down', 'left', 'right'];
const helpers = {},
      extensions = {},
      commands = {};
exports.commands = commands;
exports.extensions = extensions;
exports.helpers = helpers;

function toElementId(opts = {}) {
  if (opts.element) {
    _logger.default.info(`The 'element' argument name is deprecated. Consider using 'elementId' instead`);
  }

  const el = opts.elementId || opts.element;
  return el ? _support.util.unwrapElement(el) : null;
}

async function toElementOrApplicationId(driver, opts = {}) {
  return toElementId(opts) || _support.util.unwrapElement(await driver.findNativeElementOrElements(`class name`, `XCUIElementTypeApplication`, false));
}

commands.moveTo = async function moveTo(el, xoffset = 0, yoffset = 0) {
  el = _support.util.unwrapElement(el);

  if (this.isWebContext()) {
    let {
      x,
      y
    } = await this.getLocation(el);
    let coords = {
      x: x + xoffset,
      y: y + yoffset
    };
    this.curWebCoords = coords;
    let atomsElement = this.getAtomsElement(el);
    let relCoords = {
      x: xoffset,
      y: yoffset
    };
    await this.executeAtom('move_mouse', [atomsElement, relCoords]);
  } else {
    if (_lodash.default.isNil(el)) {
      if (!this.curCoords) {
        throw new _baseDriver.errors.UnknownException('Current cursor position unknown, please use moveTo with an element the first time.');
      }

      this.curCoords = {
        x: this.curCoords.x + xoffset,
        y: this.curCoords.y + yoffset
      };
    } else {
      let elPos = await this.getLocation(el);
      this.curCoords = {
        x: elPos.x + xoffset,
        y: elPos.y + yoffset
      };
    }
  }
};

function requireFloatParameter(paramName, paramValue, methodName) {
  if (_lodash.default.isUndefined(paramValue)) {
    throw new _baseDriver.errors.InvalidArgumentError(`"${paramName}" parameter is mandatory for "${methodName}" call`);
  }

  const result = parseFloat(paramValue);

  if (isNaN(result)) {
    throw new _baseDriver.errors.InvalidArgumentError(`"${paramName}" parameter should be a valid number. "${paramValue}" is given instead`);
  }

  return result;
}

function requireIntParameter(paramName, paramValue, methodName) {
  if (_lodash.default.isUndefined(paramValue)) {
    throw new _baseDriver.errors.InvalidArgumentError(`"${paramName}" parameter is mandatory for "${methodName}" call`);
  }

  const result = parseInt(paramValue, 10);

  if (isNaN(result)) {
    throw new _baseDriver.errors.InvalidArgumentError(`"${paramName}" parameter should be a valid integer. "${paramValue}" is given instead`);
  }

  return result;
}

commands.mobileShake = async function mobileShake() {
  if (!this.isSimulator()) {
    throw new _baseDriver.errors.UnknownError('Shake is not supported on real devices');
  }

  await this.opts.device.shake();
};

commands.click = async function click(el) {
  if (!this.isWebContext()) {
    return await this.nativeClick(el);
  }

  el = _support.util.unwrapElement(el);

  if ((await this.settings.getSettings()).nativeWebTap || (await this.settings.getSettings()).nativeWebTapStrict) {
    this.log.debug('Using native web tap');
    await this.nativeWebTap(el);
  } else {
    const atomsElement = this.getAtomsElement(el);
    return await this.executeAtom('click', [atomsElement]);
  }
};

function gesturesChainToString(gestures, keysToInclude = ['options']) {
  return gestures.map(item => {
    let otherKeys = _lodash.default.difference(_lodash.default.keys(item), ['action']);

    otherKeys = _lodash.default.isArray(keysToInclude) ? _lodash.default.intersection(otherKeys, keysToInclude) : otherKeys;

    if (otherKeys.length) {
      return `${item.action}` + `(${_lodash.default.map(otherKeys, x => x + '=' + (_lodash.default.isPlainObject(item[x]) ? JSON.stringify(item[x]) : item[x])).join(', ')})`;
    }

    return item.action;
  }).join('-');
}

commands.performActions = async function performActions(actions) {
  this.log.debug(`Received the following W3C actions: ${JSON.stringify(actions, null, '  ')}`);
  const preprocessedActions = actions.map(action => Object.assign({}, action, action.type === 'pointer' ? {
    parameters: {
      pointerType: 'touch'
    }
  } : {})).map(action => {
    const modifiedAction = _lodash.default.clone(action) || {};
    modifiedAction.actions = (action.actions || []).filter(innerAction => !(innerAction.type === 'pause' && innerAction.duration === 0));
    return modifiedAction;
  });
  this.log.debug(`Preprocessed actions: ${JSON.stringify(preprocessedActions, null, '  ')}`);
  return await this.proxyCommand('/actions', 'POST', {
    actions: preprocessedActions
  });
};

commands.releaseActions = function releaseActions() {
  this.log.warn('On this platform, releaseActions is a no-op');
};

commands.performTouch = async function performTouch(gestures) {
  this.log.debug(`Received the following touch action: ${gesturesChainToString(gestures)}`);

  try {
    return await this.proxyCommand('/wda/touch/perform', 'POST', {
      actions: gestures
    });
  } catch (e) {
    if (!this.isWebContext()) {
      throw e;
    }

    this.log.errorAndThrow('The Touch API is aimed for usage in NATIVE context. ' + 'Consider using "execute" API with custom events trigger script ' + `to emulate touch events being in WEBVIEW context. Original error: ${e.message}`);
  }
};

commands.performMultiAction = async function performMultiAction(actions) {
  this.log.debug(`Received the following multi touch action:`);

  for (let i in actions) {
    this.log.debug(`    ${parseInt(i, 10) + 1}: ${_lodash.default.map(actions[i], 'action').join('-')}`);
  }

  try {
    return await this.proxyCommand('/wda/touch/multi/perform', 'POST', {
      actions
    });
  } catch (e) {
    if (!this.isWebContext()) {
      throw e;
    }

    this.log.errorAndThrow('The MultiTouch API is aimed for usage in NATIVE context. ' + 'Consider using "execute" API with custom events trigger script ' + `to emulate multitouch events being in WEBVIEW context. Original error: ${e.message}`);
  }
};

commands.nativeClick = async function nativeClick(el) {
  el = _support.util.unwrapElement(el);
  let endpoint = `/element/${el}/click`;
  return await this.proxyCommand(endpoint, 'POST', {});
};

helpers.mobileScroll = async function mobileScroll(opts = {}) {
  const {
    name,
    direction,
    predicateString,
    toVisible,
    distance
  } = opts;
  const params = {};

  if (name) {
    params.name = name;
  } else if (direction) {
    if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_lodash.default.toLower(direction))) {
      throw new _baseDriver.errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);
    }

    params.direction = direction;
  } else if (predicateString) {
    params.predicateString = predicateString;
  } else if (toVisible) {
    params.toVisible = toVisible;
  } else {
    throw new _baseDriver.errors.InvalidArgumentError('Mobile scroll supports the following strategies: name, direction, predicateString, and toVisible. ' + 'Specify one of these');
  }

  if (!_lodash.default.isNil(distance)) {
    params.distance = distance;
  }

  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/scroll`, 'POST', params);
};

helpers.mobileSwipe = async function mobileSwipe(opts = {}) {
  const {
    direction,
    velocity
  } = opts;

  if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_lodash.default.toLower(direction))) {
    throw new _baseDriver.errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);
  }

  const params = {
    direction
  };

  if (!_lodash.default.isNil(velocity)) {
    params.velocity = velocity;
  }

  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/swipe`, 'POST', params);
};

helpers.mobilePinch = async function mobilePinch(opts = {}) {
  const params = {
    scale: requireFloatParameter('scale', opts.scale, 'pinch'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'pinch')
  };
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/pinch`, 'POST', params);
};

helpers.mobileDoubleTap = async function mobileDoubleTap(opts = {}) {
  const elementId = toElementId(opts);

  if (elementId) {
    return await this.proxyCommand(`/wda/element/${elementId}/doubleTap`, 'POST');
  }

  const params = {
    x: requireFloatParameter('x', opts.x, 'doubleTap'),
    y: requireFloatParameter('y', opts.y, 'doubleTap')
  };
  return await this.proxyCommand('/wda/doubleTap', 'POST', params);
};

helpers.mobileTwoFingerTap = async function mobileTwoFingerTap(opts = {}) {
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/twoFingerTap`, 'POST');
};

helpers.mobileTouchAndHold = async function mobileTouchAndHold(opts = {}) {
  const params = {
    duration: requireFloatParameter('duration', opts.duration, 'touchAndHold')
  };
  const elementId = toElementId(opts);

  if (elementId) {
    return await this.proxyCommand(`/wda/element/${elementId}/touchAndHold`, 'POST', params);
  }

  params.x = requireFloatParameter('x', opts.x, 'touchAndHold');
  params.y = requireFloatParameter('y', opts.y, 'touchAndHold');
  return await this.proxyCommand('/wda/touchAndHold', 'POST', params);
};

helpers.mobileTap = async function mobileTap(opts = {}) {
  const params = {
    x: requireFloatParameter('x', opts.x, 'tap'),
    y: requireFloatParameter('y', opts.y, 'tap')
  };
  const elementId = toElementId(opts) || '0';
  return await this.proxyCommand(`/wda/tap/${elementId}`, 'POST', params);
};

helpers.mobileDragFromToForDuration = async function mobileDragFromToForDuration(opts = {}) {
  const params = {
    duration: requireFloatParameter('duration', opts.duration, 'dragFromToForDuration'),
    fromX: requireFloatParameter('fromX', opts.fromX, 'dragFromToForDuration'),
    fromY: requireFloatParameter('fromY', opts.fromY, 'dragFromToForDuration'),
    toX: requireFloatParameter('toX', opts.toX, 'dragFromToForDuration'),
    toY: requireFloatParameter('toY', opts.toY, 'dragFromToForDuration')
  };
  const elementId = toElementId(opts);
  return elementId ? await this.proxyCommand(`/wda/element/${elementId}/dragfromtoforduration`, 'POST', params) : await this.proxyCommand('/wda/dragfromtoforduration', 'POST', params);
};

helpers.mobileTapWithNumberOfTaps = async function mobileTapWithNumberOfTaps(opts = {}) {
  const elementId = toElementId(opts);

  if (!elementId) {
    throw new _baseDriver.errors.InvalidArgumentError('Element id is expected to be set for tapWithNumberOfTaps method');
  }

  const params = {
    numberOfTaps: requireIntParameter('numberOfTaps', opts.numberOfTaps, 'tapWithNumberOfTaps'),
    numberOfTouches: requireIntParameter('numberOfTouches', opts.numberOfTouches, 'tapWithNumberOfTaps')
  };
  return await this.proxyCommand(`/wda/element/${elementId}/tapWithNumberOfTaps`, 'POST', params);
};

helpers.mobileSelectPickerWheelValue = async function mobileSelectPickerWheelValue(opts = {}) {
  const elementId = toElementId(opts);

  if (!elementId) {
    throw new _baseDriver.errors.InvalidArgumentError('Element id is expected to be set for selectPickerWheelValue method');
  }

  if (!_lodash.default.isString(opts.order) || !['next', 'previous'].includes(opts.order.toLowerCase())) {
    throw new _baseDriver.errors.InvalidArgumentError(`The mandatory 'order' parameter is expected to be equal either to 'next' or 'previous'. ` + `'${opts.order}' is given instead`);
  }

  const params = {
    order: opts.order
  };

  if (opts.offset) {
    params.offset = requireFloatParameter('offset', opts.offset, 'selectPickerWheelValue');
  }

  return await this.proxyCommand(`/wda/pickerwheel/${elementId}/select`, 'POST', params);
};

helpers.mobileRotateElement = async function mobileRotateElement(opts = {}) {
  const elementId = toElementId(opts);

  if (!elementId) {
    throw new _baseDriver.errors.InvalidArgumentError('Element id is expected to be set for rotateElement method');
  }

  const params = {
    rotation: requireFloatParameter('rotation', opts.rotation, 'rotateElement'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'rotateElement')
  };
  return await this.proxyCommand(`/wda/element/${elementId}/rotate`, 'POST', params);
};

helpers.getCoordinates = async function getCoordinates(gesture) {
  let coordinates = {
    x: 0,
    y: 0,
    areOffsets: false
  };
  let optionX = null;

  if (gesture.options.x) {
    optionX = requireFloatParameter('x', gesture.options.x, 'getCoordinates');
  }

  let optionY = null;

  if (gesture.options.y) {
    optionY = requireFloatParameter('y', gesture.options.y, 'getCoordinates');
  }

  const elementId = toElementId(gesture.options);

  if (elementId) {
    let rect = await this.getElementRect(elementId);
    let pos = {
      x: rect.x,
      y: rect.y
    };
    let size = {
      w: rect.width,
      h: rect.height
    };
    let offsetX = 0;
    let offsetY = 0;

    if (optionX || optionY) {
      offsetX = optionX || 0;
      offsetY = optionY || 0;
    } else {
      offsetX = size.w / 2;
      offsetY = size.h / 2;
    }

    coordinates.x = pos.x + offsetX;
    coordinates.y = pos.y + offsetY;
  } else {
    coordinates.areOffsets = gesture.action === 'moveTo';
    coordinates.x = optionX || 0;
    coordinates.y = optionY || 0;
  }

  return coordinates;
};

helpers.applyMoveToOffset = function applyMoveToOffset(firstCoordinates, secondCoordinates) {
  if (secondCoordinates.areOffsets) {
    return {
      x: firstCoordinates.x + secondCoordinates.x,
      y: firstCoordinates.y + secondCoordinates.y
    };
  } else {
    return secondCoordinates;
  }
};

Object.assign(extensions, helpers, commands);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL2NvbW1hbmRzL2dlc3R1cmUuanMiLCJuYW1lcyI6WyJTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TIiwiaGVscGVycyIsImV4dGVuc2lvbnMiLCJjb21tYW5kcyIsInRvRWxlbWVudElkIiwib3B0cyIsImVsZW1lbnQiLCJsb2ciLCJpbmZvIiwiZWwiLCJlbGVtZW50SWQiLCJ1dGlsIiwidW53cmFwRWxlbWVudCIsInRvRWxlbWVudE9yQXBwbGljYXRpb25JZCIsImRyaXZlciIsImZpbmROYXRpdmVFbGVtZW50T3JFbGVtZW50cyIsIm1vdmVUbyIsInhvZmZzZXQiLCJ5b2Zmc2V0IiwiaXNXZWJDb250ZXh0IiwieCIsInkiLCJnZXRMb2NhdGlvbiIsImNvb3JkcyIsImN1cldlYkNvb3JkcyIsImF0b21zRWxlbWVudCIsImdldEF0b21zRWxlbWVudCIsInJlbENvb3JkcyIsImV4ZWN1dGVBdG9tIiwiXyIsImlzTmlsIiwiY3VyQ29vcmRzIiwiZXJyb3JzIiwiVW5rbm93bkV4Y2VwdGlvbiIsImVsUG9zIiwicmVxdWlyZUZsb2F0UGFyYW1ldGVyIiwicGFyYW1OYW1lIiwicGFyYW1WYWx1ZSIsIm1ldGhvZE5hbWUiLCJpc1VuZGVmaW5lZCIsIkludmFsaWRBcmd1bWVudEVycm9yIiwicmVzdWx0IiwicGFyc2VGbG9hdCIsImlzTmFOIiwicmVxdWlyZUludFBhcmFtZXRlciIsInBhcnNlSW50IiwibW9iaWxlU2hha2UiLCJpc1NpbXVsYXRvciIsIlVua25vd25FcnJvciIsImRldmljZSIsInNoYWtlIiwiY2xpY2siLCJuYXRpdmVDbGljayIsInNldHRpbmdzIiwiZ2V0U2V0dGluZ3MiLCJuYXRpdmVXZWJUYXAiLCJuYXRpdmVXZWJUYXBTdHJpY3QiLCJkZWJ1ZyIsImdlc3R1cmVzQ2hhaW5Ub1N0cmluZyIsImdlc3R1cmVzIiwia2V5c1RvSW5jbHVkZSIsIm1hcCIsIml0ZW0iLCJvdGhlcktleXMiLCJkaWZmZXJlbmNlIiwia2V5cyIsImlzQXJyYXkiLCJpbnRlcnNlY3Rpb24iLCJsZW5ndGgiLCJhY3Rpb24iLCJpc1BsYWluT2JqZWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJwZXJmb3JtQWN0aW9ucyIsImFjdGlvbnMiLCJwcmVwcm9jZXNzZWRBY3Rpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwidHlwZSIsInBhcmFtZXRlcnMiLCJwb2ludGVyVHlwZSIsIm1vZGlmaWVkQWN0aW9uIiwiY2xvbmUiLCJmaWx0ZXIiLCJpbm5lckFjdGlvbiIsImR1cmF0aW9uIiwicHJveHlDb21tYW5kIiwicmVsZWFzZUFjdGlvbnMiLCJ3YXJuIiwicGVyZm9ybVRvdWNoIiwiZSIsImVycm9yQW5kVGhyb3ciLCJtZXNzYWdlIiwicGVyZm9ybU11bHRpQWN0aW9uIiwiaSIsImVuZHBvaW50IiwibW9iaWxlU2Nyb2xsIiwibmFtZSIsImRpcmVjdGlvbiIsInByZWRpY2F0ZVN0cmluZyIsInRvVmlzaWJsZSIsImRpc3RhbmNlIiwicGFyYW1zIiwiaW5jbHVkZXMiLCJ0b0xvd2VyIiwibW9iaWxlU3dpcGUiLCJ2ZWxvY2l0eSIsIm1vYmlsZVBpbmNoIiwic2NhbGUiLCJtb2JpbGVEb3VibGVUYXAiLCJtb2JpbGVUd29GaW5nZXJUYXAiLCJtb2JpbGVUb3VjaEFuZEhvbGQiLCJtb2JpbGVUYXAiLCJtb2JpbGVEcmFnRnJvbVRvRm9yRHVyYXRpb24iLCJmcm9tWCIsImZyb21ZIiwidG9YIiwidG9ZIiwibW9iaWxlVGFwV2l0aE51bWJlck9mVGFwcyIsIm51bWJlck9mVGFwcyIsIm51bWJlck9mVG91Y2hlcyIsIm1vYmlsZVNlbGVjdFBpY2tlcldoZWVsVmFsdWUiLCJpc1N0cmluZyIsIm9yZGVyIiwidG9Mb3dlckNhc2UiLCJvZmZzZXQiLCJtb2JpbGVSb3RhdGVFbGVtZW50Iiwicm90YXRpb24iLCJnZXRDb29yZGluYXRlcyIsImdlc3R1cmUiLCJjb29yZGluYXRlcyIsImFyZU9mZnNldHMiLCJvcHRpb25YIiwib3B0aW9ucyIsIm9wdGlvblkiLCJyZWN0IiwiZ2V0RWxlbWVudFJlY3QiLCJwb3MiLCJzaXplIiwidyIsIndpZHRoIiwiaCIsImhlaWdodCIsIm9mZnNldFgiLCJvZmZzZXRZIiwiYXBwbHlNb3ZlVG9PZmZzZXQiLCJmaXJzdENvb3JkaW5hdGVzIiwic2Vjb25kQ29vcmRpbmF0ZXMiXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uIiwic291cmNlcyI6WyJsaWIvY29tbWFuZHMvZ2VzdHVyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlcnJvcnMgfSBmcm9tICdAYXBwaXVtL2Jhc2UtZHJpdmVyJztcbmltcG9ydCB7IHV0aWwgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcblxuY29uc3QgU1VQUE9SVEVEX0dFU1RVUkVfRElSRUNUSU9OUyA9IFsndXAnLCAnZG93bicsICdsZWZ0JywgJ3JpZ2h0J107XG5cbmNvbnN0IGhlbHBlcnMgPSB7fSwgZXh0ZW5zaW9ucyA9IHt9LCBjb21tYW5kcyA9IHt9O1xuXG5mdW5jdGlvbiB0b0VsZW1lbnRJZCAob3B0cyA9IHt9KSB7XG4gIGlmIChvcHRzLmVsZW1lbnQpIHtcbiAgICBsb2cuaW5mbyhgVGhlICdlbGVtZW50JyBhcmd1bWVudCBuYW1lIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIHVzaW5nICdlbGVtZW50SWQnIGluc3RlYWRgKTtcbiAgfVxuICBjb25zdCBlbCA9IG9wdHMuZWxlbWVudElkIHx8IG9wdHMuZWxlbWVudDtcbiAgcmV0dXJuIGVsID8gdXRpbC51bndyYXBFbGVtZW50KGVsKSA6IG51bGw7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHRvRWxlbWVudE9yQXBwbGljYXRpb25JZCAoZHJpdmVyLCBvcHRzID0ge30pIHtcbiAgcmV0dXJuIHRvRWxlbWVudElkKG9wdHMpXG4gICAgfHwgdXRpbC51bndyYXBFbGVtZW50KGF3YWl0IGRyaXZlci5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoYGNsYXNzIG5hbWVgLCBgWENVSUVsZW1lbnRUeXBlQXBwbGljYXRpb25gLCBmYWxzZSkpO1xufVxuXG5jb21tYW5kcy5tb3ZlVG8gPSBhc3luYyBmdW5jdGlvbiBtb3ZlVG8gKGVsLCB4b2Zmc2V0ID0gMCwgeW9mZnNldCA9IDApIHtcbiAgZWwgPSB1dGlsLnVud3JhcEVsZW1lbnQoZWwpO1xuXG4gIGlmICh0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgbGV0IHt4LCB5fSA9IGF3YWl0IHRoaXMuZ2V0TG9jYXRpb24oZWwpO1xuICAgIGxldCBjb29yZHMgPSB7XG4gICAgICB4OiB4ICsgeG9mZnNldCxcbiAgICAgIHk6IHkgKyB5b2Zmc2V0XG4gICAgfTtcbiAgICB0aGlzLmN1cldlYkNvb3JkcyA9IGNvb3JkcztcbiAgICBsZXQgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuICAgIGxldCByZWxDb29yZHMgPSB7eDogeG9mZnNldCwgeTogeW9mZnNldH07XG4gICAgYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnbW92ZV9tb3VzZScsIFthdG9tc0VsZW1lbnQsIHJlbENvb3Jkc10pO1xuICB9IGVsc2Uge1xuICAgIGlmIChfLmlzTmlsKGVsKSkge1xuICAgICAgaWYgKCF0aGlzLmN1ckNvb3Jkcykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzLlVua25vd25FeGNlcHRpb24oXG4gICAgICAgICAgJ0N1cnJlbnQgY3Vyc29yIHBvc2l0aW9uIHVua25vd24sIHBsZWFzZSB1c2UgbW92ZVRvIHdpdGggYW4gZWxlbWVudCB0aGUgZmlyc3QgdGltZS4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VyQ29vcmRzID0ge1xuICAgICAgICB4OiB0aGlzLmN1ckNvb3Jkcy54ICsgeG9mZnNldCxcbiAgICAgICAgeTogdGhpcy5jdXJDb29yZHMueSArIHlvZmZzZXRcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBlbFBvcyA9IGF3YWl0IHRoaXMuZ2V0TG9jYXRpb24oZWwpO1xuICAgICAgdGhpcy5jdXJDb29yZHMgPSB7XG4gICAgICAgIHg6IGVsUG9zLnggKyB4b2Zmc2V0LFxuICAgICAgICB5OiBlbFBvcy55ICsgeW9mZnNldFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHJlcXVpcmVGbG9hdFBhcmFtZXRlciAocGFyYW1OYW1lLCBwYXJhbVZhbHVlLCBtZXRob2ROYW1lKSB7XG4gIGlmIChfLmlzVW5kZWZpbmVkKHBhcmFtVmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgXCIke3BhcmFtTmFtZX1cIiBwYXJhbWV0ZXIgaXMgbWFuZGF0b3J5IGZvciBcIiR7bWV0aG9kTmFtZX1cIiBjYWxsYCk7XG4gIH1cbiAgY29uc3QgcmVzdWx0ID0gcGFyc2VGbG9hdChwYXJhbVZhbHVlKTtcbiAgaWYgKGlzTmFOKHJlc3VsdCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKGBcIiR7cGFyYW1OYW1lfVwiIHBhcmFtZXRlciBzaG91bGQgYmUgYSB2YWxpZCBudW1iZXIuIFwiJHtwYXJhbVZhbHVlfVwiIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiByZXF1aXJlSW50UGFyYW1ldGVyIChwYXJhbU5hbWUsIHBhcmFtVmFsdWUsIG1ldGhvZE5hbWUpIHtcbiAgaWYgKF8uaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKGBcIiR7cGFyYW1OYW1lfVwiIHBhcmFtZXRlciBpcyBtYW5kYXRvcnkgZm9yIFwiJHttZXRob2ROYW1lfVwiIGNhbGxgKTtcbiAgfVxuICBjb25zdCByZXN1bHQgPSBwYXJzZUludChwYXJhbVZhbHVlLCAxMCk7XG4gIGlmIChpc05hTihyZXN1bHQpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgXCIke3BhcmFtTmFtZX1cIiBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgdmFsaWQgaW50ZWdlci4gXCIke3BhcmFtVmFsdWV9XCIgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbW1hbmRzLm1vYmlsZVNoYWtlID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU2hha2UgKCkge1xuICBpZiAoIXRoaXMuaXNTaW11bGF0b3IoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuVW5rbm93bkVycm9yKCdTaGFrZSBpcyBub3Qgc3VwcG9ydGVkIG9uIHJlYWwgZGV2aWNlcycpO1xuICB9XG4gIGF3YWl0IHRoaXMub3B0cy5kZXZpY2Uuc2hha2UoKTtcbn07XG5cbmNvbW1hbmRzLmNsaWNrID0gYXN5bmMgZnVuY3Rpb24gY2xpY2sgKGVsKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIC8vIHRoZXJlIGFyZSBtdWx0aXBsZSBjb21tYW5kcyB0aGF0IG1hcCBoZXJlLCBzbyBtYW51YWxseSBwcm94eVxuICAgIHJldHVybiBhd2FpdCB0aGlzLm5hdGl2ZUNsaWNrKGVsKTtcbiAgfVxuICBlbCA9IHV0aWwudW53cmFwRWxlbWVudChlbCk7XG4gIGlmICgoYXdhaXQgdGhpcy5zZXR0aW5ncy5nZXRTZXR0aW5ncygpKS5uYXRpdmVXZWJUYXAgfHwgKGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKSkubmF0aXZlV2ViVGFwU3RyaWN0KSB7XG4gICAgLy8gYXRvbXMtYmFzZWQgY2xpY2tzIGRvbid0IGFsd2F5cyB3b3JrIGluIHNhZmFyaSA3XG4gICAgdGhpcy5sb2cuZGVidWcoJ1VzaW5nIG5hdGl2ZSB3ZWIgdGFwJyk7XG4gICAgYXdhaXQgdGhpcy5uYXRpdmVXZWJUYXAoZWwpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGVsKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnY2xpY2snLCBbYXRvbXNFbGVtZW50XSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdlc3R1cmVzQ2hhaW5Ub1N0cmluZyAoZ2VzdHVyZXMsIGtleXNUb0luY2x1ZGUgPSBbJ29wdGlvbnMnXSkge1xuICByZXR1cm4gZ2VzdHVyZXMubWFwKChpdGVtKSA9PiB7XG4gICAgbGV0IG90aGVyS2V5cyA9IF8uZGlmZmVyZW5jZShfLmtleXMoaXRlbSksIFsnYWN0aW9uJ10pO1xuICAgIG90aGVyS2V5cyA9IF8uaXNBcnJheShrZXlzVG9JbmNsdWRlKSA/IF8uaW50ZXJzZWN0aW9uKG90aGVyS2V5cywga2V5c1RvSW5jbHVkZSkgOiBvdGhlcktleXM7XG4gICAgaWYgKG90aGVyS2V5cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBgJHtpdGVtLmFjdGlvbn1gICtcbiAgICAgICAgYCgke18ubWFwKG90aGVyS2V5cywgKHgpID0+IHggKyAnPScgKyAoXy5pc1BsYWluT2JqZWN0KGl0ZW1beF0pID8gSlNPTi5zdHJpbmdpZnkoaXRlbVt4XSkgOiBpdGVtW3hdKSkuam9pbignLCAnKX0pYDtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW0uYWN0aW9uO1xuICB9KS5qb2luKCctJyk7XG59XG5cbmNvbW1hbmRzLnBlcmZvcm1BY3Rpb25zID0gYXN5bmMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbnMgKGFjdGlvbnMpIHtcbiAgdGhpcy5sb2cuZGVidWcoYFJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgVzNDIGFjdGlvbnM6ICR7SlNPTi5zdHJpbmdpZnkoYWN0aW9ucywgbnVsbCwgJyAgJyl9YCk7XG4gIC8vIFRoaXMgaXMgbWFuZGF0b3J5LCBzaW5jZSBXREEgb25seSBzdXBwb3J0cyBUT1VDSCBwb2ludGVyIHR5cGVcbiAgLy8gYW5kIFNlbGVuaXVtIEFQSSB1c2VzIE1PVVNFIGFzIHRoZSBkZWZhdWx0IG9uZVxuICBjb25zdCBwcmVwcm9jZXNzZWRBY3Rpb25zID0gYWN0aW9uc1xuICAgIC5tYXAoKGFjdGlvbikgPT4gT2JqZWN0LmFzc2lnbih7fSwgYWN0aW9uLCBhY3Rpb24udHlwZSA9PT0gJ3BvaW50ZXInID8ge1xuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICBwb2ludGVyVHlwZTogJ3RvdWNoJ1xuICAgICAgfVxuICAgIH0gOiB7fSkpXG4gICAgLm1hcCgoYWN0aW9uKSA9PiB7XG4gICAgICBjb25zdCBtb2RpZmllZEFjdGlvbiA9IF8uY2xvbmUoYWN0aW9uKSB8fCB7fTtcbiAgICAgIC8vIFNlbGVuaXVtIEFQSSB1bmV4cGVjdGVkbHkgaW5zZXJ0cyB6ZXJvIHBhdXNlcywgd2hpY2ggYXJlIG5vdCBzdXBwb3J0ZWQgYnkgV0RBXG4gICAgICBtb2RpZmllZEFjdGlvbi5hY3Rpb25zID0gKGFjdGlvbi5hY3Rpb25zIHx8IFtdKVxuICAgICAgICAuZmlsdGVyKChpbm5lckFjdGlvbikgPT4gIShpbm5lckFjdGlvbi50eXBlID09PSAncGF1c2UnICYmIGlubmVyQWN0aW9uLmR1cmF0aW9uID09PSAwKSk7XG4gICAgICByZXR1cm4gbW9kaWZpZWRBY3Rpb247XG4gICAgfSk7XG4gIHRoaXMubG9nLmRlYnVnKGBQcmVwcm9jZXNzZWQgYWN0aW9uczogJHtKU09OLnN0cmluZ2lmeShwcmVwcm9jZXNzZWRBY3Rpb25zLCBudWxsLCAnICAnKX1gKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvYWN0aW9ucycsICdQT1NUJywge2FjdGlvbnM6IHByZXByb2Nlc3NlZEFjdGlvbnN9KTtcbn07XG5cbmNvbW1hbmRzLnJlbGVhc2VBY3Rpb25zID0gZnVuY3Rpb24gcmVsZWFzZUFjdGlvbnMgKCkge1xuICB0aGlzLmxvZy53YXJuKCdPbiB0aGlzIHBsYXRmb3JtLCByZWxlYXNlQWN0aW9ucyBpcyBhIG5vLW9wJyk7XG59O1xuXG5jb21tYW5kcy5wZXJmb3JtVG91Y2ggPSBhc3luYyBmdW5jdGlvbiBwZXJmb3JtVG91Y2ggKGdlc3R1cmVzKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBSZWNlaXZlZCB0aGUgZm9sbG93aW5nIHRvdWNoIGFjdGlvbjogJHtnZXN0dXJlc0NoYWluVG9TdHJpbmcoZ2VzdHVyZXMpfWApO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL3dkYS90b3VjaC9wZXJmb3JtJywgJ1BPU1QnLCB7YWN0aW9uczogZ2VzdHVyZXN9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdygnVGhlIFRvdWNoIEFQSSBpcyBhaW1lZCBmb3IgdXNhZ2UgaW4gTkFUSVZFIGNvbnRleHQuICcgK1xuICAgICAgJ0NvbnNpZGVyIHVzaW5nIFwiZXhlY3V0ZVwiIEFQSSB3aXRoIGN1c3RvbSBldmVudHMgdHJpZ2dlciBzY3JpcHQgJyArXG4gICAgICBgdG8gZW11bGF0ZSB0b3VjaCBldmVudHMgYmVpbmcgaW4gV0VCVklFVyBjb250ZXh0LiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLnBlcmZvcm1NdWx0aUFjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1NdWx0aUFjdGlvbiAoYWN0aW9ucykge1xuICB0aGlzLmxvZy5kZWJ1ZyhgUmVjZWl2ZWQgdGhlIGZvbGxvd2luZyBtdWx0aSB0b3VjaCBhY3Rpb246YCk7XG4gIGZvciAobGV0IGkgaW4gYWN0aW9ucykge1xuICAgIHRoaXMubG9nLmRlYnVnKGAgICAgJHtwYXJzZUludChpLCAxMCkgKyAxfTogJHtfLm1hcChhY3Rpb25zW2ldLCAnYWN0aW9uJykuam9pbignLScpfWApO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL3RvdWNoL211bHRpL3BlcmZvcm0nLCAnUE9TVCcsIHthY3Rpb25zfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIHRoaXMubG9nLmVycm9yQW5kVGhyb3coJ1RoZSBNdWx0aVRvdWNoIEFQSSBpcyBhaW1lZCBmb3IgdXNhZ2UgaW4gTkFUSVZFIGNvbnRleHQuICcgK1xuICAgICAgJ0NvbnNpZGVyIHVzaW5nIFwiZXhlY3V0ZVwiIEFQSSB3aXRoIGN1c3RvbSBldmVudHMgdHJpZ2dlciBzY3JpcHQgJyArXG4gICAgICBgdG8gZW11bGF0ZSBtdWx0aXRvdWNoIGV2ZW50cyBiZWluZyBpbiBXRUJWSUVXIGNvbnRleHQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuY29tbWFuZHMubmF0aXZlQ2xpY2sgPSBhc3luYyBmdW5jdGlvbiBuYXRpdmVDbGljayAoZWwpIHtcbiAgZWwgPSB1dGlsLnVud3JhcEVsZW1lbnQoZWwpO1xuICBsZXQgZW5kcG9pbnQgPSBgL2VsZW1lbnQvJHtlbH0vY2xpY2tgO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoZW5kcG9pbnQsICdQT1NUJywge30pO1xufTtcblxuLypcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svV2ViRHJpdmVyQWdlbnQvYmxvYi9tYXN0ZXIvV2ViRHJpdmVyQWdlbnRMaWIvQ29tbWFuZHMvRkJFbGVtZW50Q29tbWFuZHMubVxuICogdG8gZ2V0IHRoZSBpbmZvIGFib3V0IGF2YWlsYWJsZSBXREEgZ2VzdHVyZXMgQVBJXG4gKlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9yZWZlcmVuY2UveGN0ZXN0L3hjdWllbGVtZW50IGFuZFxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL3JlZmVyZW5jZS94Y3Rlc3QveGN1aWNvb3JkaW5hdGUgdG8gZ2V0IHRoZSBkZXRhaWxlZCBkZXNjcmlwdGlvbiBvZlxuICogYWxsIFhDVGVzdCBnZXN0dXJlc1xuKi9cblxuaGVscGVycy5tb2JpbGVTY3JvbGwgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVTY3JvbGwgKG9wdHMgPSB7fSkge1xuICAvLyBXREEgc3VwcG9ydHMgZm91ciBzY3JvbGxpbmcgc3RyYXRlZ2llczogcHJlZGljYXRpb24gYmFzZWQgb24gbmFtZSwgZGlyZWN0aW9uLFxuICAvLyBwcmVkaWNhdGVTdHJpbmcsIGFuZCB0b1Zpc2libGUsIGluIHRoYXQgb3JkZXJcbiAgY29uc3Qge1xuICAgIG5hbWUsXG4gICAgZGlyZWN0aW9uLFxuICAgIHByZWRpY2F0ZVN0cmluZyxcbiAgICB0b1Zpc2libGUsXG4gICAgZGlzdGFuY2UsXG4gIH0gPSBvcHRzO1xuICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgaWYgKG5hbWUpIHtcbiAgICBwYXJhbXMubmFtZSA9IG5hbWU7XG4gIH0gZWxzZSBpZiAoZGlyZWN0aW9uKSB7XG4gICAgaWYgKCFTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TLmluY2x1ZGVzKF8udG9Mb3dlcihkaXJlY3Rpb24pKSkge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihgJ2RpcmVjdGlvbicgbXVzdCBiZSBvbmUgb2Y6ICR7U1VQUE9SVEVEX0dFU1RVUkVfRElSRUNUSU9OU31gKTtcbiAgICB9XG4gICAgcGFyYW1zLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgfSBlbHNlIGlmIChwcmVkaWNhdGVTdHJpbmcpIHtcbiAgICBwYXJhbXMucHJlZGljYXRlU3RyaW5nID0gcHJlZGljYXRlU3RyaW5nO1xuICB9IGVsc2UgaWYgKHRvVmlzaWJsZSkge1xuICAgIHBhcmFtcy50b1Zpc2libGUgPSB0b1Zpc2libGU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICdNb2JpbGUgc2Nyb2xsIHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgc3RyYXRlZ2llczogbmFtZSwgZGlyZWN0aW9uLCBwcmVkaWNhdGVTdHJpbmcsIGFuZCB0b1Zpc2libGUuICcgK1xuICAgICAgJ1NwZWNpZnkgb25lIG9mIHRoZXNlJyk7XG4gIH1cbiAgLy8gd2UgY2FuIGFsc28gb3B0aW9uYWxseSBwYXNzIGEgZGlzdGFuY2Ugd2hpY2ggYXBwZWFycyB0byBiZSBhIHJhdGlvIG9mXG4gIC8vIHNjcmVlbiBoZWlnaHQsIHNvIDEuMCBtZWFucyBhIGZ1bGwgc2NyZWVuJ3Mgd29ydGggb2Ygc2Nyb2xsaW5nXG4gIGlmICghXy5pc05pbChkaXN0YW5jZSkpIHtcbiAgICBwYXJhbXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgfVxuICBjb25zdCBlbGVtZW50SWQgPSBhd2FpdCB0b0VsZW1lbnRPckFwcGxpY2F0aW9uSWQodGhpcywgb3B0cyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9zY3JvbGxgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVN3aXBlID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU3dpcGUgKG9wdHMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgZGlyZWN0aW9uLFxuICAgIHZlbG9jaXR5LFxuICB9ID0gb3B0cztcbiAgaWYgKCFTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TLmluY2x1ZGVzKF8udG9Mb3dlcihkaXJlY3Rpb24pKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYCdkaXJlY3Rpb24nIG11c3QgYmUgb25lIG9mOiAke1NVUFBPUlRFRF9HRVNUVVJFX0RJUkVDVElPTlN9YCk7XG4gIH1cbiAgY29uc3QgcGFyYW1zID0ge2RpcmVjdGlvbn07XG4gIGlmICghXy5pc05pbCh2ZWxvY2l0eSkpIHtcbiAgICBwYXJhbXMudmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgfVxuICBjb25zdCBlbGVtZW50SWQgPSBhd2FpdCB0b0VsZW1lbnRPckFwcGxpY2F0aW9uSWQodGhpcywgb3B0cyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9zd2lwZWAsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlUGluY2ggPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVQaW5jaCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBzY2FsZTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdzY2FsZScsIG9wdHMuc2NhbGUsICdwaW5jaCcpLFxuICAgIHZlbG9jaXR5OiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3ZlbG9jaXR5Jywgb3B0cy52ZWxvY2l0eSwgJ3BpbmNoJylcbiAgfTtcbiAgY29uc3QgZWxlbWVudElkID0gYXdhaXQgdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vcGluY2hgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZURvdWJsZVRhcCA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZURvdWJsZVRhcCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoZWxlbWVudElkKSB7XG4gICAgLy8gRG91YmxlIHRhcCBlbGVtZW50XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L2RvdWJsZVRhcGAsICdQT1NUJyk7XG4gIH1cbiAgLy8gRG91YmxlIHRhcCBjb29yZGluYXRlc1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgeDogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd4Jywgb3B0cy54LCAnZG91YmxlVGFwJyksXG4gICAgeTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd5Jywgb3B0cy55LCAnZG91YmxlVGFwJylcbiAgfTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL2RvdWJsZVRhcCcsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVHdvRmluZ2VyVGFwID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVHdvRmluZ2VyVGFwIChvcHRzID0ge30pIHtcbiAgY29uc3QgZWxlbWVudElkID0gYXdhaXQgdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vdHdvRmluZ2VyVGFwYCwgJ1BPU1QnKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVG91Y2hBbmRIb2xkID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVG91Y2hBbmRIb2xkIChvcHRzID0ge30pIHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIGR1cmF0aW9uOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ2R1cmF0aW9uJywgb3B0cy5kdXJhdGlvbiwgJ3RvdWNoQW5kSG9sZCcpXG4gIH07XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoZWxlbWVudElkKSB7XG4gICAgLy8gTG9uZyB0YXAgZWxlbWVudFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS90b3VjaEFuZEhvbGRgLCAnUE9TVCcsIHBhcmFtcyk7XG4gIH1cbiAgLy8gTG9uZyB0YXAgY29vcmRpbmF0ZXNcbiAgcGFyYW1zLnggPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3gnLCBvcHRzLngsICd0b3VjaEFuZEhvbGQnKTtcbiAgcGFyYW1zLnkgPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3knLCBvcHRzLnksICd0b3VjaEFuZEhvbGQnKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL3RvdWNoQW5kSG9sZCcsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlVGFwID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVGFwIChvcHRzID0ge30pIHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIHg6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneCcsIG9wdHMueCwgJ3RhcCcpLFxuICAgIHk6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneScsIG9wdHMueSwgJ3RhcCcpXG4gIH07XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpIHx8ICcwJztcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL3RhcC8ke2VsZW1lbnRJZH1gLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZURyYWdGcm9tVG9Gb3JEdXJhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZURyYWdGcm9tVG9Gb3JEdXJhdGlvbiAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBkdXJhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdkdXJhdGlvbicsIG9wdHMuZHVyYXRpb24sICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICBmcm9tWDogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdmcm9tWCcsIG9wdHMuZnJvbVgsICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICBmcm9tWTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdmcm9tWScsIG9wdHMuZnJvbVksICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICB0b1g6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndG9YJywgb3B0cy50b1gsICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKSxcbiAgICB0b1k6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndG9ZJywgb3B0cy50b1ksICdkcmFnRnJvbVRvRm9yRHVyYXRpb24nKVxuICB9O1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKTtcbiAgcmV0dXJuIGVsZW1lbnRJZFxuICAgIC8vIERyYWcgZWxlbWVudFxuICAgID8gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vZHJhZ2Zyb210b2ZvcmR1cmF0aW9uYCwgJ1BPU1QnLCBwYXJhbXMpXG4gICAgLy8gRHJhZyBjb29yZGluYXRlc1xuICAgIDogYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy93ZGEvZHJhZ2Zyb210b2ZvcmR1cmF0aW9uJywgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVUYXBXaXRoTnVtYmVyT2ZUYXBzID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlVGFwV2l0aE51bWJlck9mVGFwcyAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoIWVsZW1lbnRJZCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VsZW1lbnQgaWQgaXMgZXhwZWN0ZWQgdG8gYmUgc2V0IGZvciB0YXBXaXRoTnVtYmVyT2ZUYXBzIG1ldGhvZCcpO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBudW1iZXJPZlRhcHM6IHJlcXVpcmVJbnRQYXJhbWV0ZXIoJ251bWJlck9mVGFwcycsIG9wdHMubnVtYmVyT2ZUYXBzLCAndGFwV2l0aE51bWJlck9mVGFwcycpLFxuICAgIG51bWJlck9mVG91Y2hlczogcmVxdWlyZUludFBhcmFtZXRlcignbnVtYmVyT2ZUb3VjaGVzJywgb3B0cy5udW1iZXJPZlRvdWNoZXMsICd0YXBXaXRoTnVtYmVyT2ZUYXBzJyksXG4gIH07XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS90YXBXaXRoTnVtYmVyT2ZUYXBzYCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVTZWxlY3RQaWNrZXJXaGVlbFZhbHVlID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU2VsZWN0UGlja2VyV2hlZWxWYWx1ZSAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoIWVsZW1lbnRJZCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VsZW1lbnQgaWQgaXMgZXhwZWN0ZWQgdG8gYmUgc2V0IGZvciBzZWxlY3RQaWNrZXJXaGVlbFZhbHVlIG1ldGhvZCcpO1xuICB9XG4gIGlmICghXy5pc1N0cmluZyhvcHRzLm9yZGVyKSB8fCAhWyduZXh0JywgJ3ByZXZpb3VzJ10uaW5jbHVkZXMob3B0cy5vcmRlci50b0xvd2VyQ2FzZSgpKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFRoZSBtYW5kYXRvcnkgJ29yZGVyJyBwYXJhbWV0ZXIgaXMgZXhwZWN0ZWQgdG8gYmUgZXF1YWwgZWl0aGVyIHRvICduZXh0JyBvciAncHJldmlvdXMnLiBgICtcbiAgICAgIGAnJHtvcHRzLm9yZGVyfScgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IHtvcmRlcjogb3B0cy5vcmRlcn07XG4gIGlmIChvcHRzLm9mZnNldCkge1xuICAgIHBhcmFtcy5vZmZzZXQgPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ29mZnNldCcsIG9wdHMub2Zmc2V0LCAnc2VsZWN0UGlja2VyV2hlZWxWYWx1ZScpO1xuICB9XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9waWNrZXJ3aGVlbC8ke2VsZW1lbnRJZH0vc2VsZWN0YCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVSb3RhdGVFbGVtZW50ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlUm90YXRlRWxlbWVudCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoIWVsZW1lbnRJZCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VsZW1lbnQgaWQgaXMgZXhwZWN0ZWQgdG8gYmUgc2V0IGZvciByb3RhdGVFbGVtZW50IG1ldGhvZCcpO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICByb3RhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdyb3RhdGlvbicsIG9wdHMucm90YXRpb24sICdyb3RhdGVFbGVtZW50JyksXG4gICAgdmVsb2NpdHk6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndmVsb2NpdHknLCBvcHRzLnZlbG9jaXR5LCAncm90YXRlRWxlbWVudCcpLFxuICB9O1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vcm90YXRlYCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5nZXRDb29yZGluYXRlcyA9IGFzeW5jIGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzIChnZXN0dXJlKSB7XG4gIC8vIGRlZmF1bHRzXG4gIGxldCBjb29yZGluYXRlcyA9IHt4OiAwLCB5OiAwLCBhcmVPZmZzZXRzOiBmYWxzZX07XG5cbiAgbGV0IG9wdGlvblggPSBudWxsO1xuICBpZiAoZ2VzdHVyZS5vcHRpb25zLngpIHtcbiAgICBvcHRpb25YID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd4JywgZ2VzdHVyZS5vcHRpb25zLngsICdnZXRDb29yZGluYXRlcycpO1xuICB9XG4gIGxldCBvcHRpb25ZID0gbnVsbDtcbiAgaWYgKGdlc3R1cmUub3B0aW9ucy55KSB7XG4gICAgb3B0aW9uWSA9IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneScsIGdlc3R1cmUub3B0aW9ucy55LCAnZ2V0Q29vcmRpbmF0ZXMnKTtcbiAgfVxuXG4gIC8vIGZpZ3VyZSBvdXQgdGhlIGVsZW1lbnQgY29vcmRpbmF0ZXMuXG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKGdlc3R1cmUub3B0aW9ucyk7XG4gIGlmIChlbGVtZW50SWQpIHtcbiAgICBsZXQgcmVjdCA9IGF3YWl0IHRoaXMuZ2V0RWxlbWVudFJlY3QoZWxlbWVudElkKTtcbiAgICBsZXQgcG9zID0ge3g6IHJlY3QueCwgeTogcmVjdC55fTtcbiAgICBsZXQgc2l6ZSA9IHt3OiByZWN0LndpZHRoLCBoOiByZWN0LmhlaWdodH07XG5cbiAgICAvLyBkZWZhdWx0c1xuICAgIGxldCBvZmZzZXRYID0gMDtcbiAgICBsZXQgb2Zmc2V0WSA9IDA7XG5cbiAgICAvLyBnZXQgdGhlIHJlYWwgb2Zmc2V0c1xuICAgIGlmIChvcHRpb25YIHx8IG9wdGlvblkpIHtcbiAgICAgIG9mZnNldFggPSAob3B0aW9uWCB8fCAwKTtcbiAgICAgIG9mZnNldFkgPSAob3B0aW9uWSB8fCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0WCA9IChzaXplLncgLyAyKTtcbiAgICAgIG9mZnNldFkgPSAoc2l6ZS5oIC8gMik7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgdGhlIG9mZnNldHNcbiAgICBjb29yZGluYXRlcy54ID0gcG9zLnggKyBvZmZzZXRYO1xuICAgIGNvb3JkaW5hdGVzLnkgPSBwb3MueSArIG9mZnNldFk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbW92ZVRvIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWQgaW4gYXMgb2Zmc2V0c1xuICAgIGNvb3JkaW5hdGVzLmFyZU9mZnNldHMgPSAoZ2VzdHVyZS5hY3Rpb24gPT09ICdtb3ZlVG8nKTtcbiAgICBjb29yZGluYXRlcy54ID0gKG9wdGlvblggfHwgMCk7XG4gICAgY29vcmRpbmF0ZXMueSA9IChvcHRpb25ZIHx8IDApO1xuICB9XG4gIHJldHVybiBjb29yZGluYXRlcztcbn07XG5cbmhlbHBlcnMuYXBwbHlNb3ZlVG9PZmZzZXQgPSBmdW5jdGlvbiBhcHBseU1vdmVUb09mZnNldCAoZmlyc3RDb29yZGluYXRlcywgc2Vjb25kQ29vcmRpbmF0ZXMpIHtcbiAgaWYgKHNlY29uZENvb3JkaW5hdGVzLmFyZU9mZnNldHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogZmlyc3RDb29yZGluYXRlcy54ICsgc2Vjb25kQ29vcmRpbmF0ZXMueCxcbiAgICAgIHk6IGZpcnN0Q29vcmRpbmF0ZXMueSArIHNlY29uZENvb3JkaW5hdGVzLnksXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc2Vjb25kQ29vcmRpbmF0ZXM7XG4gIH1cbn07XG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucywgaGVscGVycywgY29tbWFuZHMpO1xuZXhwb3J0IHsgZXh0ZW5zaW9ucywgaGVscGVycywgY29tbWFuZHMsIGdlc3R1cmVzQ2hhaW5Ub1N0cmluZyB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLDRCQUE0QixHQUFHLENBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxNQUFmLEVBQXVCLE9BQXZCLENBQXJDO0FBRUEsTUFBTUMsT0FBTyxHQUFHLEVBQWhCO0FBQUEsTUFBb0JDLFVBQVUsR0FBRyxFQUFqQztBQUFBLE1BQXFDQyxRQUFRLEdBQUcsRUFBaEQ7Ozs7O0FBRUEsU0FBU0MsV0FBVCxDQUFzQkMsSUFBSSxHQUFHLEVBQTdCLEVBQWlDO0VBQy9CLElBQUlBLElBQUksQ0FBQ0MsT0FBVCxFQUFrQjtJQUNoQkMsZUFBQSxDQUFJQyxJQUFKLENBQVUsK0VBQVY7RUFDRDs7RUFDRCxNQUFNQyxFQUFFLEdBQUdKLElBQUksQ0FBQ0ssU0FBTCxJQUFrQkwsSUFBSSxDQUFDQyxPQUFsQztFQUNBLE9BQU9HLEVBQUUsR0FBR0UsYUFBQSxDQUFLQyxhQUFMLENBQW1CSCxFQUFuQixDQUFILEdBQTRCLElBQXJDO0FBQ0Q7O0FBRUQsZUFBZUksd0JBQWYsQ0FBeUNDLE1BQXpDLEVBQWlEVCxJQUFJLEdBQUcsRUFBeEQsRUFBNEQ7RUFDMUQsT0FBT0QsV0FBVyxDQUFDQyxJQUFELENBQVgsSUFDRk0sYUFBQSxDQUFLQyxhQUFMLENBQW1CLE1BQU1FLE1BQU0sQ0FBQ0Ms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
