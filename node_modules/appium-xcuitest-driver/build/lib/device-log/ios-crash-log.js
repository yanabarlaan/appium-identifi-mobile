"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.IOSCrashLog = void 0;

require("source-map-support/register");

var _support = require("@appium/support");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _logger = _interopRequireDefault(require("../logger"));

var _appiumIosDevice = require("appium-ios-device");

var _path = _interopRequireDefault(require("path"));

var _lodash = _interopRequireDefault(require("lodash"));

var _pyIosDeviceClient = _interopRequireDefault(require("../py-ios-device-client"));

const REAL_DEVICE_MAGIC = '3620bbb0-fb9f-4b62-a668-896f2edc4d88';
const MAGIC_SEP = '/';

class IOSCrashLog {
  constructor(opts = {}) {
    this.udid = opts.udid;
    this.pyideviceClient = this.udid ? new _pyIosDeviceClient.default(this.udid) : null;
    const logDir = opts.udid ? _path.default.resolve(process.env.HOME, 'Library', 'Logs', 'CrashReporter', 'MobileDevice') : _path.default.resolve(process.env.HOME, 'Library', 'Logs', 'DiagnosticReports');
    this.logDir = logDir || _path.default.resolve(process.env.HOME || '/', 'Library', 'Logs', 'DiagnosticReports');
    this.prevLogs = [];
    this.logsSinceLastRequest = [];
    this.phoneName = null;
    this.sim = opts.sim;
  }

  async _gatherFromRealDevice() {
    if (await this.pyideviceClient.assertExists(false)) {
      return (await this.pyideviceClient.listCrashes()).map(x => `${REAL_DEVICE_MAGIC}${MAGIC_SEP}${x}`);
    }

    let crashLogsRoot = this.logDir;

    if (this.udid) {
      this.phoneName = this.phoneName || (await _appiumIosDevice.utilities.getDeviceName(this.udid));
      crashLogsRoot = _path.default.resolve(crashLogsRoot, this.phoneName);
    }

    if (!(await _support.fs.exists(crashLogsRoot))) {
      _logger.default.debug(`Crash reports root '${crashLogsRoot}' does not exist. Got nothing to gather.`);

      return [];
    }

    const foundFiles = await _support.fs.glob(`${crashLogsRoot}/**/*.crash`, {
      strict: false
    });
    return foundFiles;
  }

  async _gatherFromSimulator() {
    if (!(await _support.fs.exists(this.logDir))) {
      _logger.default.debug(`Crash reports root '${this.logDir}' does not exist. Got nothing to gather.`);

      return [];
    }

    const foundFiles = await _support.fs.glob(`${this.logDir}/**/*.crash`, {
      strict: false
    });
    return await _bluebird.default.filter(foundFiles, async x => {
      try {
        const content = await _support.fs.readFile(x, 'utf8');
        return content.toUpperCase().includes(this.sim.udid.toUpperCase());
      } catch (err) {
        return false;
      }
    });
  }

  async getCrashes() {
    return this.udid ? await this._gatherFromRealDevice() : await this._gatherFromSimulator();
  }

  async startCapture() {
    this.prevLogs = await this.getCrashes();
  }

  async stopCapture() {}

  async getLogs() {
    let crashFiles = await this.getCrashes();

    let diff = _lodash.default.difference(crashFiles, this.prevLogs, this.logsSinceLastRequest);

    this.logsSinceLastRequest = _lodash.default.union(this.logsSinceLastRequest, diff);
    return await this.filesToJSON(diff);
  }

  async getAllLogs() {
    let crashFiles = await this.getCrashes();

    let logFiles = _lodash.default.difference(crashFiles, this.prevLogs);

    return await this.filesToJSON(logFiles);
  }

  async filesToJSON(paths) {
    const tmpRoot = await _support.tempDir.openDir();

    try {
      return (await _bluebird.default.map(paths, async fullPath => {
        if (_lodash.default.includes(fullPath, REAL_DEVICE_MAGIC)) {
          const fileName = _lodash.default.last(fullPath.split(MAGIC_SEP));

          try {
            await this.pyideviceClient.exportCrash(fileName, tmpRoot);
          } catch (e) {
            _logger.default.warn(`Cannot export the crash report '${fileName}'. Skipping it. ` + `Original error: ${e.message}`);

            return;
          }

          fullPath = _path.default.join(tmpRoot, fileName);
        }

        const stat = await _support.fs.stat(fullPath);
        return {
          timestamp: stat.ctime.getTime(),
          level: 'ALL',
          message: await _support.fs.readFile(fullPath, 'utf8')
        };
      })).filter(Boolean);
    } finally {
      await _support.fs.rimraf(tmpRoot);
    }
  }

}

exports.IOSCrashLog = IOSCrashLog;
var _default = IOSCrashLog;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL2RldmljZS1sb2cvaW9zLWNyYXNoLWxvZy5qcyIsIm5hbWVzIjpbIlJFQUxfREVWSUNFX01BR0lDIiwiTUFHSUNfU0VQIiwiSU9TQ3Jhc2hMb2ciLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJ1ZGlkIiwicHlpZGV2aWNlQ2xpZW50IiwiUHlpZGV2aWNlIiwibG9nRGlyIiwicGF0aCIsInJlc29sdmUiLCJwcm9jZXNzIiwiZW52IiwiSE9NRSIsInByZXZMb2dzIiwibG9nc1NpbmNlTGFzdFJlcXVlc3QiLCJwaG9uZU5hbWUiLCJzaW0iLCJfZ2F0aGVyRnJvbVJlYWxEZXZpY2UiLCJhc3NlcnRFeGlzdHMiLCJsaXN0Q3Jhc2hlcyIsIm1hcCIsIngiLCJjcmFzaExvZ3NSb290IiwidXRpbGl0aWVzIiwiZ2V0RGV2aWNlTmFtZSIsImZzIiwiZXhpc3RzIiwibG9nIiwiZGVidWciLCJmb3VuZEZpbGVzIiwiZ2xvYiIsInN0cmljdCIsIl9nYXRoZXJGcm9tU2ltdWxhdG9yIiwiQiIsImZpbHRlciIsImNvbnRlbnQiLCJyZWFkRmlsZSIsInRvVXBwZXJDYXNlIiwiaW5jbHVkZXMiLCJlcnIiLCJnZXRDcmFzaGVzIiwic3RhcnRDYXB0dXJlIiwic3RvcENhcHR1cmUiLCJnZXRMb2dzIiwiY3Jhc2hGaWxlcyIsImRpZmYiLCJfIiwiZGlmZmVyZW5jZSIsInVuaW9uIiwiZmlsZXNUb0pTT04iLCJnZXRBbGxMb2dzIiwibG9nRmlsZXMiLCJwYXRocyIsInRtcFJvb3QiLCJ0ZW1wRGlyIiwib3BlbkRpciIsImZ1bGxQYXRoIiwiZmlsZU5hbWUiLCJsYXN0Iiwic3BsaXQiLCJleHBvcnRDcmFzaCIsImUiLCJ3YXJuIiwibWVzc2FnZSIsImpvaW4iLCJzdGF0IiwidGltZXN0YW1wIiwiY3RpbWUiLCJnZXRUaW1lIiwibGV2ZWwiLCJCb29sZWFuIiwicmltcmFmIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiIsInNvdXJjZXMiOlsibGliL2RldmljZS1sb2cvaW9zLWNyYXNoLWxvZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcywgdGVtcERpciB9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyB1dGlsaXRpZXMgfSBmcm9tICdhcHBpdW0taW9zLWRldmljZSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUHlpZGV2aWNlIGZyb20gJy4uL3B5LWlvcy1kZXZpY2UtY2xpZW50JztcblxuY29uc3QgUkVBTF9ERVZJQ0VfTUFHSUMgPSAnMzYyMGJiYjAtZmI5Zi00YjYyLWE2NjgtODk2ZjJlZGM0ZDg4JztcbmNvbnN0IE1BR0lDX1NFUCA9ICcvJztcblxuXG5jbGFzcyBJT1NDcmFzaExvZyB7XG4gIGNvbnN0cnVjdG9yIChvcHRzID0ge30pIHtcbiAgICB0aGlzLnVkaWQgPSBvcHRzLnVkaWQ7XG4gICAgdGhpcy5weWlkZXZpY2VDbGllbnQgPSB0aGlzLnVkaWQgPyBuZXcgUHlpZGV2aWNlKHRoaXMudWRpZCkgOiBudWxsO1xuICAgIGNvbnN0IGxvZ0RpciA9IG9wdHMudWRpZFxuICAgICAgPyBwYXRoLnJlc29sdmUocHJvY2Vzcy5lbnYuSE9NRSwgJ0xpYnJhcnknLCAnTG9ncycsICdDcmFzaFJlcG9ydGVyJywgJ01vYmlsZURldmljZScpXG4gICAgICA6IHBhdGgucmVzb2x2ZShwcm9jZXNzLmVudi5IT01FLCAnTGlicmFyeScsICdMb2dzJywgJ0RpYWdub3N0aWNSZXBvcnRzJyk7XG4gICAgdGhpcy5sb2dEaXIgPSBsb2dEaXJcbiAgICAgIHx8IHBhdGgucmVzb2x2ZShwcm9jZXNzLmVudi5IT01FIHx8ICcvJywgJ0xpYnJhcnknLCAnTG9ncycsICdEaWFnbm9zdGljUmVwb3J0cycpO1xuICAgIHRoaXMucHJldkxvZ3MgPSBbXTtcbiAgICB0aGlzLmxvZ3NTaW5jZUxhc3RSZXF1ZXN0ID0gW107XG4gICAgdGhpcy5waG9uZU5hbWUgPSBudWxsO1xuICAgIHRoaXMuc2ltID0gb3B0cy5zaW07XG4gIH1cblxuICBhc3luYyBfZ2F0aGVyRnJvbVJlYWxEZXZpY2UgKCkge1xuICAgIGlmIChhd2FpdCB0aGlzLnB5aWRldmljZUNsaWVudC5hc3NlcnRFeGlzdHMoZmFsc2UpKSB7XG4gICAgICByZXR1cm4gKGF3YWl0IHRoaXMucHlpZGV2aWNlQ2xpZW50Lmxpc3RDcmFzaGVzKCkpXG4gICAgICAgIC5tYXAoKHgpID0+IGAke1JFQUxfREVWSUNFX01BR0lDfSR7TUFHSUNfU0VQfSR7eH1gKTtcbiAgICB9XG5cbiAgICBsZXQgY3Jhc2hMb2dzUm9vdCA9IHRoaXMubG9nRGlyO1xuICAgIGlmICh0aGlzLnVkaWQpIHtcbiAgICAgIHRoaXMucGhvbmVOYW1lID0gdGhpcy5waG9uZU5hbWUgfHwgYXdhaXQgdXRpbGl0aWVzLmdldERldmljZU5hbWUodGhpcy51ZGlkKTtcbiAgICAgIGNyYXNoTG9nc1Jvb3QgPSBwYXRoLnJlc29sdmUoY3Jhc2hMb2dzUm9vdCwgdGhpcy5waG9uZU5hbWUpO1xuICAgIH1cbiAgICBpZiAoIWF3YWl0IGZzLmV4aXN0cyhjcmFzaExvZ3NSb290KSkge1xuICAgICAgbG9nLmRlYnVnKGBDcmFzaCByZXBvcnRzIHJvb3QgJyR7Y3Jhc2hMb2dzUm9vdH0nIGRvZXMgbm90IGV4aXN0LiBHb3Qgbm90aGluZyB0byBnYXRoZXIuYCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGZvdW5kRmlsZXMgPSBhd2FpdCBmcy5nbG9iKGAke2NyYXNoTG9nc1Jvb3R9LyoqLyouY3Jhc2hgLCB7XG4gICAgICBzdHJpY3Q6IGZhbHNlXG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kRmlsZXM7XG4gIH1cblxuICBhc3luYyBfZ2F0aGVyRnJvbVNpbXVsYXRvciAoKSB7XG4gICAgaWYgKCFhd2FpdCBmcy5leGlzdHModGhpcy5sb2dEaXIpKSB7XG4gICAgICBsb2cuZGVidWcoYENyYXNoIHJlcG9ydHMgcm9vdCAnJHt0aGlzLmxvZ0Rpcn0nIGRvZXMgbm90IGV4aXN0LiBHb3Qgbm90aGluZyB0byBnYXRoZXIuYCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGZvdW5kRmlsZXMgPSBhd2FpdCBmcy5nbG9iKGAke3RoaXMubG9nRGlyfS8qKi8qLmNyYXNoYCwge1xuICAgICAgc3RyaWN0OiBmYWxzZVxuICAgIH0pO1xuICAgIC8vIEZvciBTaW11bGF0b3Igb25seSBpbmNsdWRlIGZpbGVzLCB0aGF0IGNvbnRhaW4gY3VycmVudCBVRElEXG4gICAgcmV0dXJuIGF3YWl0IEIuZmlsdGVyKGZvdW5kRmlsZXMsIGFzeW5jICh4KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoeCwgJ3V0ZjgnKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQudG9VcHBlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNpbS51ZGlkLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldENyYXNoZXMgKCkge1xuICAgIHJldHVybiB0aGlzLnVkaWRcbiAgICAgID8gYXdhaXQgdGhpcy5fZ2F0aGVyRnJvbVJlYWxEZXZpY2UoKVxuICAgICAgOiBhd2FpdCB0aGlzLl9nYXRoZXJGcm9tU2ltdWxhdG9yKCk7XG4gIH1cblxuICBhc3luYyBzdGFydENhcHR1cmUgKCkge1xuICAgIHRoaXMucHJldkxvZ3MgPSBhd2FpdCB0aGlzLmdldENyYXNoZXMoKTtcbiAgfVxuXG4gIGFzeW5jIHN0b3BDYXB0dXJlICgpIHtcbiAgICAvLyBuZWVkZWQgZm9yIGNvbnNpc3RlbnQgQVBJIHdpdGggb3RoZXIgbG9nc1xuICB9XG5cbiAgYXN5bmMgZ2V0TG9ncyAoKSB7XG4gICAgbGV0IGNyYXNoRmlsZXMgPSBhd2FpdCB0aGlzLmdldENyYXNoZXMoKTtcbiAgICBsZXQgZGlmZiA9IF8uZGlmZmVyZW5jZShjcmFzaEZpbGVzLCB0aGlzLnByZXZMb2dzLCB0aGlzLmxvZ3NTaW5jZUxhc3RSZXF1ZXN0KTtcbiAgICB0aGlzLmxvZ3NTaW5jZUxhc3RSZXF1ZXN0ID0gXy51bmlvbih0aGlzLmxvZ3NTaW5jZUxhc3RSZXF1ZXN0LCBkaWZmKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5maWxlc1RvSlNPTihkaWZmKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbExvZ3MgKCkge1xuICAgIGxldCBjcmFzaEZpbGVzID0gYXdhaXQgdGhpcy5nZXRDcmFzaGVzKCk7XG4gICAgbGV0IGxvZ0ZpbGVzID0gXy5kaWZmZXJlbmNlKGNyYXNoRmlsZXMsIHRoaXMucHJldkxvZ3MpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbGVzVG9KU09OKGxvZ0ZpbGVzKTtcbiAgfVxuXG4gIGFzeW5jIGZpbGVzVG9KU09OIChwYXRocykge1xuICAgIGNvbnN0IHRtcFJvb3QgPSBhd2FpdCB0ZW1wRGlyLm9wZW5EaXIoKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChhd2FpdCBCLm1hcChwYXRocywgYXN5bmMgKGZ1bGxQYXRoKSA9PiB7XG4gICAgICAgIGlmIChfLmluY2x1ZGVzKGZ1bGxQYXRoLCBSRUFMX0RFVklDRV9NQUdJQykpIHtcbiAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IF8ubGFzdChmdWxsUGF0aC5zcGxpdChNQUdJQ19TRVApKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5weWlkZXZpY2VDbGllbnQuZXhwb3J0Q3Jhc2goZmlsZU5hbWUsIHRtcFJvb3QpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZy53YXJuKGBDYW5ub3QgZXhwb3J0IHRoZSBjcmFzaCByZXBvcnQgJyR7ZmlsZU5hbWV9Jy4gU2tpcHBpbmcgaXQuIGAgK1xuICAgICAgICAgICAgICBgT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmdWxsUGF0aCA9IHBhdGguam9pbih0bXBSb290LCBmaWxlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdCA9IGF3YWl0IGZzLnN0YXQoZnVsbFBhdGgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpbWVzdGFtcDogc3RhdC5jdGltZS5nZXRUaW1lKCksXG4gICAgICAgICAgbGV2ZWw6ICdBTEwnLFxuICAgICAgICAgIG1lc3NhZ2U6IGF3YWl0IGZzLnJlYWRGaWxlKGZ1bGxQYXRoLCAndXRmOCcpXG4gICAgICAgIH07XG4gICAgICB9KSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCBmcy5yaW1yYWYodG1wUm9vdCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IElPU0NyYXNoTG9nIH07XG5leHBvcnQgZGVmYXVsdCBJT1NDcmFzaExvZztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQSxNQUFNQSxpQkFBaUIsR0FBRyxzQ0FBMUI7QUFDQSxNQUFNQyxTQUFTLEdBQUcsR0FBbEI7O0FBR0EsTUFBTUMsV0FBTixDQUFrQjtFQUNoQkMsV0FBVyxDQUFFQyxJQUFJLEdBQUcsRUFBVCxFQUFhO0lBQ3RCLEtBQUtDLElBQUwsR0FBWUQsSUFBSSxDQUFDQyxJQUFqQjtJQUNBLEtBQUtDLGVBQUwsR0FBdUIsS0FBS0QsSUFBTCxHQUFZLElBQUlFLDBCQUFKLENBQWMsS0FBS0YsSUFBbkIsQ0FBWixHQUF1QyxJQUE5RDtJQUNBLE1BQU1HLE1BQU0sR0FBR0osSUFBSSxDQUFDQyxJQUFMLEdBQ1hJLGFBQUEsQ0FBS0MsT0FBTCxDQUFhQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBekIsRUFBK0IsU0FBL0IsRUFBMEMsTUFBMUMs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
