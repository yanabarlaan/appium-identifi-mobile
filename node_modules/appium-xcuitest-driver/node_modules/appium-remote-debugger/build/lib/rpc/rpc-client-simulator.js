"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _logger = _interopRequireDefault(require("../logger"));

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _net = _interopRequireDefault(require("net"));

var _rpcClient = _interopRequireDefault(require("./rpc-client"));

var _appiumIosDevice = require("appium-ios-device");

class RpcClientSimulator extends _rpcClient.default {
  constructor(opts = {}) {
    super(Object.assign({
      shouldCheckForTarget: false
    }, opts));
    const {
      socketPath,
      host = '::1',
      port,
      messageProxy
    } = opts;
    this.host = host;
    this.port = port;
    this.messageProxy = messageProxy;
    this.socket = null;
    this.socketPath = socketPath;
  }

  async connect() {
    if (this.socketPath) {
      if (this.messageProxy) {
        _logger.default.debug(`Connecting to remote debugger via proxy through unix domain socket: '${this.messageProxy}'`);

        this.socket = _net.default.connect(this.messageProxy);
        this.socket.once('connect', () => {
          _logger.default.debug(`Forwarding the actual web inspector socket to the proxy: '${this.socketPath}'`);

          this.socket.write(JSON.stringify({
            socketPath: this.socketPath
          }));
        });
      } else {
        _logger.default.debug(`Connecting to remote debugger through unix domain socket: '${this.socketPath}'`);

        this.socket = _net.default.connect(this.socketPath);
      }
    } else {
      if (this.messageProxy) {
        this.port = this.messageProxy;
      }

      _logger.default.debug(`Connecting to remote debugger ${this.messageProxy ? 'via proxy ' : ''}through TCP: ${this.host}:${this.port}`);

      this.socket = new _net.default.Socket({
        type: 'tcp6'
      });
      this.socket.connect(this.port, this.host);
    }

    this.socket.setNoDelay(true);
    this.socket.setKeepAlive(true);
    this.socket.on('close', () => {
      if (this.isConnected) {
        _logger.default.debug('Debugger socket disconnected');
      }

      this.isConnected = false;
      this.socket = null;
    });
    this.socket.on('end', () => {
      this.isConnected = false;
    });
    this.service = await _appiumIosDevice.services.startWebInspectorService(this.udid, {
      socket: this.socket,
      isSimulator: true,
      osVersion: this.platformVersion,
      verbose: this.logAllCommunication,
      verboseHexDump: this.logAllCommunicationHexDump,
      maxFrameLength: this.webInspectorMaxFrameLength
    });
    this.service.listenMessage(this.receive.bind(this));
    return await new _bluebird.default((resolve, reject) => {
      this.socket.on('connect', () => {
        _logger.default.debug(`Debugger socket connected`);

        this.isConnected = true;
        resolve();
      });
      this.socket.on('error', err => {
        if (this.isConnected) {
          _logger.default.error(`Socket error: ${err.message}`);

          this.isConnected = false;
        }

        reject(err);
      });
    });
  }

  async disconnect() {
    if (!this.isConnected) {
      return;
    }

    _logger.default.debug('Disconnecting from remote debugger');

    await super.disconnect();
    this.service.close();
    this.isConnected = false;
  }

  async sendMessage(cmd) {
    let onSocketError;
    return await new _bluebird.default((resolve, reject) => {
      onSocketError = err => {
        _logger.default.error(`Socket error: ${err.message}`);

        reject(err);
      };

      this.socket.on('error', onSocketError);
      this.service.sendMessage(cmd);
      resolve();
    }).finally(() => {
      try {
        this.socket.removeListener('error', onSocketError);
      } catch (ign) {}
    });
  }

  async receive(data) {
    if (!this.isConnected) {
      return;
    }

    if (!data) {
      return;
    }

    for (const key of ['WIRMessageDataKey', 'WIRDestinationKey', 'WIRSocketDataKey']) {
      if (!_lodash.default.isUndefined(data[key])) {
        data[key] = data[key].toString('utf8');
      }
    }

    await this.messageHandler.handleMessage(data);
  }

}

exports.default = RpcClientSimulator;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3JwYy9ycGMtY2xpZW50LXNpbXVsYXRvci5qcyIsIm5hbWVzIjpbIlJwY0NsaWVudFNpbXVsYXRvciIsIlJwY0NsaWVudCIsImNvbnN0cnVjdG9yIiwib3B0cyIsIk9iamVjdCIsImFzc2lnbiIsInNob3VsZENoZWNrRm9yVGFyZ2V0Iiwic29ja2V0UGF0aCIsImhvc3QiLCJwb3J0IiwibWVzc2FnZVByb3h5Iiwic29ja2V0IiwiY29ubmVjdCIsImxvZyIsImRlYnVnIiwibmV0Iiwib25jZSIsIndyaXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsIlNvY2tldCIsInR5cGUiLCJzZXROb0RlbGF5Iiwic2V0S2VlcEFsaXZlIiwib24iLCJpc0Nvbm5lY3RlZCIsInNlcnZpY2UiLCJzZXJ2aWNlcyIsInN0YXJ0V2ViSW5zcGVjdG9yU2VydmljZSIsInVkaWQiLCJpc1NpbXVsYXRvciIsIm9zVmVyc2lvbiIsInBsYXRmb3JtVmVyc2lvbiIsInZlcmJvc2UiLCJsb2dBbGxDb21tdW5pY2F0aW9uIiwidmVyYm9zZUhleER1bXAiLCJsb2dBbGxDb21tdW5pY2F0aW9uSGV4RHVtcCIsIm1heEZyYW1lTGVuZ3RoIiwid2ViSW5zcGVjdG9yTWF4RnJhbWVMZW5ndGgiLCJsaXN0ZW5NZXNzYWdlIiwicmVjZWl2ZSIsImJpbmQiLCJCIiwicmVzb2x2ZSIsInJlamVjdCIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImRpc2Nvbm5lY3QiLCJjbG9zZSIsInNlbmRNZXNzYWdlIiwiY21kIiwib25Tb2NrZXRFcnJvciIsImZpbmFsbHkiLCJyZW1vdmVMaXN0ZW5lciIsImlnbiIsImRhdGEiLCJrZXkiLCJfIiwiaXNVbmRlZmluZWQiLCJ0b1N0cmluZyIsIm1lc3NhZ2VIYW5kbGVyIiwiaGFuZGxlTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4iLCJzb3VyY2VzIjpbImxpYi9ycGMvcnBjLWNsaWVudC1zaW11bGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZyBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBuZXQgZnJvbSAnbmV0JztcbmltcG9ydCBScGNDbGllbnQgZnJvbSAnLi9ycGMtY2xpZW50JztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnYXBwaXVtLWlvcy1kZXZpY2UnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJwY0NsaWVudFNpbXVsYXRvciBleHRlbmRzIFJwY0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yIChvcHRzID0ge30pIHtcbiAgICBzdXBlcihPYmplY3QuYXNzaWduKHtcbiAgICAgIHNob3VsZENoZWNrRm9yVGFyZ2V0OiBmYWxzZSxcbiAgICB9LCBvcHRzKSk7XG5cbiAgICBjb25zdCB7XG4gICAgICBzb2NrZXRQYXRoLFxuICAgICAgaG9zdCA9ICc6OjEnLFxuICAgICAgcG9ydCxcbiAgICAgIG1lc3NhZ2VQcm94eSxcbiAgICB9ID0gb3B0cztcblxuICAgIC8vIGhvc3QvcG9ydCBjb25maWcgZm9yIFRDUCBjb21tdW5pY2F0aW9uLCBzb2NrZXRQYXRoIGZvciB1bml4IGRvbWFpbiBzb2NrZXRzXG4gICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICB0aGlzLnBvcnQgPSBwb3J0O1xuICAgIHRoaXMubWVzc2FnZVByb3h5ID0gbWVzc2FnZVByb3h5O1xuXG4gICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICAgIHRoaXMuc29ja2V0UGF0aCA9IHNvY2tldFBhdGg7XG4gIH1cblxuICBhc3luYyBjb25uZWN0ICgpIHtcbiAgICAvLyBjcmVhdGUgc29ja2V0IGFuZCBoYW5kbGUgaXRzIG1lc3NhZ2VzXG4gICAgaWYgKHRoaXMuc29ja2V0UGF0aCkge1xuICAgICAgaWYgKHRoaXMubWVzc2FnZVByb3h5KSB7XG4gICAgICAgIC8vIHVuaXggZG9tYWluIHNvY2tldCB2aWEgcHJveHlcbiAgICAgICAgbG9nLmRlYnVnKGBDb25uZWN0aW5nIHRvIHJlbW90ZSBkZWJ1Z2dlciB2aWEgcHJveHkgdGhyb3VnaCB1bml4IGRvbWFpbiBzb2NrZXQ6ICcke3RoaXMubWVzc2FnZVByb3h5fSdgKTtcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBuZXQuY29ubmVjdCh0aGlzLm1lc3NhZ2VQcm94eSk7XG5cbiAgICAgICAgLy8gRm9yd2FyZCB0aGUgYWN0dWFsIHNvY2tldFBhdGggdG8gdGhlIHByb3h5XG4gICAgICAgIHRoaXMuc29ja2V0Lm9uY2UoJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgICAgbG9nLmRlYnVnKGBGb3J3YXJkaW5nIHRoZSBhY3R1YWwgd2ViIGluc3BlY3RvciBzb2NrZXQgdG8gdGhlIHByb3h5OiAnJHt0aGlzLnNvY2tldFBhdGh9J2ApO1xuICAgICAgICAgIHRoaXMuc29ja2V0LndyaXRlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHNvY2tldFBhdGg6IHRoaXMuc29ja2V0UGF0aFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVuaXggZG9tYWluIHNvY2tldFxuICAgICAgICBsb2cuZGVidWcoYENvbm5lY3RpbmcgdG8gcmVtb3RlIGRlYnVnZ2VyIHRocm91Z2ggdW5peCBkb21haW4gc29ja2V0OiAnJHt0aGlzLnNvY2tldFBhdGh9J2ApO1xuICAgICAgICB0aGlzLnNvY2tldCA9IG5ldC5jb25uZWN0KHRoaXMuc29ja2V0UGF0aCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2VQcm94eSkge1xuICAgICAgICAvLyBjb25uZWN0IHRvIHRoZSBwcm94eSBpbnN0ZWFkIG9mIHRoZSByZW1vdGUgZGVidWdnZXIgZGlyZWN0bHlcbiAgICAgICAgdGhpcy5wb3J0ID0gdGhpcy5tZXNzYWdlUHJveHk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRjcCBzb2NrZXRcbiAgICAgIGxvZy5kZWJ1ZyhgQ29ubmVjdGluZyB0byByZW1vdGUgZGVidWdnZXIgJHt0aGlzLm1lc3NhZ2VQcm94eSA/ICd2aWEgcHJveHkgJyA6ICcnfXRocm91Z2ggVENQOiAke3RoaXMuaG9zdH06JHt0aGlzLnBvcnR9YCk7XG4gICAgICB0aGlzLnNvY2tldCA9IG5ldyBuZXQuU29ja2V0KHt0eXBlOiAndGNwNid9KTtcbiAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QodGhpcy5wb3J0LCB0aGlzLmhvc3QpO1xuICAgIH1cblxuICAgIHRoaXMuc29ja2V0LnNldE5vRGVsYXkodHJ1ZSk7XG4gICAgdGhpcy5zb2NrZXQuc2V0S2VlcEFsaXZlKHRydWUpO1xuICAgIHRoaXMuc29ja2V0Lm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnRGVidWdnZXIgc29ja2V0IGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgfVxuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICAgIH0pO1xuICAgIHRoaXMuc29ja2V0Lm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgfSk7XG4gICAgdGhpcy5zZXJ2aWNlID0gYXdhaXQgc2VydmljZXMuc3RhcnRXZWJJbnNwZWN0b3JTZXJ2aWNlKHRoaXMudWRpZCwge1xuICAgICAgc29ja2V0OiB0aGlzLnNvY2tldCxcbiAgICAgIGlzU2ltdWxhdG9yOiB0cnVlLFxuICAgICAgb3NWZXJzaW9uOiB0aGlzLnBsYXRmb3JtVmVyc2lvbixcbiAgICAgIHZlcmJvc2U6IHRoaXMubG9nQWxsQ29tbXVuaWNhdGlvbixcbiAgICAgIHZlcmJvc2VIZXhEdW1wOiB0aGlzLmxvZ0FsbENvbW11bmljYXRpb25IZXhEdW1wLFxuICAgICAgbWF4RnJhbWVMZW5ndGg6IHRoaXMud2ViSW5zcGVjdG9yTWF4RnJhbWVMZW5ndGgsXG4gICAgfSk7XG4gICAgdGhpcy5zZXJ2aWNlLmxpc3Rlbk1lc3NhZ2UodGhpcy5yZWNlaXZlLmJpbmQodGhpcykpO1xuXG4gICAgLy8gY29ubmVjdCB0aGUgc29ja2V0XG4gICAgcmV0dXJuIGF3YWl0IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIC8vIG9ubHkgcmVzb2x2ZSB0aGlzIGZ1bmN0aW9uIHdoZW4gd2UgYXJlIGFjdHVhbGx5IGNvbm5lY3RlZFxuICAgICAgdGhpcy5zb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgIGxvZy5kZWJ1ZyhgRGVidWdnZXIgc29ja2V0IGNvbm5lY3RlZGApO1xuICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gdHJ1ZTtcblxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc29ja2V0Lm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICBsb2cuZXJyb3IoYFNvY2tldCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGUgY29ubmVjdGlvbiB3YXMgcmVmdXNlZCwgc28gcmVqZWN0IHRoZSBjb25uZWN0IHByb21pc2VcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QgKCkge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxvZy5kZWJ1ZygnRGlzY29ubmVjdGluZyBmcm9tIHJlbW90ZSBkZWJ1Z2dlcicpO1xuICAgIGF3YWl0IHN1cGVyLmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLnNlcnZpY2UuY2xvc2UoKTtcbiAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBhc3luYyBzZW5kTWVzc2FnZSAoY21kKSB7XG4gICAgbGV0IG9uU29ja2V0RXJyb3I7XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gaGFuZGxlIHNvY2tldCBwcm9ibGVtc1xuICAgICAgb25Tb2NrZXRFcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgbG9nLmVycm9yKGBTb2NrZXQgZXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG5cbiAgICAgICAgLy8gdGhlIGNvbm5lY3Rpb24gd2FzIHJlZnVzZWQsIHNvIHJlamVjdCB0aGUgY29ubmVjdCBwcm9taXNlXG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zb2NrZXQub24oJ2Vycm9yJywgb25Tb2NrZXRFcnJvcik7XG4gICAgICB0aGlzLnNlcnZpY2Uuc2VuZE1lc3NhZ2UoY21kKTtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIC8vIHJlbW92ZSB0aGlzIGxpc3RlbmVyLCBzbyB3ZSBkb24ndCBleGhhdXN0IHRoZSBzeXN0ZW1cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uU29ja2V0RXJyb3IpO1xuICAgICAgfSBjYXRjaCAoaWduKSB7fVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgcmVjZWl2ZSAoZGF0YSkge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnV0lSTWVzc2FnZURhdGFLZXknLCAnV0lSRGVzdGluYXRpb25LZXknLCAnV0lSU29ja2V0RGF0YUtleSddKSB7XG4gICAgICBpZiAoIV8uaXNVbmRlZmluZWQoZGF0YVtrZXldKSkge1xuICAgICAgICBkYXRhW2tleV0gPSBkYXRhW2tleV0udG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5tZXNzYWdlSGFuZGxlci5oYW5kbGVNZXNzYWdlKGRhdGEpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR2UsTUFBTUEsa0JBQU4sU0FBaUNDLGtCQUFqQyxDQUEyQztFQUN4REMsV0FBVyxDQUFFQyxJQUFJLEdBQUcsRUFBVCxFQUFhO0lBQ3RCLE1BQU1DLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjO01BQ2xCQyxvQkFBb0IsRUFBRTtJQURKLENBQWQsRUFFSEgsSUFGRyxDQUFOO0lBSUEsTUFBTTtNQUNKSSxVQURJO01BRUpDLElBQUksR0FBRyxLQUZIO01BR0pDLElBSEk7TUFJSkM7SUFKSSxJQUtGUCxJQUxKO0lBUUEsS0FBS0ssSUFBTCxHQUFZQSxJQUFaO0lBQ0EsS0FBS0MsSUFBTCxHQUFZQSxJQUFaO0lBQ0EsS0FBS0MsWUFBTCxHQUFvQkEsWUFBcEI7SUFFQSxLQUFLQyxNQUFMLEdBQWMsSUFBZDtJQUNBLEtBQUtKLFVBQUwsR0FBa0JBLFVBQWxCO0VBQ0Q7O0VBRVksTUFBUEssT0FBTyxHQUFJO0lBRWYsSUFBSSxLQUFLTCxVQUFULEVBQXFCO01BQ25CLElBQUksS0FBS0csWUFBVCxFQUF1QjtRQUVyQkcsZ0JBQUlDLEtBQUosQ0FBVyx3RUFBdUUsS0FBS0osWUFBYSxHQUFwRzs7UUFDQSxLQUFLQyxNQUFMLEdBQWNJLGFBQUlILE9BQUosQ0FBWSxLQUFLRixZQUFqQixDQUFkO1FBR0EsS0FBS0MsTUFBTCxDQUFZSyxJQUFaLENBQWlCLFNBQWpCLEVBQTRCLE1BQU07VUFDaENILGdCQUFJQyxLQUFKLENBQVcsNkRBQTRELEtBQUtQLFVBQVcsR0FBdkY7O1VBQ0EsS0FBS0ksTUFBTCxDQUFZTSxLQUFaLENBQWtCQyxJQUFJLENBQUNDLFNBQUwsQ0FBZTtZQUMvQlosVUFBVSxFQUFFLEtBQUtBO1VBRGMsQ0FBZixDQUFsQjtRQUdELENBTEQ7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
