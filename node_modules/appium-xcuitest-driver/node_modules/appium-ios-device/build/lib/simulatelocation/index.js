"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.SimulateLocationService = exports.SIMULATE_LOCATION_SERVICE_NAME = void 0;

require("source-map-support/register");

var _baseService = require("../base-service");

const SIMULATE_LOCATION_SERVICE_NAME = 'com.apple.dt.simulatelocation';
exports.SIMULATE_LOCATION_SERVICE_NAME = SIMULATE_LOCATION_SERVICE_NAME;
const RESET_MESSAGE = Buffer.from([0, 0, 0, 1]);
const SET_LOCATION_MESSAGE = Buffer.from([0, 0, 0, 0]);

class SimulateLocationService extends _baseService.BaseServiceSocket {
  resetLocation() {
    this._socketClient.write(RESET_MESSAGE);
  }

  setLocation(lat, long) {
    lat = `${lat}`;
    long = `${long}`;
    const lat_length = Buffer.alloc(4);
    lat_length.writeInt32BE(lat.length);
    const long_length = Buffer.alloc(4);
    long_length.writeInt32BE(long.length);

    this._socketClient.write(SET_LOCATION_MESSAGE);

    this._socketClient.write(lat_length);

    this._socketClient.write(lat);

    this._socketClient.write(long_length);

    this._socketClient.write(long);
  }

}

exports.SimulateLocationService = SimulateLocationService;
var _default = SimulateLocationService;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3NpbXVsYXRlbG9jYXRpb24vaW5kZXguanMiLCJuYW1lcyI6WyJTSU1VTEFURV9MT0NBVElPTl9TRVJWSUNFX05BTUUiLCJSRVNFVF9NRVNTQUdFIiwiQnVmZmVyIiwiZnJvbSIsIlNFVF9MT0NBVElPTl9NRVNTQUdFIiwiU2ltdWxhdGVMb2NhdGlvblNlcnZpY2UiLCJCYXNlU2VydmljZVNvY2tldCIsInJlc2V0TG9jYXRpb24iLCJfc29ja2V0Q2xpZW50Iiwid3JpdGUiLCJzZXRMb2NhdGlvbiIsImxhdCIsImxvbmciLCJsYXRfbGVuZ3RoIiwiYWxsb2MiLCJ3cml0ZUludDMyQkUiLCJsZW5ndGgiLCJsb25nX2xlbmd0aCJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4iLCJzb3VyY2VzIjpbImxpYi9zaW11bGF0ZWxvY2F0aW9uL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VTZXJ2aWNlU29ja2V0IH0gZnJvbSAnLi4vYmFzZS1zZXJ2aWNlJztcblxuXG5jb25zdCBTSU1VTEFURV9MT0NBVElPTl9TRVJWSUNFX05BTUUgPSAnY29tLmFwcGxlLmR0LnNpbXVsYXRlbG9jYXRpb24nO1xuXG5jb25zdCBSRVNFVF9NRVNTQUdFID0gQnVmZmVyLmZyb20oWzAsIDAsIDAsIDFdKTtcbmNvbnN0IFNFVF9MT0NBVElPTl9NRVNTQUdFID0gQnVmZmVyLmZyb20oWzAsIDAsIDAsIDBdKTtcblxuY2xhc3MgU2ltdWxhdGVMb2NhdGlvblNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZVNvY2tldCB7XG4gIC8qKlxuICAgKiBSZXNldCB0aGUgbW9jayBsb2NhdGlvbiB0byB0aGUgcGhvbmVzIG9yaWdpbmFsIHNldHRpbmdzXG4gICAqL1xuICByZXNldExvY2F0aW9uICgpIHtcbiAgICB0aGlzLl9zb2NrZXRDbGllbnQud3JpdGUoUkVTRVRfTUVTU0FHRSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBtb2NrIGxvY2F0aW9uIG9uIHRoZSBkZXZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBsYXQgVGhlIGxhdGl0dWRlIHRoYXQgd2FudHMgdG8gYmUgc2V0IG9uIHRoZSBkZXZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBsb25nIFRoZSBsb25naXR1ZGUgdGhhdCB3YW50cyB0byBiZSBzZXQgb24gdGhlIGRldmljZVxuICAgKi9cbiAgc2V0TG9jYXRpb24gKGxhdCwgbG9uZykge1xuICAgIGxhdCA9IGAke2xhdH1gO1xuICAgIGxvbmcgPSBgJHtsb25nfWA7XG5cbiAgICBjb25zdCBsYXRfbGVuZ3RoID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGxhdF9sZW5ndGgud3JpdGVJbnQzMkJFKGxhdC5sZW5ndGgpO1xuXG4gICAgY29uc3QgbG9uZ19sZW5ndGggPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgbG9uZ19sZW5ndGgud3JpdGVJbnQzMkJFKGxvbmcubGVuZ3RoKTtcblxuICAgIHRoaXMuX3NvY2tldENsaWVudC53cml0ZShTRVRfTE9DQVRJT05fTUVTU0FHRSk7XG5cbiAgICB0aGlzLl9zb2NrZXRDbGllbnQud3JpdGUobGF0X2xlbmd0aCk7XG4gICAgdGhpcy5fc29ja2V0Q2xpZW50LndyaXRlKGxhdCk7XG5cbiAgICB0aGlzLl9zb2NrZXRDbGllbnQud3JpdGUobG9uZ19sZW5ndGgpO1xuICAgIHRoaXMuX3NvY2tldENsaWVudC53cml0ZShsb25nKTtcbiAgfVxufVxuXG5leHBvcnQgeyBTaW11bGF0ZUxvY2F0aW9uU2VydmljZSwgU0lNVUxBVEVfTE9DQVRJT05fU0VSVklDRV9OQU1FIH07XG5leHBvcnQgZGVmYXVsdCBTaW11bGF0ZUxvY2F0aW9uU2VydmljZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBR0EsTUFBTUEsOEJBQThCLEdBQUcsK0JBQXZDOztBQUVBLE1BQU1DLGFBQWEsR0FBR0MsTUFBTSxDQUFDQyxJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLENBQVosQ0FBdEI7QUFDQSxNQUFNQyxvQkFBb0IsR0FBR0YsTUFBTSxDQUFDQyxJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLENBQVosQ0FBN0I7O0FBRUEsTUFBTUUsdUJBQU4sU0FBc0NDLDhCQUF0QyxDQUF3RDtFQUl0REMsYUFBYSxHQUFJO0lBQ2YsS0FBS0MsYUFBTCxDQUFtQkMsS0FBbkIsQ0FBeUJSLGFBQXpCO0VBQ0Q7O0VBT0RTLFdBQVcsQ0FBRUMsR0FBRixFQUFPQyxJQUFQLEVBQWE7SUFDdEJELEdBQUcsR0FBSSxHQUFFQSxHQUFJLEVBQWI7SUFDQUMsSUFBSSxHQUFJLEdBQUVBLElBQUssRUFBZjtJQUVBLE1BQU1DLFVBQVUsR0FBR1gsTUFBTSxDQUFDWSxLQUFQLENBQWEsQ0FBYixDQUFuQjtJQUNBRCxVQUFVLENBQUNFLFlBQVgsQ0FBd0JKLEdBQUcsQ0FBQ0ssTUFBNUI7SUFFQSxNQUFNQyxXQUFXLEdBQUdmLE1BQU0sQ0FBQ1ksS0FBUCxDQUFhLENBQWIsQ0FBcEI7SUFDQUcsV0FBVyxDQUFDRixZQUFaLENBQXlCSCxJQUFJLENBQUNJLE1BQTlCOztJQUVBLEtBQUtSLGFBQUwsQ0FBbUJDLEtBQW5CLENBQXlCTCxvQkFBekI7O0lBRUEsS0FBS0ksYUFBTCxDQUFtQkMsS0FBbkIsQ0FBeUJJLFVBQXpCOztJQUNBLEtBQUtMLGFBQUwsQ0FBbUJDLEtBQW5CLENBQXlCRSxHQUF6Qjs7SUFFQSxLQUFLSCxhQUFMLENBQW1CQyxLQUFuQixDQUF5QlEsV0FBekI7O0lBQ0EsS0FBS1QsYUFBTCxDQUFtQkMsS0FBbkIsQ0FBeUJHLElBQXpCO0VBQ0Q7O0FBOUJxRDs7O2VBa0N6Q1AsdUIifQ==
