"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _simulatorXcode = require("./simulator-xcode-6");

var _simulatorXcode2 = _interopRequireDefault(require("./simulator-xcode-7"));

var _lodash = _interopRequireDefault(require("lodash"));

var _logger = _interopRequireDefault(require("./logger"));

var _teen_process = require("teen_process");

var _geolocation = require("./geolocation");

var _support = require("@appium/support");

var _utils = require("./utils");

const STARTUP_TIMEOUT = 120 * 1000;

class SimulatorXcode8 extends _simulatorXcode2.default {
  constructor(udid, xcodeVersion) {
    super(udid, xcodeVersion);
    this.isFreshFiles = ['Library/Cookies', 'Library/Preferences/.GlobalPreferences.plist', 'Library/Preferences/com.apple.springboard.plist', 'var/run/syslog.pid'];
    this._idb = null;
    this._locationMenu = 'Debug';
  }

  set idb(value) {
    this._idb = value;
  }

  get idb() {
    return this._idb;
  }

  async killUIClient(opts = {}) {
    let {
      pid,
      signal = 2
    } = opts;
    pid = pid || (await this.getUIClientPid());

    if (!pid) {
      return false;
    }

    _logger.default.debug(`Sending ${signal} kill signal to Simulator UI client with PID ${pid}`);

    try {
      await (0, _teen_process.exec)('kill', [`-${signal}`, pid]);
      return true;
    } catch (e) {
      if (e.code === 1) {
        return false;
      }

      throw new Error(`Cannot kill the Simulator UI client. Original error: ${e.message}`);
    }
  }

  async isAppInstalled(bundleId) {
    try {
      const appContainer = await this.simctl.getAppContainer(bundleId);
      return appContainer.endsWith('.app');
    } catch (err) {
      try {
        const info = await this.simctl.appInfo(bundleId);
        return info.includes('ApplicationType');
      } catch (e) {
        return false;
      }
    }
  }

  get startupTimeout() {
    return STARTUP_TIMEOUT;
  }

  async waitForBoot(startupTimeout) {
    await this.simctl.startBootMonitor({
      timeout: startupTimeout
    });
    this.emit(_simulatorXcode.BOOT_COMPLETED_EVENT);
  }

  async openUrl(url) {
    if (!(await this.isRunning())) {
      throw new Error(`Tried to open '${url}', but Simulator is not in Booted state`);
    }

    const timer = new _support.timing.Timer().start();

    try {
      await (0, _utils.launchApp)(this.simctl, _utils.MOBILE_SAFARI_BUNDLE_ID, _utils.SAFARI_STARTUP_TIMEOUT);
      await this.simctl.openUrl(url);
    } catch (err) {
      throw new Error(`Safari could not open '${url}' after ${timer.getDuration().asSeconds.toFixed(3)}s. ` + `Original error: ${err.stderr || err.message}`);
    }

    _logger.default.debug(`Safari successfully opened '${url}' in ${timer.getDuration().asSeconds.toFixed(3)}s`);
  }

  async cleanSafari(keepPrefs = true) {
    try {
      if (await this.isRunning()) {
        await this.simctl.terminateApp(_utils.MOBILE_SAFARI_BUNDLE_ID);
      }
    } catch (ign) {}

    await super.cleanSafari(keepPrefs);
  }

  async cleanCustomApp(appFile, appBundleId, scrub = false) {
    try {
      await this.simctl.terminateApp(appBundleId);
    } catch (ign) {}

    await super.cleanCustomApp(appFile, appBundleId, scrub);
  }

  async shake() {
    _logger.default.info(`Performing shake gesture on ${this.udid} Simulator`);

    await this.simctl.spawnProcess(['notifyutil', '-p', 'com.apple.UIKit.SimulatorShake']);
  }

  async isBiometricEnrolled() {
    const output = await this.executeUIClientScript(`
      tell application "System Events"
        tell process "Simulator"
          set dstMenuItem to menu item "Toggle Enrolled State" of menu 1 of menu item "Touch ID" of menu 1 of menu bar item "Hardware" of menu bar 1
          set isChecked to (value of attribute "AXMenuItemMarkChar" of dstMenuItem) is "✓"
        end tell
      end tell
    `);

    _logger.default.debug(`Touch ID enrolled state: ${output}`);

    return _lodash.default.isString(output) && output.trim() === 'true';
  }

  async enrollBiometric(isEnabled = true) {
    await this.executeUIClientScript(`
      tell application "System Events"
        tell process "Simulator"
          set dstMenuItem to menu item "Toggle Enrolled State" of menu 1 of menu item "Touch ID" of menu 1 of menu bar item "Hardware" of menu bar 1
          set isChecked to (value of attribute "AXMenuItemMarkChar" of dstMenuItem) is "✓"
          if ${isEnabled ? 'not ' : ''}isChecked then
            click dstMenuItem
          end if
        end tell
      end tell
    `);
  }

  async sendBiometricMatch(shouldMatch = true) {
    await this.executeUIClientScript(`
      tell application "System Events"
        tell process "Simulator"
          set dstMenuItem to menu item "${shouldMatch ? 'Matching Touch' : 'Non-matching Touch'}" of menu 1 of menu item "Touch ID" of menu 1 of menu bar item "Hardware" of menu bar 1
          click dstMenuItem
        end tell
      end tell
    `);
  }

  async setGeolocation(latitude, longitude) {
    const locationSetters = [async () => await (0, _geolocation.setLocationWithLyft)(this.udid, latitude, longitude), async () => await (0, _geolocation.setLocationWithIdb)(this.idb, latitude, longitude), async () => await (0, _geolocation.setLocationWithAppleScript)(this, latitude, longitude, this._locationMenu)];
    let lastError;

    for (const setter of locationSetters) {
      try {
        await setter();
        return true;
      } catch (e) {
        _logger.default.info(e.message);

        lastError = e;
      }
    }

    throw lastError;
  }

}

var _default = SimulatorXcode8;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3NpbXVsYXRvci14Y29kZS04LmpzIiwibmFtZXMiOlsiU1RBUlRVUF9USU1FT1VUIiwiU2ltdWxhdG9yWGNvZGU4IiwiU2ltdWxhdG9yWGNvZGU3IiwiY29uc3RydWN0b3IiLCJ1ZGlkIiwieGNvZGVWZXJzaW9uIiwiaXNGcmVzaEZpbGVzIiwiX2lkYiIsIl9sb2NhdGlvbk1lbnUiLCJpZGIiLCJ2YWx1ZSIsImtpbGxVSUNsaWVudCIsIm9wdHMiLCJwaWQiLCJzaWduYWwiLCJnZXRVSUNsaWVudFBpZCIsImxvZyIsImRlYnVnIiwiZXhlYyIsImUiLCJjb2RlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaXNBcHBJbnN0YWxsZWQiLCJidW5kbGVJZCIsImFwcENvbnRhaW5lciIsInNpbWN0bCIsImdldEFwcENvbnRhaW5lciIsImVuZHNXaXRoIiwiZXJyIiwiaW5mbyIsImFwcEluZm8iLCJpbmNsdWRlcyIsInN0YXJ0dXBUaW1lb3V0Iiwid2FpdEZvckJvb3QiLCJzdGFydEJvb3RNb25pdG9yIiwidGltZW91dCIsImVtaXQiLCJCT09UX0NPTVBMRVRFRF9FVkVOVCIsIm9wZW5VcmwiLCJ1cmwiLCJpc1J1bm5pbmciLCJ0aW1lciIsInRpbWluZyIsIlRpbWVyIiwic3RhcnQiLCJsYXVuY2hBcHAiLCJNT0JJTEVfU0FGQVJJX0JVTkRMRV9JRCIsIlNBRkFSSV9TVEFSVFVQX1RJTUVPVVQiLCJnZXREdXJhdGlvbiIsImFzU2Vjb25kcyIsInRvRml4ZWQiLCJzdGRlcnIiLCJjbGVhblNhZmFyaSIsImtlZXBQcmVmcyIsInRlcm1pbmF0ZUFwcCIsImlnbiIsImNsZWFuQ3VzdG9tQXBwIiwiYXBwRmlsZSIsImFwcEJ1bmRsZUlkIiwic2NydWIiLCJzaGFrZSIsInNwYXduUHJvY2VzcyIsImlzQmlvbWV0cmljRW5yb2xsZWQiLCJvdXRwdXQiLCJleGVjdXRlVUlDbGllbnRTY3JpcHQiLCJfIiwiaXNTdHJpbmciLCJ0cmltIiwiZW5yb2xsQmlvbWV0cmljIiwiaXNFbmFibGVkIiwic2VuZEJpb21ldHJpY01hdGNoIiwic2hvdWxkTWF0Y2giLCJzZXRHZW9sb2NhdGlvbiIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibG9jYXRpb25TZXR0ZXJzIiwic2V0TG9jYXRpb25XaXRoTHlmdCIsInNldExvY2F0aW9uV2l0aElkYiIsInNldExvY2F0aW9uV2l0aEFwcGxlU2NyaXB0IiwibGFzdEVycm9yIiwic2V0dGVyIl0sInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsibGliL3NpbXVsYXRvci14Y29kZS04LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJPT1RfQ09NUExFVEVEX0VWRU5UIH0gZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtNic7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGU3IGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTcnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQge1xuICBzZXRMb2NhdGlvbldpdGhMeWZ0LFxuICBzZXRMb2NhdGlvbldpdGhJZGIsXG4gIHNldExvY2F0aW9uV2l0aEFwcGxlU2NyaXB0IH0gZnJvbSAnLi9nZW9sb2NhdGlvbic7XG5pbXBvcnQgeyB0aW1pbmcgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IHsgTU9CSUxFX1NBRkFSSV9CVU5ETEVfSUQsIFNBRkFSSV9TVEFSVFVQX1RJTUVPVVQsIGxhdW5jaEFwcCB9IGZyb20gJy4vdXRpbHMnO1xuXG5cbi8vIHRoZXNlIHNpbXMgYXJlIHNsb29vb29vb293XG5jb25zdCBTVEFSVFVQX1RJTUVPVVQgPSAxMjAgKiAxMDAwO1xuXG5jbGFzcyBTaW11bGF0b3JYY29kZTggZXh0ZW5kcyBTaW11bGF0b3JYY29kZTcge1xuICBjb25zdHJ1Y3RvciAodWRpZCwgeGNvZGVWZXJzaW9uKSB7XG4gICAgc3VwZXIodWRpZCwgeGNvZGVWZXJzaW9uKTtcblxuICAgIC8vIGxpc3Qgb2YgZmlsZXMgdG8gY2hlY2sgZm9yIHdoZW4gc2VlaW5nIGlmIGEgc2ltdWxhdG9yIGlzIFwiZnJlc2hcIlxuICAgIC8vIChtZWFuaW5nIGl0IGhhcyBuZXZlciBiZWVuIGJvb3RlZCkuXG4gICAgLy8gSWYgdGhlc2UgZmlsZXMgYXJlIHByZXNlbnQsIHdlIGFzc3VtZSBpdCdzIGJlZW4gc3VjY2Vzc2Z1bGx5IGJvb3RlZFxuICAgIHRoaXMuaXNGcmVzaEZpbGVzID0gW1xuICAgICAgJ0xpYnJhcnkvQ29va2llcycsXG4gICAgICAnTGlicmFyeS9QcmVmZXJlbmNlcy8uR2xvYmFsUHJlZmVyZW5jZXMucGxpc3QnLFxuICAgICAgJ0xpYnJhcnkvUHJlZmVyZW5jZXMvY29tLmFwcGxlLnNwcmluZ2JvYXJkLnBsaXN0JyxcbiAgICAgICd2YXIvcnVuL3N5c2xvZy5waWQnXG4gICAgXTtcbiAgICB0aGlzLl9pZGIgPSBudWxsO1xuXG4gICAgLy8gZm9yIHNldHRpbmcgdGhlIGxvY2F0aW9uIHVzaW5nIEFwcGxlU2NyaXB0LCB0aGUgdG9wLWxldmVsIG1lbnUgdGhyb3VnaCB3aGljaFxuICAgIC8vIHRoZSAnTG9jYXRpb24nIG9wdGlvbiBpcyBmb3VuZFxuICAgIHRoaXMuX2xvY2F0aW9uTWVudSA9ICdEZWJ1Zyc7XG4gIH1cblxuICAvKipcbiAgICogSURCIGluc3RhbmNlIHNldHRlclxuICAgKlxuICAgKiBAcGFyYW0ge0lEQn0gdmFsdWVcbiAgICovXG4gIHNldCBpZGIgKHZhbHVlKSB7XG4gICAgdGhpcy5faWRiID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7SURCfSBpZGIgaW5zdGFuY2VcbiAgICovXG4gIGdldCBpZGIgKCkge1xuICAgIHJldHVybiB0aGlzLl9pZGI7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0ga2lsbE9wdHNcbiAgICogQHByb3BlcnR5IHs/bnVtYmVyfHN0cmluZ30gcGlkIC0gUHJvY2VzcyBpZCBvZiB0aGUgVUkgU2ltdWxhdG9yIHdpbmRvd1xuICAgKiBAcHJvcGVydHkge251bWJlcnxzdHJpbmd9IHNpZ25hbCBbMl0gLSBUaGUgc2lnbmFsIG51bWJlciB0byBzZW5kIHRvIHRoZVxuICAgKiBga2lsbGAgY29tbWFuZFxuICAgKi9cblxuICAvKipcbiAgICogS2lsbCB0aGUgVUkgY2xpZW50IGlmIGl0IGlzIHJ1bm5pbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7P2tpbGxPcHRzfSBvcHRzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIFVJIGNsaWVudCB3YXMgc3VjY2Vzc2Z1bGx5IGtpbGxlZCBvciBmYWxzZVxuICAgKiAgICAgICAgICAgICAgICAgICBpZiBpdCBpcyBub3QgcnVubmluZy5cbiAgICogQHRocm93cyB7RXJyb3J9IElmIHNlbmRpbmcgdGhlIHNpZ25hbCB0byB0aGUgY2xpZW50IHByb2Nlc3MgZmFpbHNcbiAgICovXG4gIGFzeW5jIGtpbGxVSUNsaWVudCAob3B0cyA9IHt9KSB7XG4gICAgbGV0IHtcbiAgICAgIHBpZCxcbiAgICAgIHNpZ25hbCA9IDIsXG4gICAgfSA9IG9wdHM7XG4gICAgcGlkID0gcGlkIHx8IGF3YWl0IHRoaXMuZ2V0VUlDbGllbnRQaWQoKTtcbiAgICBpZiAoIXBpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxvZy5kZWJ1ZyhgU2VuZGluZyAke3NpZ25hbH0ga2lsbCBzaWduYWwgdG8gU2ltdWxhdG9yIFVJIGNsaWVudCB3aXRoIFBJRCAke3BpZH1gKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZXhlYygna2lsbCcsIFtgLSR7c2lnbmFsfWAsIHBpZF0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUuY29kZSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBraWxsIHRoZSBTaW11bGF0b3IgVUkgY2xpZW50LiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmeSB3aGV0aGVyIHRoZSBwYXJ0aWN1bGFyIGFwcGxpY2F0aW9uIGlzIGluc3RhbGxlZCBvbiBTaW11bGF0b3IuXG4gICAqIEBvdmVycmlkZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYnVuZGxlSWQgLSBUaGUgYnVuZGxlIGlkIG9mIHRoZSBhcHBsaWNhdGlvbiB0byBiZSBjaGVja2VkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnaXZlbiBhcHBsaWNhdGlvbiBpcyBpbnN0YWxsZWQuXG4gICAqL1xuICBhc3luYyBpc0FwcEluc3RhbGxlZCAoYnVuZGxlSWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXBwQ29udGFpbmVyID0gYXdhaXQgdGhpcy5zaW1jdGwuZ2V0QXBwQ29udGFpbmVyKGJ1bmRsZUlkKTtcbiAgICAgIHJldHVybiBhcHBDb250YWluZXIuZW5kc1dpdGgoJy5hcHAnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIGdldF9hcHBfY29udGFpbmVyIHN1YmNvbW1hbmQgZmFpbHMgZm9yIHN5c3RlbSBhcHBsaWNhdGlvbnMsXG4gICAgICAvLyBzbyB3ZSB0cnkgdGhlIGhpZGRlbiBhcHBpbmZvIHN1YmNvbW1hbmQsIHdoaWNoIHByaW50cyBjb3JyZWN0IGluZm8gZm9yXG4gICAgICAvLyBzeXN0ZW0vaGlkZGVuIGFwcHNcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLnNpbWN0bC5hcHBJbmZvKGJ1bmRsZUlkKTtcbiAgICAgICAgcmV0dXJuIGluZm8uaW5jbHVkZXMoJ0FwcGxpY2F0aW9uVHlwZScpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgdW50aWwgU2ltdWxhdG9yIGJvb3RpbmcgaXMgY29tcGxldGVkLlxuICAgKi9cbiAgZ2V0IHN0YXJ0dXBUaW1lb3V0ICgpIHtcbiAgICByZXR1cm4gU1RBUlRVUF9USU1FT1VUO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmeSB3aGV0aGVyIHRoZSBTaW11bGF0b3IgYm9vdGluZyBpcyBjb21wbGV0ZWQgYW5kL29yIHdhaXQgZm9yIGl0XG4gICAqIHVudGlsIHRoZSB0aW1lb3V0IGV4cGlyZXMuXG4gICAqIEBvdmVycmlkZVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnR1cFRpbWVvdXQgLSB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IHVudGlsIGJvb3RpbmcgaXMgY29tcGxldGVkLlxuICAgKiBAZW1pdHMgQk9PVF9DT01QTEVURURfRVZFTlQgaWYgdGhlIGN1cnJlbnQgU2ltdWxhdG9yIGlzIHJlYWR5IHRvIGFjY2VwdCBzaW1jdGwgY29tbWFuZHMsIGxpa2UgJ2luc3RhbGwnLlxuICAgKi9cbiAgYXN5bmMgd2FpdEZvckJvb3QgKHN0YXJ0dXBUaW1lb3V0KSB7XG4gICAgYXdhaXQgdGhpcy5zaW1jdGwuc3RhcnRCb290TW9uaXRvcih7dGltZW91dDogc3RhcnR1cFRpbWVvdXR9KTtcbiAgICB0aGlzLmVtaXQoQk9PVF9DT01QTEVURURfRVZFTlQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW4gdGhlIGdpdmVuIFVSTCBpbiBtb2JpbGUgU2FmYXJpIGJyb3dzZXIuXG4gICAqIFRoZSBicm93c2VyIHdpbGwgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5IGlmIGl0IGlzIG5vdCBydW5uaW5nLlxuICAgKiBAb3ZlcnJpZGVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSBVUkwgdG8gYmUgb3BlbmVkLlxuICAgKi9cbiAgYXN5bmMgb3BlblVybCAodXJsKSB7XG4gICAgaWYgKCFhd2FpdCB0aGlzLmlzUnVubmluZygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRyaWVkIHRvIG9wZW4gJyR7dXJsfScsIGJ1dCBTaW11bGF0b3IgaXMgbm90IGluIEJvb3RlZCBzdGF0ZWApO1xuICAgIH1cbiAgICBjb25zdCB0aW1lciA9IG5ldyB0aW1pbmcuVGltZXIoKS5zdGFydCgpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBsYXVuY2hBcHAodGhpcy5zaW1jdGwsIE1PQklMRV9TQUZBUklfQlVORExFX0lELCBTQUZBUklfU1RBUlRVUF9USU1FT1VUKTtcbiAgICAgIGF3YWl0IHRoaXMuc2ltY3RsLm9wZW5VcmwodXJsKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2FmYXJpIGNvdWxkIG5vdCBvcGVuICcke3VybH0nIGFmdGVyICR7dGltZXIuZ2V0RHVyYXRpb24oKS5hc1NlY29uZHMudG9GaXhlZCgzKX1zLiBgICtcbiAgICAgICAgYE9yaWdpbmFsIGVycm9yOiAke2Vyci5zdGRlcnIgfHwgZXJyLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIGxvZy5kZWJ1ZyhgU2FmYXJpIHN1Y2Nlc3NmdWxseSBvcGVuZWQgJyR7dXJsfScgaW4gJHt0aW1lci5nZXREdXJhdGlvbigpLmFzU2Vjb25kcy50b0ZpeGVkKDMpfXNgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCB0aGUgZGlyZWN0b3JpZXMgZm9yIG1vYmlsZSBTYWZhcmkuXG4gICAqIEBvdmVycmlkZVxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGtlZXBQcmVmcyAtIFdoZXRoZXIgdG8ga2VlcCBTYWZhcmkgcHJlZmVyZW5jZXMgZnJvbSBiZWluZyBkZWxldGVkLlxuICAgKi9cbiAgYXN5bmMgY2xlYW5TYWZhcmkgKGtlZXBQcmVmcyA9IHRydWUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGF3YWl0IHRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zaW1jdGwudGVybWluYXRlQXBwKE1PQklMRV9TQUZBUklfQlVORExFX0lEKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChpZ24pIHtcbiAgICAgIC8vIGlnbm9yZSBlcnJvclxuICAgIH1cbiAgICBhd2FpdCBzdXBlci5jbGVhblNhZmFyaShrZWVwUHJlZnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuL3NjcnViIHRoZSBwYXJ0aWN1bGFyIGFwcGxpY2F0aW9uIG9uIFNpbXVsYXRvci5cbiAgICogQG92ZXJyaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhcHBGaWxlIC0gQXBwbGljYXRpb24gbmFtZSBtaW51cyBcIi5hcHBcIi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFwcEJ1bmRsZUlkIC0gQnVuZGxlIGlkZW50aWZpZXIgb2YgdGhlIGFwcGxpY2F0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNjcnViIC0gSWYgYHNjcnViYCBpcyBmYWxzZSwgd2Ugd2FudCB0byBjbGVhbiBieSBkZWxldGluZyB0aGUgYXBwIGFuZCBhbGxcbiAgICogICBmaWxlcyBhc3NvY2lhdGVkIHdpdGggaXQuIElmIGBzY3J1YmAgaXMgdHJ1ZSwgd2UganVzdCB3YW50IHRvIGRlbGV0ZSB0aGUgcHJlZmVyZW5jZXMgYW5kXG4gICAqICAgY2hhbmdlZCBmaWxlcy5cbiAgICovXG4gIGFzeW5jIGNsZWFuQ3VzdG9tQXBwIChhcHBGaWxlLCBhcHBCdW5kbGVJZCwgc2NydWIgPSBmYWxzZSkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNpbWN0bC50ZXJtaW5hdGVBcHAoYXBwQnVuZGxlSWQpO1xuICAgIH0gY2F0Y2ggKGlnbikge1xuICAgICAgLy8gaWdub3JlIGVycm9yXG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLmNsZWFuQ3VzdG9tQXBwKGFwcEZpbGUsIGFwcEJ1bmRsZUlkLCBzY3J1Yik7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBTaGFrZSBnZXN0dXJlIG9uIFNpbXVsYXRvciB3aW5kb3cuXG4gICAqL1xuICBhc3luYyBzaGFrZSAoKSB7XG4gICAgbG9nLmluZm8oYFBlcmZvcm1pbmcgc2hha2UgZ2VzdHVyZSBvbiAke3RoaXMudWRpZH0gU2ltdWxhdG9yYCk7XG4gICAgYXdhaXQgdGhpcy5zaW1jdGwuc3Bhd25Qcm9jZXNzKFtcbiAgICAgICdub3RpZnl1dGlsJyxcbiAgICAgICctcCcsICdjb20uYXBwbGUuVUlLaXQuU2ltdWxhdG9yU2hha2UnXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBpc0Jpb21ldHJpY0Vucm9sbGVkICgpIHtcbiAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVVSUNsaWVudFNjcmlwdChgXG4gICAgICB0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiXG4gICAgICAgIHRlbGwgcHJvY2VzcyBcIlNpbXVsYXRvclwiXG4gICAgICAgICAgc2V0IGRzdE1lbnVJdGVtIHRvIG1lbnUgaXRlbSBcIlRvZ2dsZSBFbnJvbGxlZCBTdGF0ZVwiIG9mIG1lbnUgMSBvZiBtZW51IGl0ZW0gXCJUb3VjaCBJRFwiIG9mIG1lbnUgMSBvZiBtZW51IGJhciBpdGVtIFwiSGFyZHdhcmVcIiBvZiBtZW51IGJhciAxXG4gICAgICAgICAgc2V0IGlzQ2hlY2tlZCB0byAodmFsdWUgb2YgYXR0cmlidXRlIFwiQVhNZW51SXRlbU1hcmtDaGFyXCIgb2YgZHN0TWVudUl0ZW0pIGlzIFwi4pyTXCJcbiAgICAgICAgZW5kIHRlbGxcbiAgICAgIGVuZCB0ZWxsXG4gICAgYCk7XG4gICAgbG9nLmRlYnVnKGBUb3VjaCBJRCBlbnJvbGxlZCBzdGF0ZTogJHtvdXRwdXR9YCk7XG4gICAgcmV0dXJuIF8uaXNTdHJpbmcob3V0cHV0KSAmJiBvdXRwdXQudHJpbSgpID09PSAndHJ1ZSc7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBlbnJvbGxCaW9tZXRyaWMgKGlzRW5hYmxlZCA9IHRydWUpIHtcbiAgICBhd2FpdCB0aGlzLmV4ZWN1dGVVSUNsaWVudFNjcmlwdChgXG4gICAgICB0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiXG4gICAgICAgIHRlbGwgcHJvY2VzcyBcIlNpbXVsYXRvclwiXG4gICAgICAgICAgc2V0IGRzdE1lbnVJdGVtIHRvIG1lbnUgaXRlbSBcIlRvZ2dsZSBFbnJvbGxlZCBTdGF0ZVwiIG9mIG1lbnUgMSBvZiBtZW51IGl0ZW0gXCJUb3VjaCBJRFwiIG9mIG1lbnUgMSBvZiBtZW51IGJhciBpdGVtIFwiSGFyZHdhcmVcIiBvZiBtZW51IGJhciAxXG4gICAgICAgICAgc2V0IGlzQ2hlY2tlZCB0byAodmFsdWUgb2YgYXR0cmlidXRlIFwiQVhNZW51SXRlbU1hcmtDaGFyXCIgb2YgZHN0TWVudUl0ZW0pIGlzIFwi4pyTXCJcbiAgICAgICAgICBpZiAke2lzRW5hYmxlZCA/ICdub3QgJyA6ICcnfWlzQ2hlY2tlZCB0aGVuXG4gICAgICAgICAgICBjbGljayBkc3RNZW51SXRlbVxuICAgICAgICAgIGVuZCBpZlxuICAgICAgICBlbmQgdGVsbFxuICAgICAgZW5kIHRlbGxcbiAgICBgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFzeW5jIHNlbmRCaW9tZXRyaWNNYXRjaCAoc2hvdWxkTWF0Y2ggPSB0cnVlKSB7XG4gICAgYXdhaXQgdGhpcy5leGVjdXRlVUlDbGllbnRTY3JpcHQoYFxuICAgICAgdGVsbCBhcHBsaWNhdGlvbiBcIlN5c3RlbSBFdmVudHNcIlxuICAgICAgICB0ZWxsIHByb2Nlc3MgXCJTaW11bGF0b3JcIlxuICAgICAgICAgIHNldCBkc3RNZW51SXRlbSB0byBtZW51IGl0ZW0gXCIke3Nob3VsZE1hdGNoID8gJ01hdGNoaW5nIFRvdWNoJyA6ICdOb24tbWF0Y2hpbmcgVG91Y2gnfVwiIG9mIG1lbnUgMSBvZiBtZW51IGl0ZW0gXCJUb3VjaCBJRFwiIG9mIG1lbnUgMSBvZiBtZW51IGJhciBpdGVtIFwiSGFyZHdhcmVcIiBvZiBtZW51IGJhciAxXG4gICAgICAgICAgY2xpY2sgZHN0TWVudUl0ZW1cbiAgICAgICAgZW5kIHRlbGxcbiAgICAgIGVuZCB0ZWxsXG4gICAgYCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGN1c3RvbSBnZW9sb2NhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgZ2l2ZW4gU2ltdWxhdG9yIHVzaW5nIEFwcGxlU2NyaXB0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIHZhbHVlLCB3aGljaCBpcyBnb2luZyB0byBiZSBlbnRlcmVkXG4gICAqICAgaW50byB0aGUgY29ycmVzcG9uZGluZyBlZGl0IGZpZWxkLCBmb3IgZXhhbXBsZSAnMzksMDAwNicuXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSB2YWx1ZSwgd2hpY2ggaXMgZ29pbmcgdG8gYmUgZW50ZXJlZFxuICAgKiAgIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgZWRpdCBmaWVsZCwgZm9yIGV4YW1wbGUgJzE5LDAwNjgnLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2l2ZW4gcGFyYW1ldGVycyBoYXZlIGNvcnJlY3QgZm9ybWF0IGFuZCB3ZXJlIHN1Y2Nlc3NmdWxseSBhY2NlcHRlZC5cbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBzZXR0aW5nIHRoZSBsb2NhdGlvblxuICAgKi9cbiAgYXN5bmMgc2V0R2VvbG9jYXRpb24gKGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcbiAgICBjb25zdCBsb2NhdGlvblNldHRlcnMgPSBbXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCBzZXRMb2NhdGlvbldpdGhMeWZ0KHRoaXMudWRpZCwgbGF0aXR1ZGUsIGxvbmdpdHVkZSksXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCBzZXRMb2NhdGlvbldpdGhJZGIodGhpcy5pZGIsIGxhdGl0dWRlLCBsb25naXR1ZGUpLFxuICAgICAgYXN5bmMgKCkgPT4gYXdhaXQgc2V0TG9jYXRpb25XaXRoQXBwbGVTY3JpcHQodGhpcywgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgdGhpcy5fbG9jYXRpb25NZW51KSxcbiAgICBdO1xuXG4gICAgbGV0IGxhc3RFcnJvcjtcbiAgICBmb3IgKGNvbnN0IHNldHRlciBvZiBsb2NhdGlvblNldHRlcnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHNldHRlcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLmluZm8oZS5tZXNzYWdlKTtcbiAgICAgICAgbGFzdEVycm9yID0gZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbGFzdEVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNpbXVsYXRvclhjb2RlODtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFJQTs7QUFDQTs7QUFJQSxNQUFNQSxlQUFlLEdBQUcsTUFBTSxJQUE5Qjs7QUFFQSxNQUFNQyxlQUFOLFNBQThCQyx3QkFBOUIsQ0FBOEM7RUFDNUNDLFdBQVcsQ0FBRUMsSUFBRixFQUFRQyxZQUFSLEVBQXNCO0lBQy9CLE1BQU1ELElBQU4sRUFBWUMsWUFBWjtJQUtBLEtBQUtDLFlBQUwsR0FBb0IsQ0FDbEIsaUJBRGtCLEVBRWxCLDhDQUZrQixFQUdsQixpREFIa0IsRUFJbEIsb0JBSmtCLENBQXBCO0lBTUEsS0FBS0MsSUFBTCxHQUFZLElBQVo7SUFJQSxLQUFLQyxhQUFMLEdBQXFCLE9BQXJCO0VBQ0Q7O0VBT00sSUFBSEMsR0FBRyxDQUFFQyxLQUFGLEVBQVM7SUFDZCxLQUFLSCxJQUFMLEdBQVlHLEtBQVo7RUFDRDs7RUFLTSxJQUFIRCxHQUFHLEdBQUk7SUFDVCxPQUFPLEtBQUtGLElBQVo7RUFDRDs7RUFpQmlCLE1BQVpJLFlBQVksQ0FBRUMsSUFBSSxHQUFHLEVBQVQsRUFBYTtJQUM3QixJQUFJO01BQ0ZDLEdBREU7TUFFRkMsTUFBTSxHQUFHO0lBRlAsSUFHQUYsSUFISjtJQUlBQyxHQUFHLEdBQUdBLEdBQUcsS0FBSSxNQUFNLEtBQUtFLGNBQUwsRUFBVixDQUFUOztJQUNBLElBQUksQ0FBQ0YsR0FBTCxFQUFVO01BQ1IsT0FBTyxLQUFQO0lBQ0Q7O0lBRURHLGVBQUEsQ0FBSUMsS0FBSixDQUFXLFdBQVVILE1BQU8sZ0RBQStDRCxHQUFJLEVBQS9FOztJQUNBLElBQUk7TUFDRixNQUFNLElBQUFLLGtCQUFBLEVBQUssTUFBTCxFQUFhLENBQUUsSUFBR0osTUFBTyxFQUFaLEVBQWVELEdBQWYsQ0FBYixDQUFOO01BQ0EsT0FBTyxJQUFQO0lBQ0QsQ0FIRCxDQUdFLE9BQU9NLENBQVAsRUFBVTtNQUNWLElBQUlBLENBQUMsQ0FBQ0MsSUFBRixLQUFXLENBQWYsRUFBa0I7UUFDaEIsT0FBTyxLQUFQO01BQ0Q7O01BQ0QsTUFBTSxJQUFJQyxLQUFKLENBQVcsd0RBQXVERixDQUFDLENBQUNHLE9BQVEsRUFBNUUsQ0FBTjtJQUNEO0VBQ0Y7O0VBU21CLE1BQWRDLGNBQWMsQ0FBRUMsUUFBRixFQUFZO0lBQzlCLElBQUk7TUFDRixNQUFNQyxZQUFZLEdBQUcsTUFBTSxLQUFLQyxNQUFMLENBQVlDLGVBQVosQ0FBNEJILFFBQTVCLENBQTNCO01BQ0EsT0FBT0MsWUFBWSxDQUFDRyxRQUFiLENBQXNCLE1BQXRCLENBQVA7SUFDRCxDQUhELENBR0UsT0FBT0MsR0FBUCxFQUFZO01BSVosSUFBSTtRQUNGLE1BQU1DLElBQUksR0FBRyxNQUFNLEtBQUtKLE1BQUwsQ0FBWUssT0FBWixDQUFvQlAsUUFBcEIsQ0FBbkI7UUFDQSxPQUFPTSxJQUFJLENBQUNFLFFBQUwsQ0FBYyxpQkFBZCxDQUFQO01BQ0QsQ0FIRCxDQUdFLE9BQU9iLENBQVAsRUFBVTtRQUNWLE9BQU8sS0FBUDtNQUNEO0lBQ0Y7RUFDRjs7RUFLaUIsSUFBZGMsY0FBYyxHQUFJO0lBQ3BCLE9BQU9qQyxlQUFQO0VBQ0Q7O0VBVWdCLE1BQVhrQyxXQUFXLENBQUVELGNBQUYsRUFBa0I7SUFDakMsTUFBTSxLQUFLUCxNQUFMLENBQVlTLGdCQUFaLENBQTZCO01BQUNDLE9BQU8sRUFBRUg7SUFBVixDQUE3QixDQUFOO0lBQ0EsS0FBS0ksSUFBTCxDQUFVQyxvQ0FBVjtFQUNEOztFQVNZLE1BQVBDLE9BQU8sQ0FBRUMsR0FBRixFQUFPO0lBQ2xCLElBQUksRUFBQyxNQUFNLEtBQUtDLFNBQUwsRUFBUCxDQUFKLEVBQTZCO01BQzNCLE1BQU0sSUFBSXBCLEtBQUosQ0FBVyxrQkFBaUJtQixHQUFJLHlDQUFoQyxDQUFOO0lBQ0Q7O0lBQ0QsTUFBTUUsS0FBSyxHQUFHLElBQUlDLGVBQUEsQ0FBT0MsS0FBWCxHQUFtQkMsS0FBbkIsRUFBZDs7SUFDQSxJQUFJO01BQ0YsTUFBTSxJQUFBQyxnQkFBQSxFQUFVLEtBQUtwQixNQUFmLEVBQXVCcUIsOEJBQXZCLEVBQWdEQyw2QkFBaEQsQ0FBTjtNQUNBLE1BQU0sS0FBS3RCLE1BQUwsQ0FBWWEsT0FBWixDQUFvQkMsR0FBcEIsQ0FBTjtJQUNELENBSEQsQ0FHRSxPQUFPWCxHQUFQLEVBQVk7TUFDWixNQUFNLElBQUlSLEtBQUosQ0FBVywwQkFBeUJtQixHQUFJLFdBQVVFLEtBQUssQ0FBQ08sV0FBTixHQUFvQkMsU0FBcEIsQ0FBOEJDLE9BQTlCLENBQXNDLENBQXRDLENBQXlDLEtBQWpGLEdBQ2IsbUJBQWtCdEIsR0FBRyxDQUFDdUIsTUFBSixJQUFjdkIsR0FBRyxDQUFDUCxPQUFRLEVBRHpDLENBQU47SUFFRDs7SUFDRE4sZUFBQSxDQUFJQyxLQUFKLENBQVcsK0JBQThCdUIsR0FBSSxRQUFPRSxLQUFLLENBQUNPLFdBQU4sR0FBb0JDLFNBQXBCLENBQThCQyxPQUE5QixDQUFzQyxDQUF0QyxDQUF5QyxHQUE3RjtFQUNEOztFQVFnQixNQUFYRSxXQUFXLENBQUVDLFNBQVMsR0FBRyxJQUFkLEVBQW9CO0lBQ25DLElBQUk7TUFDRixJQUFJLE1BQU0sS0FBS2IsU0FBTCxFQUFWLEVBQTRCO1FBQzFCLE1BQU0sS0FBS2YsTUFBTCxDQUFZNkIsWUFBWixDQUF5QlIsOEJBQXpCLENBQU47TUFDRDtJQUNGLENBSkQsQ0FJRSxPQUFPUyxHQUFQLEVBQVksQ0FFYjs7SUFDRCxNQUFNLE1BQU1ILFdBQU4sQ0FBa0JDLFNBQWxCLENBQU47RUFDRDs7RUFZbUIsTUFBZEcsY0FBYyxDQUFFQyxPQUFGLEVBQVdDLFdBQVgsRUFBd0JDLEtBQUssR0FBRyxLQUFoQyxFQUF1QztJQUN6RCxJQUFJO01BQ0YsTUFBTSxLQUFLbEMsTUFBTCxDQUFZNkIsWUFBWixDQUF5QkksV0FBekIsQ0FBTjtJQUNELENBRkQsQ0FFRSxPQUFPSCxHQUFQLEVBQVksQ0FFYjs7SUFDRCxNQUFNLE1BQU1DLGNBQU4sQ0FBcUJDLE9BQXJCLEVBQThCQyxXQUE5QixFQUEyQ0MsS0FBM0MsQ0FBTjtFQUNEOztFQUtVLE1BQUxDLEtBQUssR0FBSTtJQUNiN0MsZUFBQSxDQUFJYyxJQUFKLENBQVUsK0JBQThCLEtBQUsxQixJQUFLLFlBQWxEOztJQUNBLE1BQU0sS0FBS3NCLE1BQUwsQ0FBWW9DLFlBQVosQ0FBeUIsQ0FDN0IsWUFENkIsRUFFN0IsSUFGNkIsRUFFdkIsZ0NBRnVCLENBQXpCLENBQU47RUFJRDs7RUFNd0IsTUFBbkJDLG1CQUFtQixHQUFJO0lBQzNCLE1BQU1DLE1BQU0sR0FBRyxNQUFNLEtBQUtDLHFCQUFMLENBQTRCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBUHlCLENBQXJCOztJQVFBakQsZUFBQSxDQUFJQyxLQUFKLENBQVcsNEJBQTJCK0MsTUFBTyxFQUE3Qzs7SUFDQSxPQUFPRSxlQUFBLENBQUVDLFFBQUYsQ0FBV0gsTUFBWCxLQUFzQkEsTUFBTSxDQUFDSSxJQUFQLE9BQWtCLE1BQS9DO0VBQ0Q7O0VBTW9CLE1BQWZDLGVBQWUsQ0FBRUMsU0FBUyxHQUFHLElBQWQsRUFBb0I7SUFDdkMsTUFBTSxLQUFLTCxxQkFBTCxDQUE0QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWVLLFNBQVMsR0FBRyxNQUFILEdBQVksRUFBRztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBVlUsQ0FBTjtFQVdEOztFQU11QixNQUFsQkMsa0JBQWtCLENBQUVDLFdBQVcsR0FBRyxJQUFoQixFQUFzQjtJQUM1QyxNQUFNLEtBQUtQLHFCQUFMLENBQTRCO0FBQ3RDO0FBQ0E7QUFDQSwwQ0FBMENPLFdBQVcsR0FBRyxnQkFBSCxHQUFzQixvQkFBcUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0EsS0FQVSxDQUFOO0VBUUQ7O0VBWW1CLE1BQWRDLGNBQWMsQ0FBRUMsUUFBRixFQUFZQyxTQUFaLEVBQXVCO0lBQ3pDLE1BQU1DLGVBQWUsR0FBRyxDQUN0QixZQUFZLE1BQU0sSUFBQUMsZ0NBQUEsRUFBb0IsS0FBS3pFLElBQXpCLEVBQStCc0UsUUFBL0IsRUFBeUNDLFNBQXpDLENBREksRUFFdEIsWUFBWSxNQUFNLElBQUFHLCtCQUFBLEVBQW1CLEtBQUtyRSxHQUF4QixFQUE2QmlFLFFBQTdCLEVBQXVDQyxTQUF2QyxDQUZJLEVBR3RCLFlBQVksTUFBTSxJQUFBSSx1Q0FBQSxFQUEyQixJQUEzQixFQUFpQ0wsUUFBakMsRUFBMkNDLFNBQTNDLEVBQXNELEtBQUtuRSxhQUEzRCxDQUhJLENBQXhCO0lBTUEsSUFBSXdFLFNBQUo7O0lBQ0EsS0FBSyxNQUFNQyxNQUFYLElBQXFCTCxlQUFyQixFQUFzQztNQUNwQyxJQUFJO1FBQ0YsTUFBTUssTUFBTSxFQUFaO1FBQ0EsT0FBTyxJQUFQO01BQ0QsQ0FIRCxDQUdFLE9BQU85RCxDQUFQLEVBQVU7UUFDVkgsZUFBQSxDQUFJYyxJQUFKLENBQVNYLENBQUMsQ0FBQ0csT0FBWDs7UUFDQTBELFNBQVMsR0FBRzdELENBQVo7TUFDRDtJQUNGOztJQUNELE1BQU02RCxTQUFOO0VBQ0Q7O0FBeFEyQzs7ZUEyUS9CL0UsZSJ9
