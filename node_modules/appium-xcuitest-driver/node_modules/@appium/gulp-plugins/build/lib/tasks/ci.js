'use strict';

require("source-map-support/register");

const fs = require('fs');

const path = require('path');

const log = require('fancy-log');

const {
  sync: findRoot
} = require('pkg-dir');

const axios = require('axios');

const B = require('bluebird');

const os = require('os');

const {
  Octokit
} = require('@octokit/rest');

const _ = require('lodash');

const FormData = require('form-data');

const readFile = B.promisify(fs.readFile, {
  context: fs
});
const writeFile = B.promisify(fs.writeFile, {
  context: fs
});
const ASSET_NAME_REGEXP = /^appium-\S+.zip$/;
const GITHUB_OWNER = 'appium';
const GITHUB_REPO = 'appium-build-store';
const OUTPUT_INTERVAL = 60000;
const MOCHA_PARALLEL_TEST_BROKEN_LINE = `if (value.type === 'test') {`;
const MOCHA_PARALLEL_TEST_FIXED_LINE = `if (value.type === 'test') {\n        delete value.fn;`;

const configure = function configure(gulp, opts) {
  const owner = opts.ci.owner || GITHUB_OWNER;
  const repo = opts.ci.repo || GITHUB_REPO;
  const root = opts.projectRoot ? opts.projectRoot : findRoot(__dirname);
  gulp.task('fix-mocha-parallel-tests', async function fixMochaParallelTests() {
    log(`Updating 'mocha-parallel-tests'`);
    const filePath = path.resolve(root, 'node_modules', 'mocha-parallel-tests', 'dist', 'main', 'util.js');
    log(`File: '${filePath}'`);

    try {
      let script = await readFile(filePath, {
        encoding: 'utf8'
      });
      script = await script.replace(MOCHA_PARALLEL_TEST_BROKEN_LINE, MOCHA_PARALLEL_TEST_FIXED_LINE);
      await writeFile(filePath, script);
    } catch (err) {
      const msg = err.message.includes('ENOENT') ? `File '${filePath}' does not exist` : err.message;
      log.error(`Unable to fix: ${msg}`);
    }
  });
  gulp.task('github:upload', async function githubUpload() {
    const githubToken = process.env.GITHUB_TOKEN;

    if (_.isEmpty(githubToken)) {
      log.warn('No GitHub token found in GITHUB_TOKEN environment variable');
      return;
    }

    const octokit = new Octokit({
      auth: githubToken
    });
    const buildName = process.env.BUILD_NAME || `${Date.now()}`;
    const commitMessage = process.env.COMMIT_MESSAGE || 'No commit message provided';
    const releaseTag = `appium-build-${buildName}`;
    const releaseFile = `appium-${buildName}.zip`;
    let releaseId;

    try {
      log(`Creating release on '${owner}/${repo}'`);
      const res = await octokit.repos.createRelease({
        owner,
        repo,
        tag_name: releaseTag,
        name: `Appium build ${buildName}`,
        body: `Appium build for commit ${buildName}\n'${commitMessage}'`
      });
      releaseId = res.data.id;
      log(`Created release '${releaseTag}' (id: ${releaseId})`);
      const url = res.data.upload_url;
      const file = path.resolve(root, 'appium.zip');
      log(`Uploading file '${file}'`);
      await octokit.repos.uploadReleaseAsset({
        headers: {
          'content-length': fs.statSync(file).size,
          'content-type': 'application/zip'
        },
        url,
        file: fs.createReadStream(file),
        name: releaseFile
      });
      log(`Uploaded release file '${releaseFile}'`);
    } catch (err) {
      log.error(`Error uploading release asset: ${err.message}`);

      if (err.errors) {
        log.error(JSON.stringify(err.errors, 2));
      }

      if (releaseId) {
        log('Deleting release with no asset');
        await octokit.repos.deleteRelease({
          owner,
          repo,
          release_id: releaseId
        });
        log('Release deleted');
      }

      throw new Error(`Error uploading release: ${err.message}`);
    }
  });
  gulp.task('github-upload', gulp.series(['github:upload']));
  gulp.task('github:download', async function githubDownload() {
    const githubToken = process.env.GITHUB_TOKEN;

    if (_.isEmpty(githubToken)) {
      log.warn('No GitHub token found in GITHUB_TOKEN environment variable');
      return;
    }

    const octokit = new Octokit({
      auth: githubToken
    });
    log.info('Downloading GitHub asset');
    const tempDir = os.tmpdir();
    log.info(`Temporary directory for download: '${tempDir}'`);
    log.info(`Downloading repository: '${owner}/${repo}'`);
    const res = await octokit.repos.getLatestRelease({
      owner,
      repo
    });

    for (const asset of res.data.assets) {
      if (ASSET_NAME_REGEXP.test(asset.name)) {
        log.info(`Downloading asset from '${asset.browser_download_url}'`);
        const url = asset.browser_download_url;
        const writer = fs.createWriteStream(`${tempDir}/appium.zip`);
        const responseStream = (await axios({
          url,
          responseType: 'stream'
        })).data;
        responseStream.pipe(writer);
        return await new B((resolve, reject) => {
          responseStream.once('error', reject);
          writer.once('finish', resolve);
          writer.once('error', e => {
            responseStream.unpipe(writer);
            reject(e);
          });
        });
      }
    }

    throw new Error(`Unable to find Appium build asset`);
  });
  gulp.task('saucelabs:upload', async function sauceLabsUpload() {
    log.info('Uploading to Sauce Storage');
    const tempDir = os.tmpdir();
    log.info(`Temporary directory for upload: '${tempDir}'`);
    const form = new FormData();
    form.append('file', fs.createReadStream(`${tempDir}/appium.zip`));
    const options = {
      method: 'POST',
      url: `https://saucelabs.com/rest/v1/storage/${process.env.SAUCE_USERNAME}/appium.zip?overwrite=true`,
      headers: form.getHeaders(),
      auth: {
        username: process.env.SAUCE_USERNAME,
        password: process.env.SAUCE_ACCESS_KEY
      },
      data: form
    };
    const body = (await axios(options)).data;
    body.username = '*'.repeat((body.username || '').length);
    log.info(`File uploaded: ${JSON.stringify(body)}`);
  });
  gulp.task('sauce-storage-upload', gulp.series(['github:download', 'saucelabs:upload']));
  gulp.task('periodic-output', function periodicOutput() {
    const interval = opts.ci.interval || OUTPUT_INTERVAL;
    return new B(function writeToStdout() {
      setInterval(function print() {
        process.stdout.write('.');
      }, interval);
    });
  });
};

module.exports = {
  configure
};require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3Rhc2tzL2NpLmpzIiwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicGF0aCIsImxvZyIsInN5bmMiLCJmaW5kUm9vdCIsImF4aW9zIiwiQiIsIm9zIiwiT2N0b2tpdCIsIl8iLCJGb3JtRGF0YSIsInJlYWRGaWxlIiwicHJvbWlzaWZ5IiwiY29udGV4dCIsIndyaXRlRmlsZSIsIkFTU0VUX05BTUVfUkVHRVhQIiwiR0lUSFVCX09XTkVSIiwiR0lUSFVCX1JFUE8iLCJPVVRQVVRfSU5URVJWQUwiLCJNT0NIQV9QQVJBTExFTF9URVNUX0JST0tFTl9MSU5FIiwiTU9DSEFfUEFSQUxMRUxfVEVTVF9GSVhFRF9MSU5FIiwiY29uZmlndXJlIiwiZ3VscCIsIm9wdHMiLCJvd25lciIsImNpIiwicmVwbyIsInJvb3QiLCJwcm9qZWN0Um9vdCIsIl9fZGlybmFtZSIsInRhc2siLCJmaXhNb2NoYVBhcmFsbGVsVGVzdHMiLCJmaWxlUGF0aCIsInJlc29sdmUiLCJzY3JpcHQiLCJlbmNvZGluZyIsInJlcGxhY2UiLCJlcnIiLCJtc2ciLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJlcnJvciIsImdpdGh1YlVwbG9hZCIsImdpdGh1YlRva2VuIiwicHJvY2VzcyIsImVudiIsIkdJVEhVQl9UT0tFTiIsImlzRW1wdHkiLCJ3YXJuIiwib2N0b2tpdCIsImF1dGgiLCJidWlsZE5hbWUiLCJCVUlMRF9OQU1FIiwiRGF0ZSIsIm5vdyIsImNvbW1pdE1lc3NhZ2UiLCJDT01NSVRfTUVTU0FHRSIsInJlbGVhc2VUYWciLCJyZWxlYXNlRmlsZSIsInJlbGVhc2VJZCIsInJlcyIsInJlcG9zIiwiY3JlYXRlUmVsZWFzZSIsInRhZ19uYW1lIiwibmFtZSIsImJvZHkiLCJkYXRhIiwiaWQiLCJ1cmwiLCJ1cGxvYWRfdXJsIiwiZmlsZSIsInVwbG9hZFJlbGVhc2VBc3NldCIsImhlYWRlcnMiLCJzdGF0U3luYyIsInNpemUiLCJjcmVhdGVSZWFkU3RyZWFtIiwiZXJyb3JzIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlbGV0ZVJlbGVhc2UiLCJyZWxlYXNlX2lkIiwiRXJyb3IiLCJzZXJpZXMiLCJnaXRodWJEb3dubG9hZCIsImluZm8iLCJ0ZW1wRGlyIiwidG1wZGlyIiwiZ2V0TGF0ZXN0UmVsZWFzZSIsImFzc2V0IiwiYXNzZXRzIiwidGVzdCIsImJyb3dzZXJfZG93bmxvYWRfdXJsIiwid3JpdGVyIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJyZXNwb25zZVN0cmVhbSIsInJlc3BvbnNlVHlwZSIsInBpcGUiLCJyZWplY3QiLCJvbmNlIiwiZSIsInVucGlwZSIsInNhdWNlTGFic1VwbG9hZCIsImZvcm0iLCJhcHBlbmQiLCJvcHRpb25zIiwibWV0aG9kIiwiU0FVQ0VfVVNFUk5BTUUiLCJnZXRIZWFkZXJzIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIlNBVUNFX0FDQ0VTU19LRVkiLCJyZXBlYXQiLCJsZW5ndGgiLCJwZXJpb2RpY091dHB1dCIsImludGVydmFsIiwid3JpdGVUb1N0ZG91dCIsInNldEludGVydmFsIiwicHJpbnQiLCJzdGRvdXQiLCJ3cml0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uIiwic291cmNlcyI6WyJsaWIvdGFza3MvY2kuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgbG9nID0gcmVxdWlyZSgnZmFuY3ktbG9nJyk7XG5jb25zdCB7c3luYzogZmluZFJvb3R9ID0gcmVxdWlyZSgncGtnLWRpcicpO1xuY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xuY29uc3QgQiA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XG5jb25zdCB7IE9jdG9raXQgfSA9IHJlcXVpcmUoJ0BvY3Rva2l0L3Jlc3QnKTtcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IEZvcm1EYXRhID0gcmVxdWlyZSgnZm9ybS1kYXRhJyk7XG5cbmNvbnN0IHJlYWRGaWxlID0gQi5wcm9taXNpZnkoZnMucmVhZEZpbGUsIHtjb250ZXh0OiBmc30pO1xuY29uc3Qgd3JpdGVGaWxlID0gQi5wcm9taXNpZnkoZnMud3JpdGVGaWxlLCB7Y29udGV4dDogZnN9KTtcblxuY29uc3QgQVNTRVRfTkFNRV9SRUdFWFAgPSAvXmFwcGl1bS1cXFMrLnppcCQvO1xuXG5jb25zdCBHSVRIVUJfT1dORVIgPSAnYXBwaXVtJztcbmNvbnN0IEdJVEhVQl9SRVBPID0gJ2FwcGl1bS1idWlsZC1zdG9yZSc7XG5cbmNvbnN0IE9VVFBVVF9JTlRFUlZBTCA9IDYwMDAwO1xuXG5jb25zdCBNT0NIQV9QQVJBTExFTF9URVNUX0JST0tFTl9MSU5FID0gYGlmICh2YWx1ZS50eXBlID09PSAndGVzdCcpIHtgO1xuY29uc3QgTU9DSEFfUEFSQUxMRUxfVEVTVF9GSVhFRF9MSU5FID0gYGlmICh2YWx1ZS50eXBlID09PSAndGVzdCcpIHtcXG4gICAgICAgIGRlbGV0ZSB2YWx1ZS5mbjtgO1xuXG5jb25zdCBjb25maWd1cmUgPSBmdW5jdGlvbiBjb25maWd1cmUgKGd1bHAsIG9wdHMpIHtcbiAgY29uc3Qgb3duZXIgPSBvcHRzLmNpLm93bmVyIHx8IEdJVEhVQl9PV05FUjtcbiAgY29uc3QgcmVwbyA9IG9wdHMuY2kucmVwbyB8fCBHSVRIVUJfUkVQTztcblxuICBjb25zdCByb290ID0gb3B0cy5wcm9qZWN0Um9vdCA/IG9wdHMucHJvamVjdFJvb3QgOiBmaW5kUm9vdChfX2Rpcm5hbWUpO1xuXG4gIC8qKlxuICAgKiBgbW9jaGEtcGFyYWxsZWwtdGVzdHNgIGlzIGJyb2tlbiBhdCB0aGUgbW9tZW50LCBzbyBza2lwcGVkIGRlc2NyaWJlIGJsb2NrcyBmYWlsXG4gICAqIHRoZSBmaXggaXMgc2ltcGxlLCBhbmQgdGhpcyBwYXRjaGVzIHRoZSBlcnJvciB1bnRpbCB0aGV5IGZpeCB0aGUgcGFja2FnZVxuICAgKiovXG4gIGd1bHAudGFzaygnZml4LW1vY2hhLXBhcmFsbGVsLXRlc3RzJywgYXN5bmMgZnVuY3Rpb24gZml4TW9jaGFQYXJhbGxlbFRlc3RzICgpIHtcbiAgICBsb2coYFVwZGF0aW5nICdtb2NoYS1wYXJhbGxlbC10ZXN0cydgKTtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShyb290LCAnbm9kZV9tb2R1bGVzJywgJ21vY2hhLXBhcmFsbGVsLXRlc3RzJywgJ2Rpc3QnLCAnbWFpbicsICd1dGlsLmpzJyk7XG5cbiAgICBsb2coYEZpbGU6ICcke2ZpbGVQYXRofSdgKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgc2NyaXB0ID0gYXdhaXQgcmVhZEZpbGUoZmlsZVBhdGgsIHtlbmNvZGluZzogJ3V0ZjgnfSk7XG4gICAgICBzY3JpcHQgPSBhd2FpdCBzY3JpcHQucmVwbGFjZShNT0NIQV9QQVJBTExFTF9URVNUX0JST0tFTl9MSU5FLCBNT0NIQV9QQVJBTExFTF9URVNUX0ZJWEVEX0xJTkUpO1xuICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBzY3JpcHQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgbXNnID0gZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ0VOT0VOVCcpXG4gICAgICAgID8gYEZpbGUgJyR7ZmlsZVBhdGh9JyBkb2VzIG5vdCBleGlzdGBcbiAgICAgICAgOiBlcnIubWVzc2FnZTtcbiAgICAgIGxvZy5lcnJvcihgVW5hYmxlIHRvIGZpeDogJHttc2d9YCk7XG4gICAgfVxuICB9KTtcblxuICBndWxwLnRhc2soJ2dpdGh1Yjp1cGxvYWQnLCBhc3luYyBmdW5jdGlvbiBnaXRodWJVcGxvYWQgKCkge1xuICAgIGNvbnN0IGdpdGh1YlRva2VuID0gcHJvY2Vzcy5lbnYuR0lUSFVCX1RPS0VOO1xuICAgIGlmIChfLmlzRW1wdHkoZ2l0aHViVG9rZW4pKSB7XG4gICAgICBsb2cud2FybignTm8gR2l0SHViIHRva2VuIGZvdW5kIGluIEdJVEhVQl9UT0tFTiBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvY3Rva2l0ID0gbmV3IE9jdG9raXQoe2F1dGg6IGdpdGh1YlRva2VufSk7XG5cbiAgICBjb25zdCBidWlsZE5hbWUgPSBwcm9jZXNzLmVudi5CVUlMRF9OQU1FIHx8IGAke0RhdGUubm93KCl9YDtcbiAgICBjb25zdCBjb21taXRNZXNzYWdlID0gcHJvY2Vzcy5lbnYuQ09NTUlUX01FU1NBR0UgfHwgJ05vIGNvbW1pdCBtZXNzYWdlIHByb3ZpZGVkJztcblxuICAgIGNvbnN0IHJlbGVhc2VUYWcgPSBgYXBwaXVtLWJ1aWxkLSR7YnVpbGROYW1lfWA7XG4gICAgY29uc3QgcmVsZWFzZUZpbGUgPSBgYXBwaXVtLSR7YnVpbGROYW1lfS56aXBgO1xuXG4gICAgbGV0IHJlbGVhc2VJZDtcbiAgICB0cnkge1xuICAgICAgbG9nKGBDcmVhdGluZyByZWxlYXNlIG9uICcke293bmVyfS8ke3JlcG99J2ApO1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgb2N0b2tpdC5yZXBvcy5jcmVhdGVSZWxlYXNlKHtcbiAgICAgICAgb3duZXIsXG4gICAgICAgIHJlcG8sXG4gICAgICAgIHRhZ19uYW1lOiByZWxlYXNlVGFnLFxuICAgICAgICBuYW1lOiBgQXBwaXVtIGJ1aWxkICR7YnVpbGROYW1lfWAsXG4gICAgICAgIGJvZHk6IGBBcHBpdW0gYnVpbGQgZm9yIGNvbW1pdCAke2J1aWxkTmFtZX1cXG4nJHtjb21taXRNZXNzYWdlfSdgLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbGVhc2VJZCA9IHJlcy5kYXRhLmlkO1xuICAgICAgbG9nKGBDcmVhdGVkIHJlbGVhc2UgJyR7cmVsZWFzZVRhZ30nIChpZDogJHtyZWxlYXNlSWR9KWApO1xuXG4gICAgICBjb25zdCB1cmwgPSByZXMuZGF0YS51cGxvYWRfdXJsO1xuICAgICAgY29uc3QgZmlsZSA9IHBhdGgucmVzb2x2ZShyb290LCAnYXBwaXVtLnppcCcpO1xuICAgICAgbG9nKGBVcGxvYWRpbmcgZmlsZSAnJHtmaWxlfSdgKTtcbiAgICAgIGF3YWl0IG9jdG9raXQucmVwb3MudXBsb2FkUmVsZWFzZUFzc2V0KHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdjb250ZW50LWxlbmd0aCc6IGZzLnN0YXRTeW5jKGZpbGUpLnNpemUsXG4gICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi96aXAnLFxuICAgICAgICB9LFxuICAgICAgICB1cmwsXG4gICAgICAgIGZpbGU6IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZSksXG4gICAgICAgIG5hbWU6IHJlbGVhc2VGaWxlLFxuICAgICAgfSk7XG4gICAgICBsb2coYFVwbG9hZGVkIHJlbGVhc2UgZmlsZSAnJHtyZWxlYXNlRmlsZX0nYCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2cuZXJyb3IoYEVycm9yIHVwbG9hZGluZyByZWxlYXNlIGFzc2V0OiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgaWYgKGVyci5lcnJvcnMpIHtcbiAgICAgICAgbG9nLmVycm9yKEpTT04uc3RyaW5naWZ5KGVyci5lcnJvcnMsIDIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlbGVhc2VJZCkge1xuICAgICAgICBsb2coJ0RlbGV0aW5nIHJlbGVhc2Ugd2l0aCBubyBhc3NldCcpO1xuICAgICAgICBhd2FpdCBvY3Rva2l0LnJlcG9zLmRlbGV0ZVJlbGVhc2Uoe1xuICAgICAgICAgIG93bmVyLFxuICAgICAgICAgIHJlcG8sXG4gICAgICAgICAgcmVsZWFzZV9pZDogcmVsZWFzZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgbG9nKCdSZWxlYXNlIGRlbGV0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIHJlbGVhc2U6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9KTtcblxuICBndWxwLnRhc2soJ2dpdGh1Yi11cGxvYWQnLCBndWxwLnNlcmllcyhbJ2dpdGh1Yjp1cGxvYWQnXSkpO1xuXG4gIGd1bHAudGFzaygnZ2l0aHViOmRvd25sb2FkJywgYXN5bmMgZnVuY3Rpb24gZ2l0aHViRG93bmxvYWQgKCkge1xuICAgIGNvbnN0IGdpdGh1YlRva2VuID0gcHJvY2Vzcy5lbnYuR0lUSFVCX1RPS0VOO1xuICAgIGlmIChfLmlzRW1wdHkoZ2l0aHViVG9rZW4pKSB7XG4gICAgICBsb2cud2FybignTm8gR2l0SHViIHRva2VuIGZvdW5kIGluIEdJVEhVQl9UT0tFTiBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvY3Rva2l0ID0gbmV3IE9jdG9raXQoe2F1dGg6IGdpdGh1YlRva2VufSk7XG5cbiAgICBsb2cuaW5mbygnRG93bmxvYWRpbmcgR2l0SHViIGFzc2V0Jyk7XG4gICAgY29uc3QgdGVtcERpciA9IG9zLnRtcGRpcigpO1xuICAgIGxvZy5pbmZvKGBUZW1wb3JhcnkgZGlyZWN0b3J5IGZvciBkb3dubG9hZDogJyR7dGVtcERpcn0nYCk7XG5cbiAgICBsb2cuaW5mbyhgRG93bmxvYWRpbmcgcmVwb3NpdG9yeTogJyR7b3duZXJ9LyR7cmVwb30nYCk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgb2N0b2tpdC5yZXBvcy5nZXRMYXRlc3RSZWxlYXNlKHtvd25lciwgcmVwb30pO1xuICAgIC8vIGdvIHRocm91Z2ggdGhlIGFzc2V0cyBhbmQgZmluZCB0aGUgY29ycmVjdCBvbmVcbiAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIHJlcy5kYXRhLmFzc2V0cykge1xuICAgICAgaWYgKEFTU0VUX05BTUVfUkVHRVhQLnRlc3QoYXNzZXQubmFtZSkpIHtcbiAgICAgICAgbG9nLmluZm8oYERvd25sb2FkaW5nIGFzc2V0IGZyb20gJyR7YXNzZXQuYnJvd3Nlcl9kb3dubG9hZF91cmx9J2ApO1xuICAgICAgICBjb25zdCB1cmwgPSBhc3NldC5icm93c2VyX2Rvd25sb2FkX3VybDtcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oYCR7dGVtcERpcn0vYXBwaXVtLnppcGApO1xuICAgICAgICBjb25zdCByZXNwb25zZVN0cmVhbSA9IChhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3N0cmVhbScsXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICByZXNwb25zZVN0cmVhbS5waXBlKHdyaXRlcik7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICByZXNwb25zZVN0cmVhbS5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICAgICAgd3JpdGVyLm9uY2UoJ2ZpbmlzaCcsIHJlc29sdmUpO1xuICAgICAgICAgIHdyaXRlci5vbmNlKCdlcnJvcicsIChlKSA9PiB7XG4gICAgICAgICAgICByZXNwb25zZVN0cmVhbS51bnBpcGUod3JpdGVyKTtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGZpbmQgQXBwaXVtIGJ1aWxkIGFzc2V0YCk7XG4gIH0pO1xuXG4gIGd1bHAudGFzaygnc2F1Y2VsYWJzOnVwbG9hZCcsIGFzeW5jIGZ1bmN0aW9uIHNhdWNlTGFic1VwbG9hZCAoKSB7XG4gICAgLy8gRmluZCB0aGUgbGF0ZXN0IGJ1bmRsZVxuICAgIGxvZy5pbmZvKCdVcGxvYWRpbmcgdG8gU2F1Y2UgU3RvcmFnZScpO1xuICAgIGNvbnN0IHRlbXBEaXIgPSBvcy50bXBkaXIoKTtcbiAgICBsb2cuaW5mbyhgVGVtcG9yYXJ5IGRpcmVjdG9yeSBmb3IgdXBsb2FkOiAnJHt0ZW1wRGlyfSdgKTtcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmcy5jcmVhdGVSZWFkU3RyZWFtKGAke3RlbXBEaXJ9L2FwcGl1bS56aXBgKSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgdXJsOiBgaHR0cHM6Ly9zYXVjZWxhYnMuY29tL3Jlc3QvdjEvc3RvcmFnZS8ke3Byb2Nlc3MuZW52LlNBVUNFX1VTRVJOQU1FfS9hcHBpdW0uemlwP292ZXJ3cml0ZT10cnVlYCxcbiAgICAgIGhlYWRlcnM6IGZvcm0uZ2V0SGVhZGVycygpLFxuICAgICAgYXV0aDoge1xuICAgICAgICB1c2VybmFtZTogcHJvY2Vzcy5lbnYuU0FVQ0VfVVNFUk5BTUUsXG4gICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5TQVVDRV9BQ0NFU1NfS0VZLFxuICAgICAgfSxcbiAgICAgIGRhdGE6IGZvcm0sXG4gICAgfTtcbiAgICBjb25zdCBib2R5ID0gKGF3YWl0IGF4aW9zKG9wdGlvbnMpKS5kYXRhO1xuICAgIC8vIHVzZXJuYW1lIHNob3VsZCBub3QgZW5kIHVwIGluIHRoZSBsb2dzXG4gICAgYm9keS51c2VybmFtZSA9ICcqJy5yZXBlYXQoKGJvZHkudXNlcm5hbWUgfHwgJycpLmxlbmd0aCk7XG4gICAgbG9nLmluZm8oYEZpbGUgdXBsb2FkZWQ6ICR7SlNPTi5zdHJpbmdpZnkoYm9keSl9YCk7XG4gIH0pO1xuXG4gIGd1bHAudGFzaygnc2F1Y2Utc3RvcmFnZS11cGxvYWQnLCBndWxwLnNlcmllcyhbJ2dpdGh1Yjpkb3dubG9hZCcsICdzYXVjZWxhYnM6dXBsb2FkJ10pKTtcblxuXG4gIC8qKlxuICAgKiBUaGlzIHRhc2sgaXMgbWVhbnQgdG8gYmUgYmFja2dyb3VuZGVkLCBhbmQga2lsbGVkIHVzaW5nIE9TIHRvb2xzLCBzbyBpdFxuICAgKiBuZXZlciBmaW5pc2hlcy5cbiAgICogICAkICQobnBtIGJpbikvZ3VscCBwZXJpb2RpYy1vdXRwdXQgJlxuICAgKiAgIFsxXSAzODA2MFxuICAgKiAgIFswODo1Njo1M10gVXNpbmcgZ3VscGZpbGUgfi9jb2RlL2FwcGl1bS14Y3VpdGVzdC1kcml2ZXIvZ3VscGZpbGUuanNcbiAgICogICBbMDg6NTY6NTNdIFN0YXJ0aW5nICdwZXJpb2RpYy1vdXRwdXQnLi4uXG4gICAqICAgJCBraWxsIDM4MDYwXG4gICAqICAgWzFdICArIDM4MDYwIHRlcm1pbmF0ZWQgICQobnBtIGJpbikvZ3VscCBwZXJpb2RpYy1vdXRwdXRcbiAgICovXG4gIGd1bHAudGFzaygncGVyaW9kaWMtb3V0cHV0JywgZnVuY3Rpb24gcGVyaW9kaWNPdXRwdXQgKCkge1xuICAgIGNvbnN0IGludGVydmFsID0gb3B0cy5jaS5pbnRlcnZhbCB8fCBPVVRQVVRfSU5URVJWQUw7XG4gICAgcmV0dXJuIG5ldyBCKGZ1bmN0aW9uIHdyaXRlVG9TdGRvdXQgKCkge1xuICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gcHJpbnQgKCkge1xuICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZSgnLicpO1xuICAgICAgfSwgaW50ZXJ2YWwpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25maWd1cmUsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUVBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUQsQ0FBbEI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQSxNQUFNRSxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQW5COztBQUNBLE1BQU07RUFBQ0csSUFBSSxFQUFFQztBQUFQLElBQW1CSixPQUFPLENBQUMsU0FBRCxDQUFoQzs7QUFDQSxNQUFNSyxLQUFLLEdBQUdMLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1NLENBQUMsR0FBR04sT0FBTyxDQUFDLFVBQUQsQ0FBakI7O0FBQ0EsTUFBTU8sRUFBRSxHQUFHUCxPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFDQSxNQUFNO0VBQUVRO0FBQUYsSUFBY1IsT0FBTyxDQUFDLGVBQUQsQ0FBM0I7O0FB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
