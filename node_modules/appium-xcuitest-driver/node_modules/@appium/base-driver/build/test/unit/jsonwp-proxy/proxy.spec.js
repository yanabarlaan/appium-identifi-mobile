"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _lib = require("../../../lib");

var _mockRequest = _interopRequireDefault(require("./mock-request"));

var _errors = require("../../../lib/protocol/errors");

var _helpers = require("../../helpers");

function buildReqRes(url, method, body) {
  let req = {
    originalUrl: url,
    method,
    body
  };
  let res = {};
  res.headers = {};

  res.set = (k, v) => {
    res[k] = v;
  };

  res.status = code => {
    res.sentCode = code;
    return res;
  };

  res.send = body => {
    try {
      body = JSON.parse(body);
    } catch (e) {}

    res.sentBody = body;
  };

  return [req, res];
}

describe('proxy', function () {
  let port;

  function mockProxy(opts = {}) {
    opts = {
      server: _helpers.TEST_HOST,
      port,
      ...opts
    };
    let proxy = new _lib.JWProxy(opts);

    proxy.request = async function (...args) {
      return await (0, _mockRequest.default)(...args);
    };

    return proxy;
  }

  before(async function () {
    port = await (0, _helpers.getTestPort)();
  });
  it('should override default params', function () {
    let j = mockProxy({
      server: '127.0.0.2',
      port
    });
    j.server.should.equal('127.0.0.2');
    j.port.should.equal(port);
  });
  it('should save session id on session creation', async function () {
    let j = mockProxy();
    let [res, body] = await j.proxy('/session', 'POST', {
      desiredCapabilities: {}
    });
    res.statusCode.should.equal(200);
    body.should.eql({
      status: 0,
      sessionId: '123',
      value: {
        browserName: 'boo'
      }
    });
    j.sessionId.should.equal('123');
  });
  describe('getUrlForProxy', function () {
    it('should modify session id, host, and port', function () {
      let j = mockProxy({
        sessionId: '123'
      });
      j.getUrlForProxy('http://host.com:1234/session/456/element/200/value').should.eql(`http://${_helpers.TEST_HOST}:${port}/session/123/element/200/value`);
    });
    it('should prepend scheme, host and port if not provided', function () {
      let j = mockProxy({
        sessionId: '123'
      });
      j.getUrlForProxy('/session/456/element/200/value').should.eql(`http://${_helpers.TEST_HOST}:${port}/session/123/element/200/value`);
    });
    it('should respect nonstandard incoming request base path', function () {
      let j = mockProxy({
        sessionId: '123',
        reqBasePath: ''
      });
      j.getUrlForProxy('/session/456/element/200/value').should.eql(`http://${_helpers.TEST_HOST}:${port}/session/123/element/200/value`);
      j = mockProxy({
        sessionId: '123',
        reqBasePath: '/my/base/path'
      });
      j.getUrlForProxy('/my/base/path/session/456/element/200/value').should.eql(`http://${_helpers.TEST_HOST}:${port}/session/123/element/200/value`);
    });
    it('should work with urls which do not have session ids', function () {
      let j = mockProxy({
        sessionId: '123'
      });
      j.getUrlForProxy('http://host.com:1234/session').should.eql(`http://${_helpers.TEST_HOST}:${port}/session`);
      let newUrl = j.getUrlForProxy('/session');
      newUrl.should.eql(`http://${_helpers.TEST_HOST}:${port}/session`);
    });
    it('should throw an error if url requires a sessionId but its null', function () {
      let j = mockProxy();
      let e;

      try {
        j.getUrlForProxy('/session/456/element/200/value');
      } catch (err) {
        e = err;
      }

      should.exist(e);
      e.message.should.contain('without session id');
    });
    it('should not throw an error if url does not require a session id and its null', function () {
      let j = mockProxy();
      let newUrl = j.getUrlForProxy('/status');
      should.exist(newUrl);
    });
  });
  describe('straight proxy', function () {
    it('should successfully proxy straight', async function () {
      let j = mockProxy();
      let [res, body] = await j.proxy('/status', 'GET');
      res.statusCode.should.equal(200);
      body.should.eql({
        status: 0,
        value: {
          foo: 'bar'
        }
      });
    });
    it('should pass along request errors', function () {
      let j = mockProxy({
        sessionId: '123'
      });
      j.proxy('/badurl', 'GET').should.eventually.be.rejectedWith('Could not proxy');
    });
    it('should proxy error responses and codes', async function () {
      let j = mockProxy({
        sessionId: '123'
      });

      try {
        await j.proxy('/element/bad/text', 'GET');
      } catch (e) {
        (0, _errors.isErrorType)(e.getActualError(), _errors.errors.ElementNotVisibleError).should.be.true;
      }
    });
  });
  describe('command proxy', function () {
    it('should successfully proxy command', async function () {
      let j = mockProxy();
      let res = await j.command('/status', 'GET');
      res.should.eql({
        foo: 'bar'
      });
    });
    it('should pass along request errors', function () {
      let j = mockProxy({
        sessionId: '123'
      });
      j.command('/badurl', 'GET').should.eventually.be.rejectedWith('Could not proxy');
    });
    it('should throw when a command fails', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let e = null;

      try {
        await j.command('/element/bad/text', 'GET');
      } catch (err) {
        e = err;
      }

      should.exist(e);
      e.message.should.contain('Invisible element');
    });
    it('should throw when a command fails with a 200 because the status is not 0', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let e = null;

      try {
        await j.command('/element/200/text', 'GET');
      } catch (err) {
        e = err;
      }

      should.exist(e);
      e.error.should.eql('element not visible');
    });
    it('should throw when a command fails with a 100', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let e = null;

      try {
        await j.command('/session/badchrome/nochrome', 'GET');
      } catch (err) {
        e = err;
      }

      should.exist(e);
      e.message.should.contain('chrome not reachable');
    });
  });
  describe('req/res proxy', function () {
    it('should successfully proxy via req and send to res', async function () {
      let j = mockProxy();
      let [req, res] = buildReqRes('/status', 'GET');
      await j.proxyReqRes(req, res);
      res.headers['content-type'].should.equal('application/json; charset=utf-8');
      res.sentCode.should.equal(200);
      res.sentBody.should.eql({
        value: {
          foo: 'bar'
        }
      });
    });
    it('should rewrite the inner session id so it doesnt change', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let [req, res] = buildReqRes('/element/200/value', 'GET');
      await j.proxyReqRes(req, res);
      res.sentBody.should.eql({
        value: 'foobar',
        sessionId: '123'
      });
    });
    it('should rewrite the inner session id with sessionId in url', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let [req, res] = buildReqRes('/session/456/element/200/value', 'POST');
      await j.proxyReqRes(req, res);
      res.sentBody.should.eql({
        value: 'foobar',
        sessionId: '456'
      });
    });
    it('should pass through urls that do not require session IDs', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let [req, res] = buildReqRes('/status', 'GET');
      await j.proxyReqRes(req, res);
      res.sentBody.should.eql({
        value: {
          'foo': 'bar'
        }
      });
    });
    it('should proxy strange responses', async function () {
      let j = mockProxy({
        sessionId: '123'
      });
      let [req, res] = buildReqRes('/nochrome', 'GET');
      await j.proxyReqRes(req, res);
      res.sentCode.should.equal(100);
      res.sentBody.should.eql({
        value: {
          message: 'chrome not reachable'
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZFJlcVJlcyIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJyZXEiLCJvcmlnaW5hbFVybCIsInJlcyIsImhlYWRlcnMiLCJzZXQiLCJrIiwidiIsInN0YXR1cyIsImNvZGUiLCJzZW50Q29kZSIsInNlbmQiLCJKU09OIiwicGFyc2UiLCJlIiwic2VudEJvZHkiLCJkZXNjcmliZSIsInBvcnQiLCJtb2NrUHJveHkiLCJvcHRzIiwic2VydmVyIiwiVEVTVF9IT1NUIiwicHJveHkiLCJKV1Byb3h5IiwicmVxdWVzdCIsImFyZ3MiLCJiZWZvcmUiLCJpdCIsImoiLCJzaG91bGQiLCJlcXVhbCIsImRlc2lyZWRDYXBhYmlsaXRpZXMiLCJzdGF0dXNDb2RlIiwiZXFsIiwic2Vzc2lvbklkIiwidmFsdWUiLCJicm93c2VyTmFtZSIsImdldFVybEZvclByb3h5IiwicmVxQmFzZVBhdGgiLCJuZXdVcmwiLCJlcnIiLCJleGlzdCIsIm1lc3NhZ2UiLCJjb250YWluIiwiZm9vIiwiZXZlbnR1YWxseSIsImJlIiwicmVqZWN0ZWRXaXRoIiwiZ2V0QWN0dWFsRXJyb3IiLCJlcnJvcnMiLCJFbGVtZW50Tm90VmlzaWJsZUVycm9yIiwidHJ1ZSIsImNvbW1hbmQiLCJlcnJvciIsInByb3h5UmVxUmVzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdC91bml0L2pzb253cC1wcm94eS9wcm94eS5zcGVjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHRyYW5zcGlsZTptb2NoYVxuXG5pbXBvcnQgeyBKV1Byb3h5IH0gZnJvbSAnLi4vLi4vLi4vbGliJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJy4vbW9jay1yZXF1ZXN0JztcbmltcG9ydCB7IGlzRXJyb3JUeXBlLCBlcnJvcnMgfSBmcm9tICcuLi8uLi8uLi9saWIvcHJvdG9jb2wvZXJyb3JzJztcbmltcG9ydCB7IGdldFRlc3RQb3J0LCBURVNUX0hPU1QgfSBmcm9tICcuLi8uLi9oZWxwZXJzJztcblxuZnVuY3Rpb24gYnVpbGRSZXFSZXMgKHVybCwgbWV0aG9kLCBib2R5KSB7XG4gIGxldCByZXEgPSB7b3JpZ2luYWxVcmw6IHVybCwgbWV0aG9kLCBib2R5fTtcbiAgbGV0IHJlcyA9IHt9O1xuICByZXMuaGVhZGVycyA9IHt9O1xuICByZXMuc2V0ID0gKGssIHYpID0+IHsgcmVzW2tdID0gdjsgfTtcbiAgcmVzLnN0YXR1cyA9IChjb2RlKSA9PiB7XG4gICAgcmVzLnNlbnRDb2RlID0gY29kZTtcbiAgICByZXR1cm4gcmVzO1xuICB9O1xuICByZXMuc2VuZCA9IChib2R5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmVzLnNlbnRCb2R5ID0gYm9keTtcbiAgfTtcbiAgcmV0dXJuIFtyZXEsIHJlc107XG59XG5cbmRlc2NyaWJlKCdwcm94eScsIGZ1bmN0aW9uICgpIHtcbiAgbGV0IHBvcnQ7XG5cbiAgZnVuY3Rpb24gbW9ja1Byb3h5IChvcHRzID0ge30pIHtcbiAgICAvLyBzZXRzIGRlZmF1bHQgc2VydmVyL3BvcnRcbiAgICBvcHRzID0ge3NlcnZlcjogVEVTVF9IT1NULCBwb3J0LCAuLi5vcHRzfTtcbiAgICBsZXQgcHJveHkgPSBuZXcgSldQcm94eShvcHRzKTtcbiAgICBwcm94eS5yZXF1ZXN0ID0gYXN5bmMgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgIHJldHVybiBhd2FpdCByZXF1ZXN0KC4uLmFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIHByb3h5O1xuICB9XG5cbiAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBwb3J0ID0gYXdhaXQgZ2V0VGVzdFBvcnQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBvdmVycmlkZSBkZWZhdWx0IHBhcmFtcycsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2VydmVyOiAnMTI3LjAuMC4yJywgcG9ydH0pO1xuICAgIGouc2VydmVyLnNob3VsZC5lcXVhbCgnMTI3LjAuMC4yJyk7XG4gICAgai5wb3J0LnNob3VsZC5lcXVhbChwb3J0KTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgc2F2ZSBzZXNzaW9uIGlkIG9uIHNlc3Npb24gY3JlYXRpb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGogPSBtb2NrUHJveHkoKTtcbiAgICBsZXQgW3JlcywgYm9keV0gPSBhd2FpdCBqLnByb3h5KCcvc2Vzc2lvbicsICdQT1NUJywge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IHt9fSk7XG4gICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgYm9keS5zaG91bGQuZXFsKHtzdGF0dXM6IDAsIHNlc3Npb25JZDogJzEyMycsIHZhbHVlOiB7YnJvd3Nlck5hbWU6ICdib28nfX0pO1xuICAgIGouc2Vzc2lvbklkLnNob3VsZC5lcXVhbCgnMTIzJyk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0VXJsRm9yUHJveHknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBtb2RpZnkgc2Vzc2lvbiBpZCwgaG9zdCwgYW5kIHBvcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJ30pO1xuICAgICAgai5nZXRVcmxGb3JQcm94eSgnaHR0cDovL2hvc3QuY29tOjEyMzQvc2Vzc2lvbi80NTYvZWxlbWVudC8yMDAvdmFsdWUnKVxuICAgICAgIC5zaG91bGQuZXFsKGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vc2Vzc2lvbi8xMjMvZWxlbWVudC8yMDAvdmFsdWVgKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHByZXBlbmQgc2NoZW1lLCBob3N0IGFuZCBwb3J0IGlmIG5vdCBwcm92aWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KHtzZXNzaW9uSWQ6ICcxMjMnfSk7XG4gICAgICBqLmdldFVybEZvclByb3h5KCcvc2Vzc2lvbi80NTYvZWxlbWVudC8yMDAvdmFsdWUnKVxuICAgICAgIC5zaG91bGQuZXFsKGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vc2Vzc2lvbi8xMjMvZWxlbWVudC8yMDAvdmFsdWVgKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJlc3BlY3Qgbm9uc3RhbmRhcmQgaW5jb21pbmcgcmVxdWVzdCBiYXNlIHBhdGgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJywgcmVxQmFzZVBhdGg6ICcnfSk7XG4gICAgICBqLmdldFVybEZvclByb3h5KCcvc2Vzc2lvbi80NTYvZWxlbWVudC8yMDAvdmFsdWUnKVxuICAgICAgIC5zaG91bGQuZXFsKGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vc2Vzc2lvbi8xMjMvZWxlbWVudC8yMDAvdmFsdWVgKTtcblxuICAgICAgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJywgcmVxQmFzZVBhdGg6ICcvbXkvYmFzZS9wYXRoJ30pO1xuICAgICAgai5nZXRVcmxGb3JQcm94eSgnL215L2Jhc2UvcGF0aC9zZXNzaW9uLzQ1Ni9lbGVtZW50LzIwMC92YWx1ZScpXG4gICAgICAgLnNob3VsZC5lcWwoYGh0dHA6Ly8ke1RFU1RfSE9TVH06JHtwb3J0fS9zZXNzaW9uLzEyMy9lbGVtZW50LzIwMC92YWx1ZWApO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgd29yayB3aXRoIHVybHMgd2hpY2ggZG8gbm90IGhhdmUgc2Vzc2lvbiBpZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJ30pO1xuICAgICAgai5nZXRVcmxGb3JQcm94eSgnaHR0cDovL2hvc3QuY29tOjEyMzQvc2Vzc2lvbicpXG4gICAgICAgLnNob3VsZC5lcWwoYGh0dHA6Ly8ke1RFU1RfSE9TVH06JHtwb3J0fS9zZXNzaW9uYCk7XG5cbiAgICAgIGxldCBuZXdVcmwgPSBqLmdldFVybEZvclByb3h5KCcvc2Vzc2lvbicpO1xuICAgICAgbmV3VXJsLnNob3VsZC5lcWwoYGh0dHA6Ly8ke1RFU1RfSE9TVH06JHtwb3J0fS9zZXNzaW9uYCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiB1cmwgcmVxdWlyZXMgYSBzZXNzaW9uSWQgYnV0IGl0cyBudWxsJywgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGogPSBtb2NrUHJveHkoKTtcbiAgICAgIGxldCBlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgai5nZXRVcmxGb3JQcm94eSgnL3Nlc3Npb24vNDU2L2VsZW1lbnQvMjAwL3ZhbHVlJyk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZSA9IGVycjtcbiAgICAgIH1cbiAgICAgIHNob3VsZC5leGlzdChlKTtcbiAgICAgIGUubWVzc2FnZS5zaG91bGQuY29udGFpbignd2l0aG91dCBzZXNzaW9uIGlkJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgYW4gZXJyb3IgaWYgdXJsIGRvZXMgbm90IHJlcXVpcmUgYSBzZXNzaW9uIGlkIGFuZCBpdHMgbnVsbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KCk7XG4gICAgICBsZXQgbmV3VXJsID0gai5nZXRVcmxGb3JQcm94eSgnL3N0YXR1cycpO1xuXG4gICAgICBzaG91bGQuZXhpc3QobmV3VXJsKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdzdHJhaWdodCBwcm94eScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSBwcm94eSBzdHJhaWdodCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KCk7XG4gICAgICBsZXQgW3JlcywgYm9keV0gPSBhd2FpdCBqLnByb3h5KCcvc3RhdHVzJywgJ0dFVCcpO1xuICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICBib2R5LnNob3VsZC5lcWwoe3N0YXR1czogMCwgdmFsdWU6IHtmb286ICdiYXInfX0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcGFzcyBhbG9uZyByZXF1ZXN0IGVycm9ycycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KHtzZXNzaW9uSWQ6ICcxMjMnfSk7XG4gICAgICBqLnByb3h5KCcvYmFkdXJsJywgJ0dFVCcpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgnQ291bGQgbm90IHByb3h5Jyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwcm94eSBlcnJvciByZXNwb25zZXMgYW5kIGNvZGVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGogPSBtb2NrUHJveHkoe3Nlc3Npb25JZDogJzEyMyd9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGoucHJveHkoJy9lbGVtZW50L2JhZC90ZXh0JywgJ0dFVCcpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpc0Vycm9yVHlwZShlLmdldEFjdHVhbEVycm9yKCksIGVycm9ycy5FbGVtZW50Tm90VmlzaWJsZUVycm9yKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdjb21tYW5kIHByb3h5JywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgc3VjY2Vzc2Z1bGx5IHByb3h5IGNvbW1hbmQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSgpO1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IGouY29tbWFuZCgnL3N0YXR1cycsICdHRVQnKTtcbiAgICAgIHJlcy5zaG91bGQuZXFsKHtmb286ICdiYXInfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwYXNzIGFsb25nIHJlcXVlc3QgZXJyb3JzJywgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGogPSBtb2NrUHJveHkoe3Nlc3Npb25JZDogJzEyMyd9KTtcbiAgICAgIGouY29tbWFuZCgnL2JhZHVybCcsICdHRVQnKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoJ0NvdWxkIG5vdCBwcm94eScpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgd2hlbiBhIGNvbW1hbmQgZmFpbHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJ30pO1xuICAgICAgbGV0IGUgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgai5jb21tYW5kKCcvZWxlbWVudC9iYWQvdGV4dCcsICdHRVQnKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlID0gZXJyO1xuICAgICAgfVxuICAgICAgc2hvdWxkLmV4aXN0KGUpO1xuICAgICAgZS5tZXNzYWdlLnNob3VsZC5jb250YWluKCdJbnZpc2libGUgZWxlbWVudCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgd2hlbiBhIGNvbW1hbmQgZmFpbHMgd2l0aCBhIDIwMCBiZWNhdXNlIHRoZSBzdGF0dXMgaXMgbm90IDAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJ30pO1xuICAgICAgbGV0IGUgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgai5jb21tYW5kKCcvZWxlbWVudC8yMDAvdGV4dCcsICdHRVQnKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlID0gZXJyO1xuICAgICAgfVxuICAgICAgc2hvdWxkLmV4aXN0KGUpO1xuICAgICAgZS5lcnJvci5zaG91bGQuZXFsKCdlbGVtZW50IG5vdCB2aXNpYmxlJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyB3aGVuIGEgY29tbWFuZCBmYWlscyB3aXRoIGEgMTAwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGogPSBtb2NrUHJveHkoe3Nlc3Npb25JZDogJzEyMyd9KTtcbiAgICAgIGxldCBlID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGouY29tbWFuZCgnL3Nlc3Npb24vYmFkY2hyb21lL25vY2hyb21lJywgJ0dFVCcpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGUgPSBlcnI7XG4gICAgICB9XG4gICAgICBzaG91bGQuZXhpc3QoZSk7XG4gICAgICBlLm1lc3NhZ2Uuc2hvdWxkLmNvbnRhaW4oJ2Nocm9tZSBub3QgcmVhY2hhYmxlJyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgncmVxL3JlcyBwcm94eScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSBwcm94eSB2aWEgcmVxIGFuZCBzZW5kIHRvIHJlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KCk7XG4gICAgICBsZXQgW3JlcSwgcmVzXSA9IGJ1aWxkUmVxUmVzKCcvc3RhdHVzJywgJ0dFVCcpO1xuICAgICAgYXdhaXQgai5wcm94eVJlcVJlcyhyZXEsIHJlcyk7XG4gICAgICByZXMuaGVhZGVyc1snY29udGVudC10eXBlJ10uc2hvdWxkLmVxdWFsKCdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXMuc2VudENvZGUuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICByZXMuc2VudEJvZHkuc2hvdWxkLmVxbCh7dmFsdWU6IHtmb286ICdiYXInfX0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV3cml0ZSB0aGUgaW5uZXIgc2Vzc2lvbiBpZCBzbyBpdCBkb2VzbnQgY2hhbmdlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGogPSBtb2NrUHJveHkoe3Nlc3Npb25JZDogJzEyMyd9KTtcbiAgICAgIGxldCBbcmVxLCByZXNdID0gYnVpbGRSZXFSZXMoJy9lbGVtZW50LzIwMC92YWx1ZScsICdHRVQnKTtcbiAgICAgIGF3YWl0IGoucHJveHlSZXFSZXMocmVxLCByZXMpO1xuICAgICAgcmVzLnNlbnRCb2R5LnNob3VsZC5lcWwoe3ZhbHVlOiAnZm9vYmFyJywgc2Vzc2lvbklkOiAnMTIzJ30pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV3cml0ZSB0aGUgaW5uZXIgc2Vzc2lvbiBpZCB3aXRoIHNlc3Npb25JZCBpbiB1cmwnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaiA9IG1vY2tQcm94eSh7c2Vzc2lvbklkOiAnMTIzJ30pO1xuICAgICAgbGV0IFtyZXEsIHJlc10gPSBidWlsZFJlcVJlcygnL3Nlc3Npb24vNDU2L2VsZW1lbnQvMjAwL3ZhbHVlJywgJ1BPU1QnKTtcbiAgICAgIGF3YWl0IGoucHJveHlSZXFSZXMocmVxLCByZXMpO1xuICAgICAgcmVzLnNlbnRCb2R5LnNob3VsZC5lcWwoe3ZhbHVlOiAnZm9vYmFyJywgc2Vzc2lvbklkOiAnNDU2J30pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcGFzcyB0aHJvdWdoIHVybHMgdGhhdCBkbyBub3QgcmVxdWlyZSBzZXNzaW9uIElEcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KHtzZXNzaW9uSWQ6ICcxMjMnfSk7XG4gICAgICBsZXQgW3JlcSwgcmVzXSA9IGJ1aWxkUmVxUmVzKCcvc3RhdHVzJywgJ0dFVCcpO1xuICAgICAgYXdhaXQgai5wcm94eVJlcVJlcyhyZXEsIHJlcyk7XG4gICAgICByZXMuc2VudEJvZHkuc2hvdWxkLmVxbCh7dmFsdWU6IHsnZm9vJzogJ2Jhcid9fSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwcm94eSBzdHJhbmdlIHJlc3BvbnNlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBqID0gbW9ja1Byb3h5KHtzZXNzaW9uSWQ6ICcxMjMnfSk7XG4gICAgICBsZXQgW3JlcSwgcmVzXSA9IGJ1aWxkUmVxUmVzKCcvbm9jaHJvbWUnLCAnR0VUJyk7XG4gICAgICBhd2FpdCBqLnByb3h5UmVxUmVzKHJlcSwgcmVzKTtcbiAgICAgIHJlcy5zZW50Q29kZS5zaG91bGQuZXF1YWwoMTAwKTtcbiAgICAgIHJlcy5zZW50Qm9keS5zaG91bGQuZXFsKHt2YWx1ZToge21lc3NhZ2U6ICdjaHJvbWUgbm90IHJlYWNoYWJsZSd9fSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLFNBQVNBLFdBQVQsQ0FBc0JDLEdBQXRCLEVBQTJCQyxNQUEzQixFQUFtQ0MsSUFBbkMsRUFBeUM7RUFDdkMsSUFBSUMsR0FBRyxHQUFHO0lBQUNDLFdBQVcsRUFBRUosR0FBZDtJQUFtQkMsTUFBbkI7SUFBMkJDO0VBQTNCLENBQVY7RUFDQSxJQUFJRyxHQUFHLEdBQUcsRUFBVjtFQUNBQSxHQUFHLENBQUNDLE9BQUosR0FBYyxFQUFkOztFQUNBRCxHQUFHLENBQUNFLEdBQUosR0FBVSxDQUFDQyxDQUFELEVBQUlDLENBQUosS0FBVTtJQUFFSixHQUFHLENBQUNHLENBQUQsQ0FBSCxHQUFTQyxDQUFUO0VBQWEsQ0FBbkM7O0VBQ0FKLEdBQUcsQ0FBQ0ssTUFBSixHQUFjQyxJQUFELElBQVU7SUFDckJOLEdBQUcsQ0FBQ08sUUFBSixHQUFlRCxJQUFmO0lBQ0EsT0FBT04sR0FBUDtFQUNELENBSEQ7O0VBSUFBLEdBQUcsQ0FBQ1EsSUFBSixHQUFZWCxJQUFELElBQVU7SUFDbkIsSUFBSTtNQUNGQSxJQUFJLEdBQUdZLElBQUksQ0FBQ0MsS0FBTCxDQUFXYixJQUFYLENBQVA7SUFDRCxDQUZELENBRUUsT0FBT2MsQ0FBUCxFQUFVLENBQUU7O0lBQ2RYLEdBQUcsQ0FBQ1ksUUFBSixHQUFlZixJQUFmO0VBQ0QsQ0FMRDs7RUFNQSxPQUFPLENBQUNDLEdBQUQsRUFBTUUsR0FBTixDQUFQO0FBQ0Q7O0FBRURhLFFBQVEsQ0FBQyxPQUFELEVBQVUsWUFBWTtFQUM1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