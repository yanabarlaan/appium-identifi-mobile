"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FakeDriver = void 0;

require("source-map-support/register");

var _lib = require("../../../lib");

var _constants = require("../../../lib/constants");

var _support = require("@appium/support");

class FakeDriver extends _lib.BaseDriver {
  static newMethodMap = {
    '/session/:sessionId/noproxy': {
      GET: {
        command: 'notProxiedCommand',
        neverProxy: true
      }
    }
  };

  constructor() {
    super();
    this.protocol = _constants.PROTOCOLS.MJSONWP;
    this.sessionId = null;
    this.jwpProxyActive = false;
  }

  sessionExists(sessionId) {
    if (!sessionId) {
      return false;
    }

    return sessionId === this.sessionId;
  }

  driverForSession() {
    return this;
  }

  async createSession(desiredCapabilities, requiredCapabilities, capabilities) {
    this.sessionId = `fakeSession_${_support.util.uuidV4()}`;
    return [this.sessionId, capabilities];
  }

  async executeCommand(cmd, ...args) {
    if (!this[cmd]) {
      throw new _lib.errors.NotYetImplementedError();
    }

    if (cmd === 'createSession') {
      this.protocol = (0, _lib.determineProtocol)(args);
    }

    return await this[cmd](...args);
  }

  async deleteSession() {
    this.jwpProxyActive = false;
    this.sessionId = null;
  }

  async getStatus() {
    return "I'm fine";
  }

  async setUrl(url) {
    return `Navigated to: ${url}`;
  }

  async getUrl() {
    return 'http://foobar.com';
  }

  async back(sessionId) {
    return sessionId;
  }

  async forward() {}

  async refresh() {
    throw new Error('Too Fresh!');
  }

  async getSession() {
    throw new _lib.errors.NoSuchDriverError();
  }

  async click(elementId, sessionId) {
    return [elementId, sessionId];
  }

  async implicitWait(ms) {
    return ms;
  }

  async clickCurrent(button) {
    return button;
  }

  async setNetworkConnection(type) {
    return type;
  }

  async moveTo(element, xOffset, yOffset) {
    return [element, xOffset, yOffset];
  }

  async getText() {
    return '';
  }

  async getAttribute(attr, elementId, sessionId) {
    return [attr, elementId, sessionId];
  }

  async setValue(value, elementId) {
    return [value, elementId];
  }

  async performTouch(...args) {
    return args;
  }

  async setFrame(frameId) {
    return frameId;
  }

  async removeApp(app) {
    return app;
  }

  async receiveAsyncResponse() {
    return {
      status: 13,
      value: 'Mishandled Driver Error'
    };
  }

  proxyActive() {
    return false;
  }

  getProxyAvoidList() {
    return [];
  }

  canProxy() {
    return false;
  }

  async notProxiedCommand() {
    return 'This was not proxied';
  }

}

exports.FakeDriver = FakeDriver;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGYWtlRHJpdmVyIiwiQmFzZURyaXZlciIsIm5ld01ldGhvZE1hcCIsIkdFVCIsImNvbW1hbmQiLCJuZXZlclByb3h5IiwiY29uc3RydWN0b3IiLCJwcm90b2NvbCIsIlBST1RPQ09MUyIsIk1KU09OV1AiLCJzZXNzaW9uSWQiLCJqd3BQcm94eUFjdGl2ZSIsInNlc3Npb25FeGlzdHMiLCJkcml2ZXJGb3JTZXNzaW9uIiwiY3JlYXRlU2Vzc2lvbiIsImRlc2lyZWRDYXBhYmlsaXRpZXMiLCJyZXF1aXJlZENhcGFiaWxpdGllcyIsImNhcGFiaWxpdGllcyIsInV0aWwiLCJ1dWlkVjQiLCJleGVjdXRlQ29tbWFuZCIsImNtZCIsImFyZ3MiLCJlcnJvcnMiLCJOb3RZZXRJbXBsZW1lbnRlZEVycm9yIiwiZGVsZXRlU2Vzc2lvbiIsImdldFN0YXR1cyIsInNldFVybCIsInVybCIsImdldFVybCIsImJhY2siLCJmb3J3YXJkIiwicmVmcmVzaCIsIkVycm9yIiwiZ2V0U2Vzc2lvbiIsIk5vU3VjaERyaXZlckVycm9yIiwiY2xpY2siLCJlbGVtZW50SWQiLCJpbXBsaWNpdFdhaXQiLCJtcyIsImNsaWNrQ3VycmVudCIsImJ1dHRvbiIsInNldE5ldHdvcmtDb25uZWN0aW9uIiwidHlwZSIsIm1vdmVUbyIsImVsZW1lbnQiLCJ4T2Zmc2V0IiwieU9mZnNldCIsImdldFRleHQiLCJnZXRBdHRyaWJ1dGUiLCJhdHRyIiwic2V0VmFsdWUiLCJ2YWx1ZSIsInBlcmZvcm1Ub3VjaCIsInNldEZyYW1lIiwiZnJhbWVJZCIsInJlbW92ZUFwcCIsImFwcCIsInJlY2VpdmVBc3luY1Jlc3BvbnNlIiwic3RhdHVzIiwicHJveHlBY3RpdmUiLCJnZXRQcm94eUF2b2lkTGlzdCIsImNhblByb3h5Iiwibm90UHJveGllZENvbW1hbmQiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0L2UyZS9wcm90b2NvbC9mYWtlLWRyaXZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWF3YWl0ICovXG5pbXBvcnQgeyBlcnJvcnMsIEJhc2VEcml2ZXIsIGRldGVybWluZVByb3RvY29sIH0gZnJvbSAnLi4vLi4vLi4vbGliJztcbmltcG9ydCB7IFBST1RPQ09MUyB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb25zdGFudHMnO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5cblxuY2xhc3MgRmFrZURyaXZlciBleHRlbmRzIEJhc2VEcml2ZXIge1xuXG4gIHN0YXRpYyBuZXdNZXRob2RNYXAgPSB7XG4gICAgJy9zZXNzaW9uLzpzZXNzaW9uSWQvbm9wcm94eSc6IHtcbiAgICAgIEdFVDoge2NvbW1hbmQ6ICdub3RQcm94aWVkQ29tbWFuZCcsIG5ldmVyUHJveHk6IHRydWV9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBQUk9UT0NPTFMuTUpTT05XUDtcbiAgICB0aGlzLnNlc3Npb25JZCA9IG51bGw7XG4gICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgc2Vzc2lvbkV4aXN0cyAoc2Vzc2lvbklkKSB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHNlc3Npb25JZCA9PT0gdGhpcy5zZXNzaW9uSWQ7XG4gIH1cblxuICBkcml2ZXJGb3JTZXNzaW9uICgvKnNlc3Npb25JZCovKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBjcmVhdGVTZXNzaW9uIChkZXNpcmVkQ2FwYWJpbGl0aWVzLCByZXF1aXJlZENhcGFiaWxpdGllcywgY2FwYWJpbGl0aWVzKSB7XG4gICAgLy8gVXNlIGEgY291bnRlciB0byBtYWtlIHN1cmUgZWFjaCBzZXNzaW9uIGhhcyBhIHVuaXF1ZSBpZFxuICAgIHRoaXMuc2Vzc2lvbklkID0gYGZha2VTZXNzaW9uXyR7dXRpbC51dWlkVjQoKX1gO1xuICAgIHJldHVybiBbdGhpcy5zZXNzaW9uSWQsIGNhcGFiaWxpdGllc107XG4gIH1cblxuICBhc3luYyBleGVjdXRlQ29tbWFuZCAoY21kLCAuLi5hcmdzKSB7XG4gICAgaWYgKCF0aGlzW2NtZF0pIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuTm90WWV0SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH1cbiAgICBpZiAoY21kID09PSAnY3JlYXRlU2Vzc2lvbicpIHtcbiAgICAgIHRoaXMucHJvdG9jb2wgPSBkZXRlcm1pbmVQcm90b2NvbChhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXNbY21kXSguLi5hcmdzKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVNlc3Npb24gKCkge1xuICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRTdGF0dXMgKCkge1xuICAgIHJldHVybiBcIkknbSBmaW5lXCI7XG4gIH1cblxuICBhc3luYyBzZXRVcmwgKHVybCkge1xuICAgIHJldHVybiBgTmF2aWdhdGVkIHRvOiAke3VybH1gO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXJsICgpIHtcbiAgICByZXR1cm4gJ2h0dHA6Ly9mb29iYXIuY29tJztcbiAgfVxuXG4gIGFzeW5jIGJhY2sgKHNlc3Npb25JZCkge1xuICAgIHJldHVybiBzZXNzaW9uSWQ7XG4gIH1cblxuICBhc3luYyBmb3J3YXJkICgpIHt9XG5cbiAgYXN5bmMgcmVmcmVzaCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUb28gRnJlc2ghJyk7XG4gIH1cblxuICBhc3luYyBnZXRTZXNzaW9uICgpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaERyaXZlckVycm9yKCk7XG4gIH1cblxuICBhc3luYyBjbGljayAoZWxlbWVudElkLCBzZXNzaW9uSWQpIHtcbiAgICByZXR1cm4gW2VsZW1lbnRJZCwgc2Vzc2lvbklkXTtcbiAgfVxuXG4gIGFzeW5jIGltcGxpY2l0V2FpdCAobXMpIHtcbiAgICByZXR1cm4gbXM7XG4gIH1cblxuICBhc3luYyBjbGlja0N1cnJlbnQgKGJ1dHRvbikge1xuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICBhc3luYyBzZXROZXR3b3JrQ29ubmVjdGlvbiAodHlwZSkge1xuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgYXN5bmMgbW92ZVRvIChlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0KSB7XG4gICAgcmV0dXJuIFtlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0XTtcbiAgfVxuXG4gIGFzeW5jIGdldFRleHQgKCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGFzeW5jIGdldEF0dHJpYnV0ZSAoYXR0ciwgZWxlbWVudElkLCBzZXNzaW9uSWQpIHtcbiAgICByZXR1cm4gW2F0dHIsIGVsZW1lbnRJZCwgc2Vzc2lvbklkXTtcbiAgfVxuXG4gIGFzeW5jIHNldFZhbHVlICh2YWx1ZSwgZWxlbWVudElkKSB7XG4gICAgcmV0dXJuIFt2YWx1ZSwgZWxlbWVudElkXTtcbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Ub3VjaCAoLi4uYXJncykge1xuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgYXN5bmMgc2V0RnJhbWUgKGZyYW1lSWQpIHtcbiAgICByZXR1cm4gZnJhbWVJZDtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUFwcCAoYXBwKSB7XG4gICAgcmV0dXJuIGFwcDtcbiAgfVxuXG4gIGFzeW5jIHJlY2VpdmVBc3luY1Jlc3BvbnNlICgpIHtcbiAgICAvLyB0aGlzIGlzIGhlcmUgdG8gdGVzdCBhIGZhaWxpbmcgY29tbWFuZCB0aGF0IGRvZXMgbm90IHRocm93IGFuIGVycm9yXG4gICAgcmV0dXJuIHtzdGF0dXM6IDEzLCB2YWx1ZTogJ01pc2hhbmRsZWQgRHJpdmVyIEVycm9yJ307XG4gIH1cblxuICBwcm94eUFjdGl2ZSAoLypzZXNzaW9uSWQqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldFByb3h5QXZvaWRMaXN0ICgvKnNlc3Npb25JZCovKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY2FuUHJveHkgKC8qc2Vzc2lvbklkKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBub3RQcm94aWVkQ29tbWFuZCAoKSB7XG4gICAgcmV0dXJuICdUaGlzIHdhcyBub3QgcHJveGllZCc7XG4gIH1cbn1cblxuZXhwb3J0IHsgRmFrZURyaXZlciB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQSxNQUFNQSxVQUFOLFNBQXlCQyxlQUF6QixDQUFvQztFQUVmLE9BQVpDLFlBQVksR0FBRztJQUNwQiwrQkFBK0I7TUFDN0JDLEdBQUcsRUFBRTtRQUFDQyxPQUFPLEVBQUUsbUJBQVY7UUFBK0JDLFVBQVUsRUFBRTtNQUEzQztJQUR3QjtFQURYLENBQUg7O0VBTW5CQyxXQUFXLEdBQUk7SUFDYjtJQUNBLEtBQUtDLFFBQUwsR0FBZ0JDLHFCQUFVQyxPQUExQjtJQUNBLEtBQUtDLFNBQUwsR0FBaUIsSUFBakI7SUFDQSxLQUFLQyxjQUFMLEdBQXNCLEtBQXRCO0VBQ0Q7O0VBRURDLGFBQWEsQ0FBRUYsU0FBRixFQUFhO0lBQ3hCLElBQUksQ0FBQ0EsU0FBTCxFQUFnQjtNQUNkLE9BQU8sS0FBUDtJQUNEOztJQUNELE9BQU9BLFNBQVMsS0FBSyxLQUFLQSxTQUExQjtFQUNEOztFQUVERyxnQkFBZ0IsR0FBaUI7SUFDL0IsT0FBTyxJQUFQO0VBQ0Q7O0VBRWtCLE1BQWJDLGFBQWEsQ0FBRUMsbUJBQUYsRUFBdUJDLG9CQUF2QixFQUE2Q0MsWUFBN0MsRUFBMkQ7SUFFNUUsS0FBS1AsU0FBTCxHQUFrQixlQUFjUSxjQUFLQyxNQUFMLEVBQWMsRUFBOUM7SUFDQSxPQUFPLENBQUMsS0FBS1QsU0FBTixFQUFpQk8sWUFBakIsQ0FBUDtFQUNEOztFQUVtQixNQUFkRyxjQUFjLENBQUVDLEdBQUYsRUFBTyxHQUFH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